import{d as I,g as W,u as $,r as w,w as c,c as F,a as m,e as L,f as y,i as l,l as a,n as i,v,K as T,s as b,t as n,B as u,b as r,L as U,P as j,Q as z,p as J,k as K,m as M,V as g,W as O,o as s,_ as Q}from"./index--Aaw8Kh1.js";import{w as X}from"./index-9lX5YKhj.js";import{w as Y}from"./index-QqPnWr-n.js";const q={class:"print_goods",ref:"printGoods"},H={class:"title"},R={class:"info"},Z={class:"total"},h={class:"ct",colspan:"4"},_={key:0},tt={key:1},lt={key:2},et={key:3},nt={key:4},st={key:0},ot={key:1},it={colspan:"3"},at={class:"list"},ut={class:"columns"},dt={key:0},rt={style:{"text-align":"center"}},ft={key:0},mt={key:1},bt={key:1},yt={class:"print_field"},vt=I({__name:"PrintGoods",props:{show:{type:Boolean,default:!1},title:{type:String,default:"打印"},info:{type:Object,default:{}},columns:{type:Array,default:[]},data:{type:Array,default:[]}},emits:["update:show"],setup(e,{emit:B}){const C=e,{proxy:A}=W(),V=B,E=$().state.langs,x=g.title+" v"+g.version+" "+g.copy,f=U.priceEncode,k=w(!1),p=w("base"),G=w([{label:"打印内容",value:"base",slot:"base"},{label:"商品字段",value:"field",slot:"field"}]);c(()=>C.show,S=>{k.value=S},{deep:!0});const N=()=>{O({printable:A.$refs.printGoods,type:"html",scanStyles:!1,css:"/print/goods.css"})},P=()=>{V("update:show",!1)};return(S,t)=>(s(),F(L,{show:k.value,"onUpdate:show":t[2]||(t[2]=o=>k.value=o),title:e.title,width:"1240px",bottom:"40px",overflow:"hidden auto",onClose:t[3]||(t[3]=o=>P())},{bottom:m(()=>[y(M,{height:"40px",padding:"0 32px",onClick:t[1]||(t[1]=o=>N())},{default:m(()=>[a(n(r(E).print),1)]),_:1})]),default:m(()=>[y(K,{paddingX:"32px",paddingY:"0"},{default:m(()=>[y(Y,{value:p.value,"onUpdate:value":t[0]||(t[0]=o=>p.value=o),columns:G.value},{base:m(()=>[l("div",q,[l("div",H,n(e.info.title),1),l("div",R,[l("span",null,[t[4]||(t[4]=a("日期: ")),l("b",null,n(e.info.ctime?e.info.ctime.substr(0,10):"-"),1),t[5]||(t[5]=a("    单号: ")),l("b",null,n(e.info.id||"-"),1)]),t[6]||(t[6]=l("span",null,"签字: ________________________________",-1))]),l("table",Z,[l("tbody",null,[l("tr",null,[l("td",h,[e.info.cost_price?(s(),i("span",_,[t[7]||(t[7]=a("成本价(元): ")),l("b",null,n(r(f)(e.info.cost_price)),1),t[8]||(t[8]=a("    "))])):u("",!0),e.info.sale_price?(s(),i("span",tt,[t[9]||(t[9]=a("标签价(元): ")),l("b",null,n(r(f)(e.info.sale_price)),1),t[10]||(t[10]=a("    "))])):u("",!0),e.info.purchase_price?(s(),i("span",lt,[t[11]||(t[11]=a("采购价(W): ")),l("b",null,n(r(f)(e.info.purchase_price)),1),t[12]||(t[12]=a("    "))])):u("",!0),e.info.market_price?(s(),i("span",et,[t[13]||(t[13]=a("吊牌价(W): ")),l("b",null,n(r(f)(e.info.market_price)),1),t[14]||(t[14]=a("    "))])):u("",!0),e.info.num?(s(),i("span",nt,[t[15]||(t[15]=a("数量: ")),l("b",null,n(e.info.num||"0"),1),t[16]||(t[16]=a("    "))])):u("",!0)])]),e.info.level||e.info.level_time?(s(),i("tr",st,[t[17]||(t[17]=l("td",{class:"label"},"场次",-1)),l("td",null,n(e.info.level||"-"),1),t[18]||(t[18]=l("td",{class:"label"},"时段",-1)),l("td",null,n(e.info.level_time||"-"),1)])):u("",!0),e.info.shop_name||e.info.shop_to_name?(s(),i("tr",ot,[t[19]||(t[19]=l("td",{class:"label"},"店铺名称",-1)),l("td",null,n(e.info.shop_name||"-"),1),t[20]||(t[20]=l("td",{class:"label"},"买断店铺",-1)),l("td",null,n(e.info.shop_to_name||"-"),1)])):u("",!0),l("tr",null,[t[21]||(t[21]=l("td",{class:"label"},"制单员",-1)),l("td",null,n(e.info.creator_name||"-"),1),t[22]||(t[22]=l("td",{class:"label"},"审核人",-1)),l("td",null,n(e.info.operator_name||"-"),1)]),l("tr",null,[t[23]||(t[23]=l("td",{class:"label"},"制单时间",-1)),l("td",null,n(e.info.ctime||"-"),1),t[24]||(t[24]=l("td",{class:"label"},"审核时间",-1)),l("td",null,n(e.info.utime||"-"),1)]),l("tr",null,[t[25]||(t[25]=l("td",{class:"label"},"备注",-1)),l("td",it,n(e.info.remark||"-"),1)])])]),l("div",{class:"other"},n(x)),t[28]||(t[28]=l("div",{class:"title"},"商品明细",-1)),l("table",at,[l("thead",ut,[l("tr",null,[t[26]||(t[26]=l("td",null,"序号",-1)),(s(!0),i(b,null,v(e.columns,o=>j((s(),i("td",null,n(o.label),513)),[[z,o.checked]])),256))])]),e.data.length>0?(s(),i("tbody",dt,[(s(!0),i(b,null,v(e.data,(o,D)=>(s(),i("tr",null,[l("td",rt,n(D+1),1),(s(!0),i(b,null,v(e.columns,d=>(s(),i(b,null,[d.checked?(s(),i("td",{key:0,style:J({textAlign:d.textAlign})},[d.price&&o[d.value]>0?(s(),i(b,{key:0},[o.ratio!="1.00"?(s(),i("span",ft,[l("del",null,n(r(f)(o[d.value]*o.num)),1),t[27]||(t[27]=a()),l("b",null,n(r(f)(o[d.value]*o.num*o.ratio)),1)])):(s(),i("b",mt,n(r(f)(o[d.value]*o.num)),1))],64)):(s(),i("span",bt,n(o[d.value]),1))],4)):u("",!0)],64))),256))]))),256))])):u("",!0)]),l("div",{class:"other"},n(x))],512)]),field:m(()=>[y(X,null,{default:m(()=>t[29]||(t[29]=[a("提醒: 勾选需要打印字段")])),_:1}),l("ul",yt,[(s(!0),i(b,null,v(e.columns,o=>(s(),i("li",null,[y(T,{options:o},null,8,["options"])]))),256))])]),_:1},8,["value","columns"])]),_:1})]),_:1},8,["show","title"]))}}),St=Q(vt,[["__scopeId","data-v-c3c5ebe4"]]);export{St as P};
