import{d as X,u as Z,r as D,w as te,c as z,a as s,e as q,f as u,h as $e,i as o,K,j as oe,k as J,l as k,t as d,b as h,m as P,U as g,R,o as y,G as ie,F as fe,n as U,s as E,E as ge,D as he,N as ee,O as Te,P as Ae,A as Se,B as G,M as we,L as Ue,_ as ye,T as Y,y as De,z as Le,H as Pe,v as We,x as ke,I as Ie}from"./index-Bk_N_zTm.js";import{P as be,w as Be,a as Ye,b as He}from"./Search-C7OhwOKh.js";import{w as Re}from"./Total-BtOkyXsH.js";import{P as Ne}from"./PrintGoods-Cbbx1bk5.js";import{w as Me}from"./index-CjqO9AXO.js";import{w as Fe}from"./index-CbFQVDYo.js";import"./index-4vNOW6-5.js";const je=X({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,$=Z().state,C=$.langs,S=D(!1),a=D({tp:"",id:"",type:"",wms_co_id:"",shop_id:"",shop_to:"",remark:""}),r=D({type_name:[],partner_name:[],shop_name:[],shop_to_name:[]});te(()=>f.show,c=>{S.value=c,c&&(a.value.tp=f.data.tp||"",a.value.id=f.data.id||"",a.value.remark=f.data.remark||"",T())},{deep:!0});const T=()=>{R.Post("erp_order_inout/get_select?lang="+$.lang,{token:$.token},c=>{const{code:_,msg:b,data:W}=c.data;_==0?(r.value.type_name=W.type_name,r.value.partner_name=W.partner_name,r.value.shop_name=W.shop_name,r.value.shop_to_name=W.shop_to_name,f.data.tp=="edit"&&ie(()=>{a.value.type=[parseInt(f.data.type)],a.value.wms_co_id=[parseInt(f.data.wms_co_id)],a.value.shop_id=[parseInt(f.data.shop_id)],a.value.shop_to=[parseInt(f.data.shop_to)]})):g.Toast(b)})},m=c=>!c.type||c.type.length==0?g.Toast("请选择类型"):!c.wms_co_id||c.wms_co_id.length==0?g.Toast("请选择仓库"):!c.shop_id||c.shop_id.length==0?g.Toast("请选择店铺"):!c.shop_to||c.shop_to.length==0?g.Toast("请选择买断店铺"):c,w=()=>{const c=m(a.value);if(!c)return;const _=g.Loading();R.Post("erp_order_inout/save?lang="+$.lang,{token:$.token,data:c},b=>{_.clear();const{code:W,msg:A}=b.data;g.Toast(A),H("submit",W==0)})},i=()=>{H("update:show",!1)};return(c,_)=>(y(),z(q,{show:S.value,"onUpdate:show":_[6]||(_[6]=b=>S.value=b),title:L.title,width:"620px",bottom:"40px",onClose:_[7]||(_[7]=b=>i())},{bottom:s(()=>[u(P,{height:"40px",padding:"0 32px",onClick:_[5]||(_[5]=b=>w())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(J,null,{default:s(()=>[u($e,null,{default:s(()=>[o("tr",null,[_[8]||(_[8]=o("td",{class:"label"},[o("span",{class:"red_dot"},"仓库")],-1)),o("td",null,[u(K,{value:a.value.wms_co_id,"onUpdate:value":_[0]||(_[0]=b=>a.value.wms_co_id=b),options:r.value.partner_name,disabled:a.value.tp=="edit"},null,8,["value","options","disabled"])])]),o("tr",null,[_[9]||(_[9]=o("td",{class:"label"},[o("span",{class:"red_dot"},"类型")],-1)),o("td",null,[u(K,{value:a.value.type,"onUpdate:value":_[1]||(_[1]=b=>a.value.type=b),options:r.value.type_name},null,8,["value","options"])])]),o("tr",null,[_[10]||(_[10]=o("td",{class:"label"},[o("span",{class:"red_dot"},"店铺")],-1)),o("td",null,[u(K,{value:a.value.shop_id,"onUpdate:value":_[2]||(_[2]=b=>a.value.shop_id=b),options:r.value.shop_name},null,8,["value","options"])])]),o("tr",null,[_[11]||(_[11]=o("td",{class:"label"},[o("span",{class:"red_dot"},"买断店铺")],-1)),o("td",null,[u(K,{value:a.value.shop_to,"onUpdate:value":_[3]||(_[3]=b=>a.value.shop_to=b),options:r.value.shop_to_name},null,8,["value","options"])])]),o("tr",null,[_[12]||(_[12]=o("td",{class:"label"},"备注",-1)),o("td",null,[u(oe,{value:a.value.remark,"onUpdate:value":_[4]||(_[4]=b=>a.value.remark=b),type:"textarea",height:"160px"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Oe=["innerHTML"],Ve=X({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,$=Z().state,C=$.langs,S=D(!1);te(()=>f.show,T=>{S.value=T},{deep:!0});const a=()=>{const T=g.Loading();R.Post("erp_order_inout/del?lang="+$.lang,{token:$.token,data:f.data},m=>{T.clear();const{code:w,msg:i}=m.data;g.Toast(i),H("submit",w==0)})},r=()=>{H("update:show",!1)};return(T,m)=>(y(),z(q,{show:S.value,"onUpdate:show":m[1]||(m[1]=w=>S.value=w),title:L.title||h(C).del,width:"360px",bottom:"40px",onClose:m[2]||(m[2]=w=>r())},{bottom:s(()=>[u(P,{effect:"dark",type:"danger",height:"40px",onClick:m[0]||(m[0]=w=>a())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(J,{lineHeight:"60px"},{default:s(()=>[o("span",{innerHTML:h(C).del_warn(L.data.length)},null,8,Oe)]),_:1})]),_:1},8,["show","title"]))}}),Ee=["innerHTML"],Ke=X({__name:"push",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},info:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,$=Z().state,C=$.langs,S=D(!1);te(()=>f.show,T=>{S.value=T},{deep:!0});const a=()=>{const T=g.Loading();R.Post("erp_order_inout/push?lang="+$.lang,{token:$.token,data:f.data},m=>{T.clear();const{code:w,msg:i}=m.data;g.Toast(i),H("submit",w==0)})},r=()=>{H("update:show",!1)};return(T,m)=>(y(),z(q,{show:S.value,"onUpdate:show":m[1]||(m[1]=w=>S.value=w),title:L.title,width:"480px",bottom:"40px",onClose:m[2]||(m[2]=w=>r())},{bottom:s(()=>[u(P,{height:"40px",padding:"0 32px",onClick:m[0]||(m[0]=w=>a())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(Me,null,{default:s(()=>[...m[3]||(m[3]=[k("提醒: 确认后将无法修改",-1)])]),_:1}),u(J,{lineHeight:"60px"},{default:s(()=>[o("div",{class:"tCenter",innerHTML:L.info,style:{"word-wrap":"break-word"}},null,8,Ee)]),_:1})]),_:1},8,["show","title"]))}}),ze=["innerHTML"],Ge=X({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,$=Z().state,C=$.langs,S=D(!1);te(()=>f.show,T=>{S.value=T},{deep:!0});const a=()=>{const T=g.Loading();R.Post("erp_order_inout/export?lang="+$.lang,{token:$.token,data:f.data,order:f.order},m=>{T.clear();const{code:w,msg:i,data:c}=m.data;g.Toast(i),w==0&&fe.Down(c.path+c.filename,c.filename),H("submit",w==0)})},r=()=>{H("update:show",!1)};return(T,m)=>(y(),z(q,{show:S.value,"onUpdate:show":m[1]||(m[1]=w=>S.value=w),title:L.title||h(C).export,width:"360px",bottom:"40px",onClose:m[2]||(m[2]=w=>r())},{bottom:s(()=>[u(P,{height:"40px",padding:"0 32px",onClick:m[0]||(m[0]=w=>a())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(J,{lineHeight:"60px"},{default:s(()=>[o("span",{innerHTML:h(C).export_warn(L.num)},null,8,ze)]),_:1})]),_:1},8,["show","title"]))}}),qe={class:"goods_info flex"},Je={class:"goods_info_tools flex"},Qe={class:"goods_info_total"},Xe={class:"tCenter"},Ze={class:"tCenter"},et={class:"flex_center"},tt={class:"flex_center"},lt={class:"flex_center"},at={key:0,class:"c_success"},st={key:1,class:"c_info"},ot={key:2,class:"c_info"},it=X({__name:"import",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,$=Z().state,C=$.langs,S=D(!1),a=D({key:"",columns:[{title:"序号",slot:"index",width:"40px",minWidth:"40px",textAlign:"center"},{title:"商品编码",index:"sku_id"},{title:"数量",slot:"num",textAlign:"center",width:"80px",minWidth:"80px"},{title:"操作",slot:"action",textAlign:"center",width:"80px",minWidth:"80px"},{title:"查看",slot:"view",textAlign:"center",width:"60px",minWidth:"60px"},{title:"状态",slot:"status",textAlign:"center",width:"80px"}],list:[],num:0});D({show:!1,title:"新增商品",cost_price:"0.00",supply_price:"0.00",sale_price:"0.00",purchase_price:"0.00",supplier_price:"0.00",market_price:"0.00",weight:"0.00",unit:"个",sku_id:"",labels:"",name:"",category:"",properties_value:"",brand:"",short_name:"",i_id:"",owner:"",supplier_name:""});const r=D({show:!1,type:"",title:"移除",info:"",index:0});te(()=>f.show,A=>{S.value=A},{deep:!0});const T=()=>{const A=a.value.key.trim().toUpperCase();if(A.length==0)return;const v=A.split(" ");for(let x of v){if(x=ee.LTrim(x,"0"),w(x)){g.Toast("[ "+x+" ]已存在!");continue}a.value.list.unshift({sku_id:x,num:1})}a.value.key="",i()},m=()=>{fe.Select({mimeType:[]},A=>{fe.FileToBase64(A,v=>{const x=Te(v,{type:"binary"}),j=x.SheetNames[0],F=Ae.sheet_to_json(x.Sheets[j],{raw:!1});if(F.length>3e3)return g.Toast("不能超过3000条");let O="";for(let V of F){if(!V.商品编码||!V.数量){g.Toast("必须存在“商品编码”、“数量”");continue}if(O=ee.LTrim(ee.Trim(V.商品编码).toUpperCase(),"0"),w(O)){g.Toast("[ "+O+" ]已存在!");continue}a.value.list.push({sku_id:O,num:V.数量})}i()},"blob")})},w=A=>{for(let v of a.value.list)if(A==v.sku_id)return!0;return!1},i=()=>{const A=a.value.list;a.value.num=0;for(let v of A)a.value.num+=parseInt(v.num)},c=(A,v=0)=>{if(a.value.list.length==0)return g.Toast("无商品资料!");r.value.show=!0,r.value.type=A,A=="all"?(r.value.title="清空",r.value.info="移除全部资料"):(A="one")&&(r.value.title="移除",r.value.info=a.value.list[v].sku_id,r.value.index=v)},_=()=>{r.value.show=!1,r.value.type=="all"?a.value.list=[]:r.value.type=="one"&&a.value.list.splice(r.value.index,1),i()},b=()=>{if(a.value.list.length<1)return g.Toast("暂无导入数据!");const A=g.Loading();R.Post("erp_order_inout/goods_safety?lang="+$.lang,{token:$.token,type:f.data.type,wms_co_id:f.data.wms_co_id,data:a.value.list},v=>{A.clear();const{code:x,msg:j,data:F}=v.data;x===0?(H("submit",a.value.list),a.value.num=0,a.value.list=[],W()):x===5e3?(g.Toast(j),a.value.list=F||[]):g.Toast(j)})},W=()=>{H("update:show",!1)};return(A,v)=>(y(),U(E,null,[u(q,{show:S.value,"onUpdate:show":v[5]||(v[5]=x=>S.value=x),title:L.title,width:"720px",top:"56px",bottom:"40px",overflow:"hidden auto",onClose:v[6]||(v[6]=x=>W())},{top:s(()=>[o("div",qe,[o("ul",Je,[o("li",null,[u(oe,{value:a.value.key,"onUpdate:value":v[0]||(v[0]=x=>a.value.key=x),onKeyup:v[1]||(v[1]=he(x=>T(),["enter"])),onTextClick:v[2]||(v[2]=x=>m()),text:"选择文件",textColor:"#0064C8",placeholder:"商品编码，多条空格分隔",width:"320px",padding:"0 40px 0 10px"},null,8,["value"])]),o("li",null,[u(P,{type:"danger",effect:"text",padding:"0 4px",onClick:v[3]||(v[3]=x=>c("all"))},{default:s(()=>[...v[9]||(v[9]=[k("清空",-1)])]),_:1})])]),o("div",Qe,[v[10]||(v[10]=k(" 数量: ",-1)),o("b",null,d(a.value.num),1)])])]),bottom:s(()=>[u(P,{height:"40px",padding:"0 32px",onClick:v[4]||(v[4]=x=>b())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(J,{paddingY:"4px"},{default:s(()=>[u(ge,{ref:"tableList",columns:a.value.columns,options:a.value.list,isCheckbox:!1},{index:s(x=>[o("div",Xe,d(x.index+1),1)]),num:s(x=>[o("div",Ze,d(x.num),1)]),action:s(x=>[o("div",et,[u(P,{type:"danger",effect:"text",padding:"0 4px",onClick:j=>c("one",x.index)},{default:s(()=>[k(d(h(C).remove),1)]),_:1},8,["onClick"])])]),view:s(x=>[o("div",tt,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:j=>{h($).goods.show=!0,h($).goods.sku_id=x.sku_id}},{default:s(()=>[k(d(h(C).flow),1)]),_:1},8,["onClick"])])]),status:s(x=>[o("div",lt,[x.status===!0?(y(),U("span",at,"可用")):x.status===!1?(y(),U("span",st,d(x.status_name),1)):(y(),U("span",ot,"-"))])]),_:1},8,["columns","options"])]),_:1})]),_:1},8,["show","title"]),u(q,{show:r.value.show,"onUpdate:show":v[8]||(v[8]=x=>r.value.show=x),title:r.value.title,width:"360px",bottom:"40px",isClose:!0},{bottom:s(()=>[u(P,{effect:"dark",type:"danger",height:"40px",onClick:v[7]||(v[7]=x=>_())},{default:s(()=>[k(d(h(C).confirm),1)]),_:1})]),default:s(()=>[u(J,{lineHeight:"60px"},{default:s(()=>[k(d(r.value.info),1)]),_:1})]),_:1},8,["show","title"])],64))}}),nt={class:"goods_info flex"},ut={class:"goods_info_tools flex"},dt={key:0},rt={key:1},pt={class:"goods_info_total scrollbar",style:{"max-width":"calc(100% - 630px)"}},mt={class:"tCenter"},vt={class:"flex_center"},ct=["onClick"],_t={class:"copy"},ft=["onClick"],gt={class:"tCenter"},ht={class:"tCenter"},xt={class:"tRight"},kt={key:0},wt={key:1},yt={key:1},bt={class:"tRight"},Ct={key:0},$t={key:1},Tt={key:1},At={class:"tCenter"},St={class:"tCenter"},Ut={class:"tCenter"},Dt={key:1},Lt={class:"tCenter"},Pt={class:"tCenter"},Wt={class:"tCenter"},It={class:"tCenter"},Bt={class:"flex_center"},Yt={key:0,class:"c_danger"},Ht={key:1,class:"c_success"},Rt=["title"],Nt={class:"tCenter color1"},Mt=X({__name:"goods",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(L,{emit:N}){const f=L,H=N,I=D(),C=Z().state,S=C.langs,a=we.priceEncode,r=be.isAction,T=D(!1);let m=null,w=[];const i=D({key:"",order:"",columns:[{title:"序号",slot:"index",width:"40px",minWidth:"30px",textAlign:"center"},{title:S.img,slot:"img",width:"60px",textAlign:"center"},{title:"商品编码",slot:"sku_id",index:"sku_id",order:"",width:"150px",minWidth:"150px"},{title:"暗码",slot:"short_name",index:"short_name",order:"",textAlign:"center",width:"80px"},{title:"款式编码",slot:"i_id",index:"i_id",order:"",textAlign:"center",width:"80px"},{title:"商品名称",index:"name",order:"",width:"80px"},{title:"颜色及规格",index:"properties_value",order:""},{title:"标签价(元)",slot:"sale_price",index:"sale_price",order:"",textAlign:"center",width:"100px"},{title:"吊牌价(W)",slot:"market_price",index:"market_price",order:"",textAlign:"center",width:"100px"},{title:"单位",slot:"unit",textAlign:"center",width:"60px"},{title:"重量",slot:"weight",index:"weight",order:"",textAlign:"center",width:"60px"},{title:"数量",slot:"num",index:"num",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"折扣",slot:"ratio",index:"ratio",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"标签",slot:"labels",index:"labels",order:"",textAlign:"center",width:"80px"},{title:"分类",slot:"category",index:"category",order:"",textAlign:"center",width:"80px"},{title:"查看",slot:"view",textAlign:"center",width:"60px",minWidth:"60px"},{title:"操作",slot:"action",textAlign:"center",width:"60px",minWidth:"60px"},{title:"时间",slot:"utime",index:"utime",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"操作员",slot:"operator_name",index:"operator_name",order:"",textAlign:"center",width:"60px",minWidth:"60px"}],list:[],sale_price:0,market_price:0,num:0,print:0,total:0,is_sku:{label:"校对商品",value:"is_sku",checked:!0},remove:{show:!1,type:"",title:"",info:"",data:[]},refresh:!1}),c=D({show:!1,title:"导入"}),_=D(!1),b=D(0),W=D([]);te(()=>f.show,p=>{T.value=p,p&&(i.value.key="",i.value.refresh=!1,j())},{deep:!0});const A=(p,t)=>{i.value.print=p,i.value.total=t},v=p=>{i.value.order=p,j()},x=()=>{const p=ee.LTrim(i.value.key.trim().toUpperCase(),"0");if(i.value.key="",f.data.status==0){if(p.length==0)return;O([{sku_id:p,num:1}])}else j(p)},j=(p="")=>{i.value.list=[],F(!1);const t=g.Loading();R.Post("erp_order_inout/goods_list?lang="+C.lang,{token:C.token,id:f.data.id,order:i.value.order,sku_id:p},e=>{t.clear();const{code:l,msg:n,data:B}=e.data;l==0?(i.value.list=B,ce(),F(!1)):g.Toast(n)})},F=p=>{const t=i.value.list;i.value.sale_price=0,i.value.market_price=0,i.value.num=0;let e=0,l=0;for(let n of t)n.ratio&&(e=parseInt(n.num),l=parseFloat(n.ratio),i.value.sale_price+=parseFloat(n.sale_price)*e*l,i.value.market_price+=parseFloat(n.market_price)*e*l,i.value.num+=e);p&&(i.value.refresh=!0)},O=(p,t="")=>{for(let e of p){const l=V(e.sku_id);if(i.value.is_sku.checked&&l)return g.Toast("[ "+e.sku_id+" ]已存在",5e3,"danger");if(l)for(let n of i.value.list)n.sku_id==e.sku_id&&(n.num+=parseInt(e.num),e.num=n.num,g.Toast("[ "+e.sku_id+" ]数量 "+n.num+" "));else i.value.list.unshift({id:"s"+e.sku_id,sku_id:e.sku_id,num:e.num,loading:0})}t==="import"?le(p):(w.push(p[0]),clearTimeout(m),m=setTimeout(()=>{le(w),w=[]},800))},V=p=>{let t=!1;for(let e of i.value.list)e.sku_id==p&&(t=!0);return t},le=p=>{let t=p;R.Post("erp_order_inout/goods_add?lang="+C.lang,{token:C.token,id:f.data.id,ctime:f.data.ctime,type:f.data.type,wms_co_id:f.data.wms_co_id,shop_id:f.data.shop_id,shop_to:f.data.shop_to,data:p},e=>{const{code:l,msg:n,data:B,err:M}=e.data;if(l===0)Q(B),F(!0);else if(l===5e3){if(g.Toast(n,5e3,"danger"),B&&Q(B),M&&M.length>0){const ae=i.value.list;for(let Ce of M)for(let xe in ae)Ce==ae[xe].sku_id&&(ae[xe].loading=1)}}else n?g.Toast(n):Q(t,!0)},()=>{Q(t,!0)})},Q=(p,t=!1)=>{if(p.length==0)return;const e=i.value.list;for(let l in p)for(let n in e)if(e[n].sku_id==p[l].sku_id){t?e[n].loading=1:e[n]=p[l];continue}},ne=(p,t,e)=>{const l=parseInt(p);if(l.toString()=="NaN")return g.Toast("请输入数字");for(let n of i.value.list)n.sku_id==e&&(n.num=l);R.Post("erp_order_inout/goods_num?lang="+C.lang,{token:C.token,id:t,num:l,sku_id:e,pid:f.data.id,ctime:f.data.ctime,wms_co_id:f.data.wms_co_id},n=>{const{code:B,msg:M}=n.data;B==0?(g.Toast(M),F(!0)):g.Toast(M,5e3,"danger")})},se=(p,t={})=>{if(i.value.remove.type=p,i.value.remove.data=[],p=="one")i.value.remove.show=!0,i.value.remove.title='移除" '+t.sku_id+' "',i.value.remove.info="是否移除单条数据?",i.value.remove.data=[{index:t.index,id:t.id,sku_id:t.sku_id,num:t.num}];else if(p=="part"){const e=I.value.getData();if(e.length==0)return g.Toast("请选择数据");i.value.remove.show=!0,i.value.remove.title="移除选中",i.value.remove.info="是否移除选中数据?";for(let l of e)i.value.remove.data.unshift({index:l.index,id:l.id,sku_id:l.sku_id,num:l.num})}},ue=()=>{i.value.remove.show=!1;const p=i.value.remove.data,t=i.value.list;let e=[];for(let n of p){if(n.id.toString().substring(0,1)=="s"){t.splice(n.index,1),F(!0);continue}e.push({index:n.index,id:n.id,sku_id:n.sku_id,num:n.num})}if(e.length==0)return;const l=g.Loading();R.Post("erp_order_inout/goods_remove?lang="+C.lang,{token:C.token,id:f.data.id,ctime:f.data.ctime,wms_co_id:f.data.wms_co_id,data:e},n=>{l.clear();const{code:B,msg:M}=n.data;if(B==0){if(i.value.remove.type=="all")i.value.list=[];else for(let ae of e)t.splice(ae.index,1);F(!0)}else g.Toast(M,5e3,"danger")})},de=()=>{c.value.show=!0,c.value.title="导入"},re=p=>{p.length<1||O(p,"import")},pe=p=>{let t=[],e=0;for(let l of i.value.list)l.img&&(l.img==p&&(b.value=e),t.push({label:l.sku_id,value:l.img,other:{颜色及规格:l.properties_value,标签价:l.sale_price+"元",吊牌价:l.market_price+"W"}}),e++);_.value=!0,W.value=t},me=(p,t)=>{const e=I.value.getData();let l="";for(let n in e)l+=e[n][p]+" ";l?ee.CopyText(l):ee.CopyText(t)},ve=()=>{if(i.value.print<=0)return g.Toast("请选择!");const p=I.value.getData();let t=[];for(let e of p)t.push({sku_id:e.sku_id});if(t.length==0)return g.Toast("请选择!");C.print.sku=t,C.print.show=!0},ce=()=>{ie(()=>{I.value.checkboxAll(!1)})},_e=()=>{for(let p of i.value.list)if(p.loading==0||p.loading==1)return g.Toast("["+p.sku_id+"]未加载完成!");if(i.value.refresh){const p=g.Loading();R.Post("erp_order_inout/goods_price?lang="+C.lang,{token:C.token,id:f.data.id,ctime:f.data.ctime},t=>{p.clear();const{code:e,msg:l}=t.data;e!==0&&g.Toast(l,5e3,"danger"),H("update:show",!1),H("submit",i.value.refresh)})}else H("update:show",!1),H("submit",i.value.refresh)};return(p,t)=>(y(),U(E,null,[u(q,{show:T.value,"onUpdate:show":t[6]||(t[6]=e=>T.value=e),title:L.title,width:"calc(100% - 40px)",maxWidth:"1600px",top:"56px",bottom:"0px",overflow:"auto",bgClose:!1,onClose:t[7]||(t[7]=e=>_e())},{top:s(()=>[o("div",nt,[o("ul",ut,[o("li",null,[u(oe,{value:i.value.key,"onUpdate:value":t[0]||(t[0]=e=>i.value.key=e),onKeyup:t[1]||(t[1]=he(e=>x(),["enter"])),onIconClick:t[2]||(t[2]=e=>x()),placeholder:h(C).langs.sku_id,maxlength:"32",icon:"ui ui_search",iconAlign:"right",padding:"0 40px 0 10px"},null,8,["value","placeholder"])]),L.data.status==0?(y(),U(E,{key:0},[o("li",null,[u(Ue,{options:i.value.is_sku},null,8,["options"])]),h(r)("save")?(y(),U("li",dt,[u(P,{type:"danger",effect:"text",padding:"0 4px",onClick:t[3]||(t[3]=e=>se("part"))},{default:s(()=>[...t[13]||(t[13]=[k("移除",-1)])]),_:1})])):G("",!0),t[15]||(t[15]=o("li",null,"|",-1)),h(r)("goods_imp")?(y(),U("li",rt,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:t[4]||(t[4]=e=>de())},{default:s(()=>[...t[14]||(t[14]=[k("导入",-1)])]),_:1})])):G("",!0),t[16]||(t[16]=o("li",null,"|",-1))],64)):G("",!0),o("li",null,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:t[5]||(t[5]=e=>ve())},{default:s(()=>[k("打印标签("+d(i.value.print)+")",1)]),_:1})])]),o("div",pt,[t[17]||(t[17]=k(" 标签价: ",-1)),o("b",null,d(h(a)(i.value.sale_price)),1),t[18]||(t[18]=k(" 元   吊牌价: ",-1)),o("b",null,d(h(a)(i.value.market_price)),1),t[19]||(t[19]=k(" W   数量: ",-1)),o("b",null,d(i.value.num),1)])])]),default:s(()=>[u(J,{paddingY:"4px"},{default:s(()=>[u(ge,{ref_key:"tableList",ref:I,columns:i.value.columns,options:i.value.list,onOrderBy:v,onPartially:A,maxLen:100},{index:s(e=>[o("div",mt,d(i.value.list.length-e.index),1)]),img:s(e=>[o("div",vt,[o("span",{onClick:l=>e.img?pe(e.img):""},[u(Fe,{img:e.img?e.img+"&x-oss-process=image/resize,h_40":"",isView:!1},null,8,["img"])],8,ct)])]),sku_id:s(e=>[o("div",_t,[o("b",null,d(e.sku_id),1),o("span",{onClick:l=>me("sku_id",e.sku_id)},"复",8,ft)])]),short_name:s(e=>[o("div",gt,d(e.short_name||"-"),1)]),i_id:s(e=>[o("div",ht,d(e.i_id||"-"),1)]),sale_price:s(e=>[o("div",xt,[e.sale_price>0?(y(),U(E,{key:0},[e.ratio!="1.00"?(y(),U("span",kt,[o("del",null,d(h(a)(e.sale_price)),1),t[20]||(t[20]=k()),o("b",null,d(h(a)(e.sale_price*e.ratio)),1)])):(y(),U("b",wt,d(h(a)(e.sale_price)),1))],64)):(y(),U("span",yt,"-"))])]),market_price:s(e=>[o("div",bt,[e.market_price>0?(y(),U(E,{key:0},[e.ratio!="1.00"?(y(),U("span",Ct,[o("del",null,d(h(a)(e.market_price)),1),t[21]||(t[21]=k()),o("b",null,d(h(a)(e.market_price*e.ratio)),1)])):(y(),U("b",$t,d(h(a)(e.market_price)),1))],64)):(y(),U("span",Tt,"-"))])]),unit:s(e=>[o("div",At,d(e.unit||"-"),1)]),weight:s(e=>[o("div",St,d(e.weight||"-"),1)]),num:s(e=>[o("div",Ut,[L.data.status==0&&e.loading!=0?(y(),z(oe,{key:0,value:e.num,"onUpdate:value":l=>e.num=l,"onUpdate:blur":l=>ne(l,e.id,e.sku_id),inputAlign:"center"},null,8,["value","onUpdate:value","onUpdate:blur"])):(y(),U("span",Dt,[o("b",null,d(e.num||"-"),1)]))])]),ratio:s(e=>[o("div",Lt,d(e.ratio||"-"),1)]),labels:s(e=>[o("div",Pt,d(e.labels||"-"),1)]),category:s(e=>[o("div",Wt,d(e.category||"-"),1)]),view:s(e=>[o("div",It,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:l=>{h(C).goods.show=!0,h(C).goods.sku_id=e.sku_id}},{default:s(()=>[k(d(h(S).flow),1)]),_:1},8,["onClick"])])]),action:s(e=>[o("div",Bt,[L.data.status==0?(y(),U(E,{key:0},[e.loading==0?(y(),z(P,{key:0,type:"warning",effect:"text",padding:"0 4px"},{default:s(()=>[...t[22]||(t[22]=[k("加载中",-1)])]),_:1})):e.loading==1?(y(),z(P,{key:1,type:"success",effect:"text",padding:"0 4px",onClick:l=>le([{id:e.id,sku_id:e.sku_id,num:e.num}])},{default:s(()=>[...t[23]||(t[23]=[k("刷新",-1)])]),_:1},8,["onClick"])):G("",!0),e.loading!=0?(y(),z(P,{key:2,type:"danger",effect:"text",padding:"0 4px",onClick:l=>se("one",e)},{default:s(()=>[...t[24]||(t[24]=[k("移除",-1)])]),_:1},8,["onClick"])):G("",!0)],64)):(y(),U(E,{key:1},[e.status==0?(y(),U("span",Yt,"待确认")):e.status==1?(y(),U("span",Ht,"完成")):G("",!0)],64))])]),utime:s(e=>[o("div",{class:"tCenter color1",title:"创建: "+e.ctime+`
更新: `+e.utime},d(e.ctime?e.ctime.substr(11,8):"-"),9,Rt)]),operator_name:s(e=>[o("div",Nt,d(e.operator_name||"-"),1)]),_:1},8,["columns","options"])]),_:1})]),_:1},8,["show","title"]),u(q,{show:i.value.remove.show,"onUpdate:show":t[9]||(t[9]=e=>i.value.remove.show=e),title:i.value.remove.title,width:"360px",bottom:"40px",isClose:!0},{bottom:s(()=>[u(P,{effect:"dark",type:"danger",height:"40px",onClick:t[8]||(t[8]=e=>ue())},{default:s(()=>[k(d(h(S).confirm),1)]),_:1})]),default:s(()=>[u(J,{lineHeight:"60px"},{default:s(()=>[k(d(i.value.remove.info),1)]),_:1})]),_:1},8,["show","title"]),u(it,{show:c.value.show,"onUpdate:show":t[10]||(t[10]=e=>c.value.show=e),title:c.value.title,data:{type:f.data.type,wms_co_id:f.data.wms_co_id},onSubmit:t[11]||(t[11]=e=>re(e))},null,8,["show","title","data"]),u(Se,{show:_.value,"onUpdate:show":t[12]||(t[12]=e=>_.value=e),index:b.value,options:W.value},null,8,["show","index","options"])],64))}}),Ft=ye(Mt,[["__scopeId","data-v-47eb1837"]]),jt={class:"app_action flex"},Ot={class:"app_action_tools scrollbar"},Vt={key:0,class:"line"},Et={key:0,class:"line"},Kt={class:"app_action_search flex"},zt={class:"custom_time flex_center"},Gt=["onClick"],qt={class:"app_ct"},Jt={class:"tCenter"},Qt={class:"tCenter"},Xt={class:"tCenter"},Zt={class:"tRight"},el={class:"tRight"},tl={class:"tCenter"},ll={class:"tCenter"},al={key:0,class:"flex_center status0"},sl={key:1,class:"flex_center status1"},ol={key:2,class:"tCenter"},il={class:"tCenter"},nl={key:1,class:"c_info"},ul={class:"tCenter"},dl={class:"tCenter"},rl={class:"app_page"},pl=X({__name:"index",setup(L){const N=D(!1),f=D(),I=Z().state,$=I.langs,C=be.isAction,S=we.priceEncode,a=D({show:!1,key:"",placeholder:"ID、操作员、备注",time:[Y.Date("Y/m/d",Y.StrToTime("-1 month")),Y.Date("Y/m/d")],maxDate:Y.Date("Y/m/d"),customTime:{active:"",list:[{label:"今天",value:"today"},{label:"昨天",value:"yesterday"},{label:"3个月",value:"month"},{label:"近1年",value:"year"}]},columns:[{label:"",value:"",slot:"customTime"},{label:$.select,value:"",slot:"time"},{label:"仓库名称",value:"",slot:"wms_co_id"},{label:"类型",value:"",slot:"type"},{label:"店铺名称",value:"",slot:"shop_id"},{label:"买断店铺",value:"",slot:"shop_to"},{label:"状态",value:"",slot:"status"},{label:"单号, 多条空格分离",value:"",name:"id"},{label:"商品编码, 多条空格分离",value:"",name:"sku_id"},{label:"制单员",value:"",name:"creater_name"},{label:"操作员",value:"",name:"operator_name"},{label:"备注",value:"",name:"remark"}],type:"",shop_id:"",shop_to:"",wms_co_id:"",status:""}),r=D({time:"",list:{sale_price_out:0,market_price_out:0,out_num:0,sale_price_in:0,market_price_in:0,in_num:0}}),T=D({columns:[{title:"单号",index:"id",slot:"id",textAlign:"center",width:"100px"},{title:$.date,index:"date",slot:"date",textAlign:"center",width:"90px"},{title:"仓库",index:"wms_co_name",width:"200px"},{title:"类型",slot:"type",textAlign:"center",width:"60px",minWidth:"60px"},{title:"店铺名称",index:"shop_name",width:"200px"},{title:"买断店铺",index:"shop_to_name",width:"200px"},{title:"标签总额(元)",slot:"sale_price",textAlign:"center",width:"100px"},{title:"吊牌总额(W)",slot:"market_price",textAlign:"center",width:"100px"},{title:"数量",slot:"num",textAlign:"center",width:"60px"},{title:"条数",slot:"total",textAlign:"center",width:"60px"},{title:"状态",slot:"status",width:"80px",minWidth:"80px",textAlign:"center"},{title:$.action,slot:"action",textAlign:"center",width:"40px"},{title:"商品",slot:"goods",textAlign:"center",width:"40px"},{title:$.review,slot:"print",textAlign:"center",width:"40px"},{title:"制单员",index:"creator_name",textAlign:"center",width:"100px"},{title:"操作员",index:"operator_name",textAlign:"center",width:"100px"},{title:"备注",index:"remark"}],data:[],num:0,total:0,order:""}),m=D({total:0,num:1,limit:100}),w=D({show:!1,title:"添加/编辑",data:{}}),i=D({show:!1,title:"删除",data:[]}),c=D({show:!1,title:"确认生效",info:"",num:0,data:[]}),_=D({show:!1,title:"导出",num:0,data:[]}),b=D({show:!1,title:"商品",data:{}}),W=D({show:!1,title:"其他出入库",info:{},columns:[],data:[]}),A=D({type_name:[],shop_name:[],shop_to_name:[],partner_name:[],status_name:[]});De(()=>{I.token&&p()}),Le(()=>{N&&I.isLogin&&v()});const v=()=>{a.value.show=!1,T.value.data=[];const t=g.Loading();R.Post("erp_order_inout/list?lang="+I.lang,{token:I.token,data:x(),page:m.value.num,limit:m.value.limit,order:T.value.order},e=>{t.clear();const{code:l,msg:n,data:B,time:M}=e.data;l==0?(r.value.time=M,T.value.data=B,ie(()=>V())):g.Toast(n)}),m.value.total=0,r.value.list.sale_price_out=0,r.value.list.market_price_out=0,r.value.list.out_num=0,r.value.list.sale_price_in=0,r.value.list.market_price_in=0,r.value.list.in_num=0,R.Post("erp_order_inout/total?lang="+I.lang,{token:I.token,data:x()},e=>{const{code:l,msg:n,data:B,time:M}=e.data;l==0?(r.value.time=M,m.value.total=B.total,r.value.list.sale_price_out=B.sale_price_out,r.value.list.market_price_out=B.market_price_out,r.value.list.out_num=B.out_num,r.value.list.sale_price_in=B.sale_price_in,r.value.list.market_price_in=B.market_price_in,r.value.list.in_num=B.in_num):g.Toast(n)})},x=()=>{const t={key:a.value.key,stime:typeof a.value.time[0]=="string"?a.value.time[0]:Y.Date("Y/m/d",a.value.time[0]),etime:typeof a.value.time[1]=="string"?a.value.time[1]:Y.Date("Y/m/d",a.value.time[1]),type:a.value.type,shop_id:a.value.shop_id,shop_to:a.value.shop_to,wms_co_id:a.value.wms_co_id,status:a.value.status};for(let e of a.value.columns)e.name&&(t[e.name]=e.value);return t},j=(t,e)=>{T.value.num=t,T.value.total=e;const l=f.value.getData();i.value.data=[],c.value.data=[],c.value.num=0,_.value.data=[],_.value.num=0;for(let n of l)n.status==0&&(i.value.data.push(n.id),c.value.data.push(n.id),c.value.num+=parseInt(n.num)),_.value.data.push(n.id),_.value.num+=parseInt(n.num)},F=t=>{T.value.order=t,v()},O=()=>{a.value.time=[Y.Date("Y/m/d",Y.StrToTime("-1 month")),Y.Date("Y/m/d")],a.value.customTime.active="",a.value.key="",a.value.type="",a.value.shop_id="",a.value.shop_to="",a.value.wms_co_id="",a.value.status="";for(let t of a.value.columns)t.value="";T.value.order="",m.value.num=1,v()},V=()=>{ie(()=>{f.value.checkboxAll(!1)})},le=t=>{switch(a.value.customTime.active=t,t){case"today":a.value.time=[Y.Date("Y/m/d"),Y.Date("Y/m/d")];break;case"yesterday":a.value.time=[Y.Date("Y/m/d",Y.StrToTime("-1 day")),Y.Date("Y/m/d",Y.StrToTime("-1 day"))];break;case"month":a.value.time=[Y.Date("Y/m/d",Y.StrToTime("-3 month")),Y.Date("Y/m/d")];break;case"year":a.value.time=[Y.Date("Y/m/d",Y.StrToTime("-1 year")),Y.Date("Y/m/d")];break}},Q=(t,e={})=>{w.value.show=!0,w.value.data=e,w.value.data.tp=t,t=="add"?w.value.title=$.add:t=="edit"&&(w.value.title=$.edit+"( "+e.id+" )",w.value.data.id=e.id)},ne=t=>{t&&(w.value.show=!1,v())},se=()=>{i.value.show=!0;const t=f.value.getData();let e=[];for(let l of t)e.push(l.id);i.value.data=e},ue=t=>{t&&(i.value.show=!1,v())},de=()=>{c.value.show=!0,c.value.info="单号:[ <b>"+c.value.data.join(",")+"</b> ]&nbsp;&nbsp;&nbsp;&nbsp;数量: <b>"+c.value.num+"</b>"},re=t=>{t&&(c.value.show=!1,v())},pe=()=>{_.value.show=!0},me=t=>{t&&(_.value.show=!1,V())},ve=t=>{b.value.show=!0,b.value.title=t.type_name+" > "+t.wms_co_name+"( "+t.id+" )",b.value.data.id=t.id,b.value.data.type=t.type,b.value.data.ctime=t.ctime,b.value.data.utime=t.utime,b.value.data.wms_co_id=t.wms_co_id,b.value.data.shop_id=t.shop_id,b.value.data.shop_to=t.shop_to,b.value.data.status=t.status},ce=t=>{t&&(b.value.show=!1,v())},_e=t=>{W.value.show=!0,W.value.info={title:"[其它"+(t.type==0?"出":"入")+"] "+t.wms_co_name,id:t.id,sale_price:t.sale_price,market_price:t.market_price,shop_name:t.shop_name,shop_to_name:t.shop_to_name,num:t.num,ctime:t.ctime,utime:t.utime,creater_name:t.creator_name,operator_name:t.operator_name,remark:t.remark},W.value.columns=[{label:"商品编码",value:"sku_id",checked:!0,textAlign:"center"},{label:"商品名称",value:"name",checked:!0,textAlign:"center"},{label:"颜色及规格",value:"properties_value",checked:!0},{label:"标签金额(元)",value:"sale_price",checked:!0,price:!0,textAlign:"right"},{label:"吊牌金额(W)",value:"market_price",checked:!0,price:!0,textAlign:"right"},{label:"数量",value:"num",checked:!0,textAlign:"center"},{label:"折扣",value:"ratio",checked:!0,textAlign:"center"},{label:"单位",value:"unit",checked:!0,textAlign:"center"},{label:"重量",value:"weight",checked:!0,textAlign:"center"},{label:"标签",value:"labels",checked:!1,textAlign:"center"},{label:"商品分类",value:"category",checked:!1,textAlign:"center"},{label:"品牌",value:"brand",checked:!0,textAlign:"center"},{label:"采购员",value:"owner",checked:!0,textAlign:"center"},{label:"制单员",value:"operator_name",checked:!0,textAlign:"center"},{label:"创建时间",value:"ctime",checked:!0,textAlign:"center"},{label:"更新时间",value:"ctime",checked:!1,textAlign:"center"}];const e=g.Loading();R.Post("erp_order_inout/goods_list?lang="+I.lang,{token:I.token,id:t.id,ctime:t.ctime,utime:t.utime,wms_co_id:t.wms_co_id},l=>{e.clear();const{code:n,msg:B,data:M}=l.data;n==0?W.value.data=M:g.Toast(B)})},p=()=>{R.Post("erp_order_inout/get_select?lang="+I.lang,{token:I.token},t=>{const{code:e,msg:l,data:n}=t.data;e==0?(A.value.type_name=n.type_name,A.value.shop_name=n.shop_name,A.value.shop_to_name=n.shop_to_name,A.value.partner_name=n.partner_name,A.value.status_name=n.status_name,N.value=!0):g.Toast(l)})};return(t,e)=>(y(),U(E,null,[u(Re,{time:r.value.time,onRefresh:e[0]||(e[0]=l=>v())},{default:s(()=>[e[32]||(e[32]=k(" 销售总额: ",-1)),o("b",null,d(h(S)(r.value.list.sale_price_out)),1),e[33]||(e[33]=k(" 元/ ",-1)),o("b",null,d(h(S)(r.value.list.market_price_out)),1),e[34]||(e[34]=k(" W/ ",-1)),o("b",null,d(r.value.list.out_num),1),e[35]||(e[35]=k(" 件   退货总额: ",-1)),o("b",null,d(h(S)(r.value.list.sale_price_in)),1),e[36]||(e[36]=k(" 元/ ",-1)),o("b",null,d(h(S)(r.value.list.market_price_in)),1),e[37]||(e[37]=k(" W/ ",-1)),o("b",null,d(r.value.list.in_num),1),e[38]||(e[38]=k(" 件   ",-1))]),_:1},8,["time"]),o("div",jt,[o("div",Ot,[u(Be,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line1"},{action:"push",slot:"push",is_action:!0},{action:"line",slot:"line2"},{action:"export",slot:"export",is_action:!0}]},{add:s(()=>[u(P,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:e[1]||(e[1]=l=>Q("add"))},{default:s(()=>[k(d(h($).add),1)]),_:1})]),del:s(()=>[u(P,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:i.value.data.length==0,onClick:e[2]||(e[2]=l=>se())},{default:s(()=>[k(d(h($).del)+"("+d(i.value.data.length)+")",1)]),_:1},8,["disabled"])]),line1:s(()=>[h(C)("save")?(y(),U("span",Vt,"|")):G("",!0)]),push:s(()=>[u(P,{effect:"plain",type:"primary",icon:"ui ui_safety",padding:"0 16px 0 8px",disabled:c.value.data.length==0,onClick:e[3]||(e[3]=l=>de())},{default:s(()=>[k(d(c.value.title)+"("+d(c.value.data.length)+")",1)]),_:1},8,["disabled"])]),line2:s(()=>[h(C)("push")?(y(),U("span",Et,"|")):G("",!0)]),export:s(()=>[u(P,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:_.value.data.length==0,onClick:e[4]||(e[4]=l=>pe())},{default:s(()=>[k(d(h($).export)+"("+d(_.value.num)+")",1)]),_:1},8,["disabled"])]),_:1})]),o("div",Kt,[u(Ye,{show:a.value.show,"onUpdate:show":e[11]||(e[11]=l=>a.value.show=l),keys:a.value.key,"onUpdate:keys":e[12]||(e[12]=l=>a.value.key=l),columns:a.value.columns,placeholder:a.value.placeholder,onKeyup:e[13]||(e[13]=he(l=>{m.value.num=1,v()},["enter"])),onSearch:e[14]||(e[14]=l=>{m.value.num=1,v()}),onReset:e[15]||(e[15]=l=>O())},{customTime:s(l=>[o("ul",zt,[(y(!0),U(E,null,We(a.value.customTime.list,n=>(y(),U("li",{key:n.value,onClick:B=>le(n.value),class:ke({active:a.value.customTime.active===n.value})},d(n.label),11,Gt))),128))])]),time:s(l=>[u(Pe,{value:a.value.time,"onUpdate:value":e[5]||(e[5]=n=>a.value.time=n),range:"",maxDate:a.value.maxDate,placeholder:l.label},null,8,["value","maxDate","placeholder"])]),wms_co_id:s(l=>[u(K,{value:a.value.wms_co_id,"onUpdate:value":e[6]||(e[6]=n=>a.value.wms_co_id=n),options:A.value.partner_name,placeholder:l.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),type:s(l=>[u(K,{value:a.value.type,"onUpdate:value":e[7]||(e[7]=n=>a.value.type=n),options:A.value.type_name,placeholder:l.label,clearable:""},null,8,["value","options","placeholder"])]),shop_id:s(l=>[u(K,{value:a.value.shop_id,"onUpdate:value":e[8]||(e[8]=n=>a.value.shop_id=n),options:A.value.shop_name,placeholder:l.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),shop_to:s(l=>[u(K,{value:a.value.shop_to,"onUpdate:value":e[9]||(e[9]=n=>a.value.shop_to=n),options:A.value.shop_to_name,placeholder:l.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),status:s(l=>[u(K,{value:a.value.status,"onUpdate:value":e[10]||(e[10]=n=>a.value.status=n),options:A.value.status_name,placeholder:l.label,clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns","placeholder"])])]),o("div",qt,[u(ge,{ref_key:"tableList",ref:f,overflow:"auto",columns:T.value.columns,options:T.value.data,onOrderBy:F,onPartially:j},{id:s(l=>[o("div",Jt,d(l.id),1)]),date:s(l=>[o("div",Qt,[u(Ie,{title:"创建: "+l.ctime+`
更新: `+l.utime+`
制单: `+l.creater_name+", 审核: "+l.operator_name+`
备注: `+l.remark},{default:s(()=>[k(d(l.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),type:s(l=>[o("div",Xt,[o("span",{class:ke(l.type==0?"c_success":"c_danger")},d(l.type_name),3)])]),sale_price:s(l=>[o("div",Zt,d(l.sale_price>0?h(S)(l.sale_price):"-"),1)]),market_price:s(l=>[o("div",el,d(l.market_price>0?h(S)(l.market_price):"-"),1)]),num:s(l=>[o("div",tl,d(l.num||"-"),1)]),total:s(l=>[o("div",ll,d(l.total||"-"),1)]),status:s(l=>[l.status=="0"?(y(),U("div",al,d(l.status_name),1)):l.status=="1"?(y(),U("div",sl,d(l.status_name),1)):(y(),U("div",ol,d(l.status_name),1))]),action:s(l=>[o("div",il,[h(C)("save")&&l.status=="0"?(y(),z(P,{key:0,onClick:n=>Q("edit",l)},{default:s(()=>[k(d(h($).edit),1)]),_:1},8,["onClick"])):(y(),U("span",nl,[...e[39]||(e[39]=[o("i",{class:"ui ui_safety"},null,-1)])]))])]),goods:s(l=>[o("div",ul,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:n=>ve(l)},{default:s(()=>[...e[40]||(e[40]=[k("商品",-1)])]),_:1},8,["onClick"])])]),print:s(l=>[o("div",dl,[u(P,{type:"primary",effect:"text",padding:"0 4px",onClick:n=>_e(l),disabled:l.num==0},{default:s(()=>[k(d(h($).print),1)]),_:1},8,["onClick","disabled"])])]),_:1},8,["columns","options"])]),o("div",rl,[u(He,{total:m.value.total,"onUpdate:total":e[16]||(e[16]=l=>m.value.total=l),page:m.value.num,"onUpdate:page":[e[17]||(e[17]=l=>m.value.num=l),e[18]||(e[18]=l=>v())],limit:m.value.limit,"onUpdate:limit":[e[19]||(e[19]=l=>m.value.limit=l),e[20]||(e[20]=l=>{m.value.num=1,v()})]},null,8,["total","page","limit"])]),u(je,{show:w.value.show,"onUpdate:show":e[21]||(e[21]=l=>w.value.show=l),title:w.value.title,data:w.value.data,onSubmit:e[22]||(e[22]=l=>ne(l))},null,8,["show","title","data"]),u(Ve,{show:i.value.show,"onUpdate:show":e[23]||(e[23]=l=>i.value.show=l),data:i.value.data,onSubmit:e[24]||(e[24]=l=>ue(l))},null,8,["show","data"]),u(Ke,{show:c.value.show,"onUpdate:show":e[25]||(e[25]=l=>c.value.show=l),title:c.value.title,info:c.value.info,data:c.value.data,onSubmit:e[26]||(e[26]=l=>re(l))},null,8,["show","title","info","data"]),u(Ge,{show:_.value.show,"onUpdate:show":e[27]||(e[27]=l=>_.value.show=l),data:_.value.data,num:_.value.num,onSubmit:e[28]||(e[28]=l=>me(l))},null,8,["show","data","num"]),u(Ft,{show:b.value.show,"onUpdate:show":e[29]||(e[29]=l=>b.value.show=l),title:b.value.title,data:b.value.data,onSubmit:e[30]||(e[30]=l=>ce(l))},null,8,["show","title","data"]),u(Ne,{show:W.value.show,"onUpdate:show":e[31]||(e[31]=l=>W.value.show=l),title:W.value.title,info:W.value.info,columns:W.value.columns,data:W.value.data},null,8,["show","title","info","columns","data"])],64))}}),xl=ye(pl,[["__scopeId","data-v-ca9be6fc"]]);export{xl as default};
