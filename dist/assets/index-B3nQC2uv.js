import{d as M,u as Y,r as h,w as F,c as W,a as i,e as O,f as r,h as Z,i as o,t as x,b as f,j,k as V,l as U,m as L,U as $,R as B,o as A,_ as q,F as tt,T as S,y as et,z as at,n as K,C as lt,s as st,D as ot,x as nt}from"./index-uEPes30C.js";import{w as it,a as ut,f as dt,b as rt,c as mt,d as vt,e as pt,P as ft}from"./index-DIBbAQfp.js";import{w as wt}from"./Total-PtX-cz6l.js";const ct={class:"label"},xt={class:"label"},gt={class:"label"},bt={class:"label"},ht={class:"label"},yt=M({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:[]}},emits:["update:show","submit"],setup(_,{emit:C}){const m=_,T=C,l=Y().state,p=l.langs,n=h(!1),k=h("base"),c=h([{label:p.info,value:"base",slot:"base"},{label:p.content,value:"content",slot:"content"}]),e=h({id:0,status:!0,type:[],title:"",name:"",remark:"",content:""}),s=h([{label:"PC版",value:0},{label:"手机版",value:1}]);F(()=>m.show,b=>{n.value=b,b&&(e.value.id=m.data.id||0,e.value.status=typeof m.data.status<"u"?m.data.status:!0,e.value.type=typeof m.data.type<"u"?[parseInt(m.data.type)]:[],e.value.title=m.data.title||"",e.value.name=m.data.name||"",e.value.remark=m.data.remark||"",e.value.content=m.data.content||"")});const v=b=>b.title.length<2||b.title.length>32?$.Toast(p.web_html_verify_title):b.name.length<2||b.name.length>16?$.Toast(p.web_html_verify_name):b,y=()=>{const b=v(e.value);if(!b)return;const d=$.Loading();B.Post("web_html/save?lang="+l.lang,{token:l.token,data:b},w=>{d.clear();const{code:I,msg:P}=w.data;$.Toast(P),T("submit",I==0)})},g=()=>{T("update:show",!1)};return(b,d)=>(A(),W(O,{show:n.value,"onUpdate:show":d[7]||(d[7]=w=>n.value=w),title:_.title,width:"800px",bottom:"40px",overflow:k.value=="perm"?"hidden auto":"hidden",onClose:d[8]||(d[8]=w=>g())},{bottom:i(()=>[r(L,{height:"40px",padding:"0 32px",onClick:d[6]||(d[6]=w=>y())},{default:i(()=>[U(x(f(p).confirm),1)]),_:1})]),default:i(()=>[r(V,{paddingY:"0"},{default:i(()=>[r(it,{value:k.value,"onUpdate:value":d[5]||(d[5]=w=>k.value=w),columns:c.value},{base:i(()=>[r(Z,null,{default:i(()=>[o("tr",null,[o("td",ct,x(f(p).status),1),o("td",null,[r(ut,{value:e.value.status,"onUpdate:value":d[0]||(d[0]=w=>e.value.status=w)},null,8,["value"])])]),o("tr",null,[o("td",xt,x(f(p).web_html_type),1),o("td",null,[r(dt,{value:e.value.type,"onUpdate:value":d[1]||(d[1]=w=>e.value.type=w),options:s.value},null,8,["value","options"])])]),o("tr",null,[o("td",gt,x(f(p).web_html_title),1),o("td",null,[r(j,{value:e.value.title,"onUpdate:value":d[2]||(d[2]=w=>e.value.title=w),maxlength:"32"},null,8,["value"])])]),o("tr",null,[o("td",bt,x(f(p).web_html_name),1),o("td",null,[r(j,{value:e.value.name,"onUpdate:value":d[3]||(d[3]=w=>e.value.name=w),maxlength:"16"},null,8,["value"])])]),o("tr",null,[o("td",ht,x(f(p).remark),1),o("td",null,[r(j,{value:e.value.remark,"onUpdate:value":d[4]||(d[4]=w=>e.value.remark=w),type:"textarea",height:"120px",maxlength:"32"},null,8,["value"])])])]),_:1})]),content:i(()=>d[9]||(d[9]=[])),_:1},8,["value","columns"])]),_:1})]),_:1},8,["show","title","overflow"]))}}),_t=q(yt,[["__scopeId","data-v-4d41e608"]]),kt=["innerHTML"],$t=M({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(_,{emit:C}){const m=_,T=C,l=Y().state,p=l.langs,n=h(!1);F(()=>m.show,e=>{n.value=e},{deep:!0});const k=()=>{const e=$.Loading();B.Post("web_html/del?lang="+l.lang,{token:l.token,data:m.data},s=>{e.clear();const{code:v,msg:y}=s.data;$.Toast(y),T("submit",v==0)})},c=()=>{T("update:show",!1)};return(e,s)=>(A(),W(O,{show:n.value,"onUpdate:show":s[1]||(s[1]=v=>n.value=v),title:_.title||f(p).del,width:"360px",bottom:"40px",onClose:s[2]||(s[2]=v=>c())},{bottom:i(()=>[r(L,{effect:"dark",type:"danger",height:"40px",onClick:s[0]||(s[0]=v=>k())},{default:i(()=>[U(x(f(p).confirm),1)]),_:1})]),default:i(()=>[r(V,{lineHeight:"60px"},{default:i(()=>[o("span",{innerHTML:f(p).del_warn(_.data.length)},null,8,kt)]),_:1})]),_:1},8,["show","title"]))}}),Tt=["innerHTML"],St=M({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(_,{emit:C}){const m=_,T=C,l=Y().state,p=l.langs,n=h(!1);F(()=>m.show,e=>{n.value=e},{deep:!0});const k=()=>{const e=$.Loading();B.Post("web_html/export?lang="+l.lang,{token:l.token,data:m.data,order:m.order},s=>{e.clear();const{code:v,msg:y,data:g}=s.data;$.Toast(y),v==0&&tt.Down(g.path+g.filename,g.filename),T("submit",v==0)})},c=()=>{T("update:show",!1)};return(e,s)=>(A(),W(O,{show:n.value,"onUpdate:show":s[1]||(s[1]=v=>n.value=v),title:_.title||f(p).export,width:"360px",bottom:"40px",onClose:s[2]||(s[2]=v=>c())},{bottom:i(()=>[r(L,{height:"40px",padding:"0 32px",onClick:s[0]||(s[0]=v=>k())},{default:i(()=>[U(x(f(p).confirm),1)]),_:1})]),default:i(()=>[r(V,{lineHeight:"60px"},{default:i(()=>[o("span",{innerHTML:f(p).export_warn(_.num)},null,8,Tt)]),_:1})]),_:1},8,["show","title"]))}}),Ct=["innerHTML"],Dt={class:"app_action flex"},Ut={class:"app_action_tools scrollbar"},Lt={class:"app_action_search flex"},At={class:"app_ct"},Bt={class:"tCenter"},Pt={class:"tCenter"},Ht={class:"tCenter"},Mt={key:1,class:"c_info"},Yt={class:"tCenter"},Wt={class:"app_page"},It=M({__name:"index",setup(_){const C=h(!1),m=h(),D=Y().state,l=D.langs,p=ft.isAction,n=h({show:!1,key:"",placeholder:"名称、备注",time:[S.Date("Y/m/d",S.StrToTime("-3 year")),S.Date("Y/m/d")],maxDate:S.Date("Y/m/d"),columns:[{label:l.web_html_title,value:"",name:"title"},{label:l.web_html_name,value:"",name:"name"}]}),k=h({time:"",list:{}}),c=h({columns:[{title:"ID",index:"id",slot:"id",order:"",width:"80px",minWidth:"60px",textAlign:"center"},{title:l.web_html_type,index:"type",slot:"type",order:"",width:"80px",minWidth:"80px",textAlign:"center"},{title:l.web_html_title,index:"title",order:"",width:"200px",minWidth:"160px"},{title:l.web_html_name,index:"name",order:"",width:"120px",minWidth:"120px"},{title:l.action,slot:"action",textAlign:"center",width:"40px"},{title:l.status,index:"status",slot:"status",width:"60px",textAlign:"center"},{title:l.ctime,index:"ctime",order:"",width:"160px",minWidth:"160px"},{title:l.utime,index:"utime",order:"",width:"160px",minWidth:"160px"},{title:l.remark,index:"remark"}],data:[],num:0,total:0,order:""}),e=h({total:0,num:1,limit:100}),s=h({show:!1,type:"",title:"添加/编辑",data:{}}),v=h({show:!1,title:"删除",data:[]}),y=h({show:!1,title:"导出",num:0});et(()=>{C.value=!0}),at(()=>{C&&g()});const g=()=>{n.value.show=!1,c.value.data=[];const u=$.Loading();B.Post("web_html/list?lang="+D.lang,{token:D.token,data:b(),page:e.value.num,limit:e.value.limit,order:c.value.order},t=>{u.clear();const{code:a,msg:H,time:N,data:R}=t.data;a===0?(k.value.time=N,c.value.data=R,P()):$.Toast(H)}),e.value.total=0,B.Post("web_html/total?lang="+D.lang,{token:D.token,data:b()},t=>{const{code:a,msg:H,time:N,data:R}=t.data;a==0?(k.value.time=N,e.value.total=R.total):$.Toast(H)})},b=()=>{const u={key:n.value.key,stime:typeof n.value.time[0]=="string"?n.value.time[0]:S.Date("Y/m/d",n.value.time[0]),etime:typeof n.value.time[1]=="string"?n.value.time[1]:S.Date("Y/m/d",n.value.time[1])};for(let t of n.value.columns)t.name&&(u[t.name]=t.value);return u},d=(u,t)=>{c.value.num=u,c.value.total=t},w=u=>{c.value.order=u,g()},I=()=>{n.value.time=[S.Date("Y/m/d",S.StrToTime("-3 year")),S.Date("Y/m/d")],n.value.key="";for(let u of n.value.columns)u.value="";c.value.order="",e.value.num=1,g()},P=()=>{ot(()=>{m.value.checkboxAll(!1)})},z=(u,t)=>{s.value.show=!0,s.value.type=u,u=="add"?(s.value.title=l.add,s.value.data={}):u=="edit"&&(s.value.title=l.edit+"( "+t.title+" )",s.value.data=t)},E=u=>{u&&(s.value.show=!1,g())},G=()=>{v.value.show=!0;const u=m.value.getData();let t=[];for(let a of u)t.push(a.id);v.value.data=t},J=u=>{u&&(v.value.show=!1,g())},Q=u=>{y.value.show=!0,y.value.num=u},X=u=>{u&&(y.value.show=!1,P())};return(u,t)=>(A(),K(st,null,[r(wt,{time:k.value.time,onRefresh:t[0]||(t[0]=a=>g())},{default:i(()=>[o("span",{innerHTML:f(l).sys_menus_total(e.value.total)},null,8,Ct)]),_:1},8,["time"]),o("div",Dt,[o("div",Ut,[r(rt,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line"},{action:"export",slot:"export",is_action:!0}]},{add:i(()=>[r(L,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:t[1]||(t[1]=a=>z("add"))},{default:i(()=>[U(x(f(l).add),1)]),_:1})]),del:i(()=>[r(L,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:c.value.num==0,onClick:t[2]||(t[2]=a=>G())},{default:i(()=>[U(x(f(l).del)+"("+x(c.value.num)+")",1)]),_:1},8,["disabled"])]),line:i(()=>t[20]||(t[20]=[o("span",{class:"line"},"|",-1)])),export:i(()=>[r(L,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!e.value.total,onClick:t[3]||(t[3]=a=>Q(e.value.total))},{default:i(()=>[U(x(f(l).export)+"("+x(e.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),o("div",Lt,[r(mt,{show:n.value.show,"onUpdate:show":t[4]||(t[4]=a=>n.value.show=a),keys:n.value.key,"onUpdate:keys":t[5]||(t[5]=a=>n.value.key=a),columns:n.value.columns,onKeyup:t[6]||(t[6]=lt(a=>g(),["enter"])),onSearch:t[7]||(t[7]=a=>g()),onReset:t[8]||(t[8]=a=>I())},null,8,["show","keys","columns"])])]),o("div",At,[r(vt,{ref_key:"tableList",ref:m,overflow:"auto",columns:c.value.columns,options:c.value.data,onOrderBy:w,onPartially:d,height:"calc(100% - 58px)"},{id:i(a=>[o("div",Bt,x(a.id),1)]),type:i(a=>[o("div",Pt,x(a.type_name),1)]),action:i(a=>[o("div",Ht,[f(p)("save")?(A(),W(L,{key:0,onClick:H=>z("edit",a)},{default:i(()=>[U(x(f(l).edit),1)]),_:2},1032,["onClick"])):(A(),K("span",Mt,t[21]||(t[21]=[o("i",{class:"ui ui_safety"},null,-1)])))])]),status:i(a=>[o("div",Yt,[o("span",{class:nt(a.status?"c_success":"c_danger")},x(a.status?f(l).enable:f(l).disable),3)])]),_:1},8,["columns","options"])]),o("div",Wt,[r(pt,{total:e.value.total,"onUpdate:total":t[9]||(t[9]=a=>e.value.total=a),page:e.value.num,"onUpdate:page":[t[10]||(t[10]=a=>e.value.num=a),t[11]||(t[11]=a=>g())],limit:e.value.limit,"onUpdate:limit":[t[12]||(t[12]=a=>e.value.limit=a),t[13]||(t[13]=a=>{e.value.num=1,g()})]},null,8,["total","page","limit"])]),r(_t,{show:s.value.show,"onUpdate:show":t[14]||(t[14]=a=>s.value.show=a),title:s.value.title,data:s.value.data,onSubmit:t[15]||(t[15]=a=>E(a))},null,8,["show","title","data"]),r($t,{show:v.value.show,"onUpdate:show":t[16]||(t[16]=a=>v.value.show=a),data:v.value.data,onSubmit:t[17]||(t[17]=a=>J(a))},null,8,["show","data"]),r(St,{show:y.value.show,"onUpdate:show":t[18]||(t[18]=a=>y.value.show=a),data:b(),order:c.value.order,num:y.value.num,onSubmit:t[19]||(t[19]=a=>X(a))},null,8,["show","data","order","num"])],64))}}),Ft=q(It,[["__scopeId","data-v-f164eb2a"]]);export{Ft as default};
