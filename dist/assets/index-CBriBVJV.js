import{d as M,u as W,r as y,w as F,c as I,a as s,e as O,f as i,l as S,h as st,i as a,t as _,b as g,j as H,k as V,m as A,U as x,R as L,o as P,E as G,_ as J,F as ot,y as nt,z as it,n as K,D as ut,s as dt,x as q}from"./index-CnF5AvoE.js";import{d as B,w as rt,a as pt,b as mt,c as vt,P as ct}from"./Search-CvnSry-k.js";import{w as ft}from"./index-Cz1UrKEg.js";import{w as wt}from"./Total-D1VoWU1A.js";import{w as _t}from"./index-GcSL2rHE.js";import{w as gt}from"./index-DYzwSGVj.js";const xt={class:"label"},yt={class:"red_dot"},bt={colspan:"3"},kt={class:"label"},ht={class:"red_dot"},$t={colspan:"3"},Ct={class:"label"},St={colspan:"3"},Tt=M({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(C,{emit:U}){const c=C,T=U,u=W().state,k=u.langs,o=y(!1),n=y({id:0,state:!0,type:"",class:"",sort:"0",wms_co_id:"",name:"",remark:""}),f=y({type_name:[],class_name:[]});F(()=>c.show,m=>{o.value=m,m&&(n.value.id=c.data.id||0,n.value.state=typeof c.data.state<"u"?c.data.state:!0,n.value.sort=c.data.sort||"0",n.value.wms_co_id=c.data.wms_co_id||"",n.value.name=c.data.name||"",n.value.remark=c.data.remark||"",d())},{deep:!0});const d=()=>{n.value.type=[],n.value.class=[],L.Post("erp_base_partner/get_select?lang="+u.lang,{token:u.token},m=>{const{code:l,msg:v,data:D}=m.data;l==0?(f.value.type_name=D.type_name,f.value.class_name=D.class_name,G(()=>{n.value.type=typeof c.data.type<"u"?[parseInt(c.data.type)]:"",n.value.class=typeof c.data.class<"u"?[c.data.class]:""})):x.Toast(v)})},r=m=>m.type.length<1?x.Toast("请选择城市"):m.class.length<1?x.Toast("请选择分类"):isNaN(m.sort)?x.Toast("请输入排序数字"):m.name.length<2||m.name.length>32?x.Toast("名称2～32字符!"):m,w=()=>{const m=r(n.value);if(!m)return;const l=x.Loading();L.Post("erp_base_partner/save?lang="+u.lang,{token:u.token,data:m},v=>{l.clear();const{code:D,msg:N}=v.data;x.Toast(N),T("submit",D==0)})},$=()=>{T("update:show",!1)};return(m,l)=>(P(),I(O,{show:o.value,"onUpdate:show":l[8]||(l[8]=v=>o.value=v),title:C.title,width:"720px",bottom:"40px",onClose:l[9]||(l[9]=v=>$())},{bottom:s(()=>[i(A,{height:"40px",padding:"0 32px",onClick:l[7]||(l[7]=v=>w())},{default:s(()=>[S(_(g(k).confirm),1)]),_:1})]),default:s(()=>[i(_t,null,{default:s(()=>l[10]||(l[10]=[S("提示: 请认证填写如下信息")])),_:1}),i(V,null,{default:s(()=>[i(st,null,{default:s(()=>[a("tr",null,[a("td",xt,[a("span",yt,_(g(k).status),1)]),a("td",bt,[i(gt,{value:n.value.state,"onUpdate:value":l[0]||(l[0]=v=>n.value.state=v)},null,8,["value"])])]),a("tr",null,[l[11]||(l[11]=a("td",{class:"label"},[a("span",{class:"red_dot"},"类型")],-1)),a("td",null,[i(B,{value:n.value.type,"onUpdate:value":l[1]||(l[1]=v=>n.value.type=v),options:f.value.type_name},null,8,["value","options"])]),l[12]||(l[12]=a("td",{class:"label"},[a("span",{class:"red_dot"},"分类")],-1)),a("td",null,[i(B,{value:n.value.class,"onUpdate:value":l[2]||(l[2]=v=>n.value.class=v),options:f.value.class_name},null,8,["value","options"])])]),a("tr",null,[l[13]||(l[13]=a("td",{class:"label"},[a("span",{class:"red_dot"},"分仓ID")],-1)),a("td",null,[i(H,{value:n.value.wms_co_id,"onUpdate:value":l[3]||(l[3]=v=>n.value.wms_co_id=v),maxlength:"8"},null,8,["value"])]),l[14]||(l[14]=a("td",{class:"label"},[a("span",{class:"red_dot"},"排序")],-1)),a("td",null,[i(H,{value:n.value.sort,"onUpdate:value":l[4]||(l[4]=v=>n.value.sort=v),maxlength:"4"},null,8,["value"])])]),a("tr",null,[a("td",kt,[a("span",ht,_(g(k).name),1)]),a("td",$t,[i(H,{value:n.value.name,"onUpdate:value":l[5]||(l[5]=v=>n.value.name=v),maxlength:"32"},null,8,["value"])])]),a("tr",null,[a("td",Ct,_(g(k).remark),1),a("td",St,[i(H,{value:n.value.remark,"onUpdate:value":l[6]||(l[6]=v=>n.value.remark=v),type:"textarea",height:"80px",maxlength:"32"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Ut=J(Tt,[["__scopeId","data-v-3d1def7c"]]),At=["innerHTML"],Lt=M({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(C,{emit:U}){const c=C,T=U,u=W().state,k=u.langs,o=y(!1);F(()=>c.show,d=>{o.value=d},{deep:!0});const n=()=>{const d=x.Loading();L.Post("erp_base_partner/del?lang="+u.lang,{token:u.token,data:c.data},r=>{d.clear();const{code:w,msg:$}=r.data;x.Toast($),T("submit",w==0)})},f=()=>{T("update:show",!1)};return(d,r)=>(P(),I(O,{show:o.value,"onUpdate:show":r[1]||(r[1]=w=>o.value=w),title:C.title||g(k).del,width:"360px",bottom:"40px",onClose:r[2]||(r[2]=w=>f())},{bottom:s(()=>[i(A,{effect:"dark",type:"danger",height:"40px",onClick:r[0]||(r[0]=w=>n())},{default:s(()=>[S(_(g(k).confirm),1)]),_:1})]),default:s(()=>[i(V,{lineHeight:"60px"},{default:s(()=>[a("span",{innerHTML:g(k).del_warn(C.data.length)},null,8,At)]),_:1})]),_:1},8,["show","title"]))}}),Dt=["innerHTML"],Pt=M({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(C,{emit:U}){const c=C,T=U,u=W().state,k=u.langs,o=y(!1);F(()=>c.show,d=>{o.value=d},{deep:!0});const n=()=>{const d=x.Loading();L.Post("erp_base_partner/export?lang="+u.lang,{token:u.token,data:c.data,order:c.order},r=>{d.clear();const{code:w,msg:$,data:m}=r.data;x.Toast($),w==0&&ot.Down(m.path+m.filename,m.filename),T("submit",w==0)})},f=()=>{T("update:show",!1)};return(d,r)=>(P(),I(O,{show:o.value,"onUpdate:show":r[1]||(r[1]=w=>o.value=w),title:C.title||g(k).export,width:"360px",bottom:"40px",onClose:r[2]||(r[2]=w=>f())},{bottom:s(()=>[i(A,{height:"40px",padding:"0 32px",onClick:r[0]||(r[0]=w=>n())},{default:s(()=>[S(_(g(k).confirm),1)]),_:1})]),default:s(()=>[i(V,{lineHeight:"60px"},{default:s(()=>[a("span",{innerHTML:g(k).export_warn(C.num)},null,8,Dt)]),_:1})]),_:1},8,["show","title"]))}}),Bt=["innerHTML"],Ht={class:"app_action flex"},Mt={class:"app_action_tools scrollbar"},Wt={class:"app_action_search flex"},It={class:"app_ct"},Nt={class:"tCenter"},Rt={class:"tCenter"},jt={class:"tCenter"},Ft={class:"tCenter"},Ot={class:"tCenter"},Vt={class:"tCenter"},zt={class:"tCenter"},Et={key:1},Kt={class:"tCenter"},qt={class:"tCenter"},Gt={class:"app_page"},Jt=M({__name:"index",setup(C){const U=y(!1),c=y(),b=W().state,u=b.langs,k=ct.isAction,o=y({show:!1,key:"",placeholder:"名称、备注",columns:[{label:"类型",value:"",slot:"type"},{label:"分类",value:"",slot:"class"},{label:"状态",value:"",slot:"status"},{label:u.name,value:"",name:"name"},{label:"制单员",value:"",name:"creator_name"},{label:"操作员",value:"",name:"operator_name"},{label:u.remark,value:"",name:"remark"}],type:"",class:"",status:""}),n=y({time:"",list:{}}),f=y({columns:[{title:"ID",index:"id",slot:"id",order:"",width:"80px",minWidth:"60px",textAlign:"center"},{title:"类型",slot:"type",index:"type",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:u.date,slot:"date",textAlign:"center",width:"120px",minWidth:"110px"},{title:"分类",slot:"class",index:"class",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"分仓ID",slot:"wms_co_id",index:"wms_co_id",order:"",width:"100px",minWidth:"100px"},{title:u.name,index:"name",order:"",width:"120px",minWidth:"80px"},{title:"排序",slot:"sort",textAlign:"center",width:"60px",minWidth:"60px"},{title:u.status,index:"state",slot:"state",width:"60px",textAlign:"center"},{title:u.action,slot:"action",textAlign:"center",width:"90px"},{title:"制单员",slot:"creator_name",textAlign:"center",width:"90px"},{title:"操作员",slot:"operator_name",textAlign:"center",width:"90px"},{title:u.remark,index:"remark"}],data:[],num:0,total:0,order:""}),d=y({total:0,num:1,limit:100}),r=y({show:!1,title:"添加/编辑",data:{}}),w=y({show:!1,title:"删除",data:[]}),$=y({show:!1,title:"导出",num:0}),m=y({type_name:[],class_name:[],status_name:[]});nt(()=>{b.token&&lt()}),it(()=>{U&&b.isLogin&&l()});const l=()=>{o.value.show=!1,f.value.data=[];const p=x.Loading();L.Post("erp_base_partner/list?lang="+b.lang,{token:b.token,data:v(),page:d.value.num,limit:d.value.limit,order:f.value.order},t=>{p.clear();const{code:e,msg:h,time:R,data:j}=t.data;e===0?(n.value.time=R,f.value.data=j,z()):x.Toast(h)}),d.value.total=0,L.Post("erp_base_partner/total?lang="+b.lang,{token:b.token,data:v()},t=>{const{code:e,msg:h,time:R,data:j}=t.data;e==0?(n.value.time=R,d.value.total=j.total):x.Toast(h)})},v=()=>{const p={key:o.value.key,type:o.value.type,class:o.value.class,status:o.value.status};for(let t of o.value.columns)t.name&&(p[t.name]=t.value);return p},D=(p,t)=>{f.value.num=p,f.value.total=t},N=p=>{f.value.order=p,l()},Q=()=>{o.value.key="",o.value.type="",o.value.class="",o.value.status="";for(let p of o.value.columns)p.value="";f.value.order="",d.value.num=1,l()},z=()=>{G(()=>{f.value.num=0,c.value.checkboxAll(!1)})},E=(p,t={})=>{r.value.show=!0,r.value.data=t,p=="add"?r.value.title=u.add:p=="edit"&&(r.value.title=u.edit+"( "+t.name+" )")},X=p=>{p&&(r.value.show=!1,l())},Y=()=>{w.value.show=!0;const p=c.value.getData();let t=[];for(let e of p)t.push(e.id);w.value.data=t},Z=p=>{p&&(w.value.show=!1,l())},tt=p=>{$.value.show=!0,$.value.num=p},et=p=>{p&&($.value.show=!1,z())},at=()=>{const p=x.Loading();L.Post("erp_base_partner/pull?lang="+b.lang,{token:b.token},t=>{p.clear();const{msg:e}=t.data;x.Toast(e)})},lt=()=>{L.Post("erp_base_partner/get_select?lang="+b.lang,{token:b.token},p=>{const{code:t,msg:e,data:h}=p.data;t==0?(m.value.type_name=h.type_name,m.value.class_name=h.class_name,m.value.status_name=h.status_name,U.value=!0):x.Toast(e)})};return(p,t)=>(P(),K(dt,null,[i(wt,{time:n.value.time,onRefresh:t[0]||(t[0]=e=>l())},{default:s(()=>[a("span",{innerHTML:g(u).sys_role_total(d.value.total)},null,8,Bt)]),_:1},8,["time"]),a("div",Ht,[a("div",Mt,[i(rt,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line1"},{action:"save",slot:"down",is_action:!0},{action:"line",slot:"line2"},{action:"export",slot:"export",is_action:!0}]},{add:s(()=>[i(A,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:t[1]||(t[1]=e=>E("add"))},{default:s(()=>[S(_(g(u).add),1)]),_:1})]),del:s(()=>[i(A,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:f.value.num==0,onClick:t[2]||(t[2]=e=>Y())},{default:s(()=>[S(_(g(u).del)+"("+_(f.value.num)+")",1)]),_:1},8,["disabled"])]),line1:s(()=>t[24]||(t[24]=[a("span",{class:"line"},"|",-1)])),down:s(()=>[i(A,{effect:"plain",type:"primary",onClick:t[3]||(t[3]=e=>at())},{default:s(()=>t[25]||(t[25]=[S("同步聚水潭店铺")])),_:1})]),line2:s(()=>t[26]||(t[26]=[a("span",{class:"line"},"|",-1)])),export:s(()=>[i(A,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!d.value.total,onClick:t[4]||(t[4]=e=>tt(d.value.total))},{default:s(()=>[S(_(g(u).export)+"("+_(d.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),a("div",Wt,[i(pt,{show:o.value.show,"onUpdate:show":t[8]||(t[8]=e=>o.value.show=e),keys:o.value.key,"onUpdate:keys":t[9]||(t[9]=e=>o.value.key=e),columns:o.value.columns,onKeyup:t[10]||(t[10]=ut(e=>{d.value.num=1,l()},["enter"])),onSearch:t[11]||(t[11]=e=>{d.value.num=1,l()}),onReset:t[12]||(t[12]=e=>Q())},{type:s(e=>[i(B,{value:o.value.type,"onUpdate:value":t[5]||(t[5]=h=>o.value.type=h),options:m.value.type_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),class:s(e=>[i(B,{value:o.value.class,"onUpdate:value":t[6]||(t[6]=h=>o.value.class=h),options:m.value.class_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),status:s(e=>[i(B,{value:o.value.status,"onUpdate:value":t[7]||(t[7]=h=>o.value.status=h),options:m.value.status_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns"])])]),a("div",It,[i(mt,{ref_key:"tableList",ref:c,overflow:"auto",columns:f.value.columns,options:f.value.data,onOrderBy:N,onPartially:D},{id:s(e=>[a("div",Nt,_(e.id),1)]),type:s(e=>[a("div",{class:q(["tCenter",e.type=="0"?"c_danger":"c_info"])},_(e.type_name),3)]),date:s(e=>[a("div",Rt,[i(ft,{title:"创建: "+e.ctime+`
更新: `+e.utime},{default:s(()=>[S(_(e.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),class:s(e=>[a("div",jt,_(e.class),1)]),wms_co_id:s(e=>[a("div",Ft,[a("b",null,_(e.wms_co_id),1)])]),sort:s(e=>[a("div",Ot,_(e.sort),1)]),state:s(e=>[a("div",Vt,[a("span",{class:q(e.state?"c_success":"c_danger")},_(e.state?g(u).enable:g(u).disable),3)])]),action:s(e=>[a("div",zt,[g(k)("save")?(P(),I(A,{key:0,onClick:h=>E("edit",e)},{default:s(()=>[S(_(g(u).edit),1)]),_:2},1032,["onClick"])):(P(),K("span",Et,"-"))])]),creator_name:s(e=>[a("div",Kt,_(e.creator_name),1)]),operator_name:s(e=>[a("div",qt,_(e.operator_name),1)]),_:1},8,["columns","options"])]),a("div",Gt,[i(vt,{total:d.value.total,"onUpdate:total":t[13]||(t[13]=e=>d.value.total=e),page:d.value.num,"onUpdate:page":[t[14]||(t[14]=e=>d.value.num=e),t[15]||(t[15]=e=>l())],limit:d.value.limit,"onUpdate:limit":[t[16]||(t[16]=e=>d.value.limit=e),t[17]||(t[17]=e=>{d.value.num=1,l()})]},null,8,["total","page","limit"])]),i(Ut,{show:r.value.show,"onUpdate:show":t[18]||(t[18]=e=>r.value.show=e),title:r.value.title,data:r.value.data,onSubmit:t[19]||(t[19]=e=>X(e))},null,8,["show","title","data"]),i(Lt,{show:w.value.show,"onUpdate:show":t[20]||(t[20]=e=>w.value.show=e),data:w.value.data,onSubmit:t[21]||(t[21]=e=>Z(e))},null,8,["show","data"]),i(Pt,{show:$.value.show,"onUpdate:show":t[22]||(t[22]=e=>$.value.show=e),data:v(),order:f.value.order,num:$.value.num,onSubmit:t[23]||(t[23]=e=>et(e))},null,8,["show","data","order","num"])],64))}}),ae=J(Jt,[["__scopeId","data-v-a514f7db"]]);export{ae as default};
