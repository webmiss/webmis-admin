import{d as H,u as M,r as _,w as F,c as W,a as l,e as K,f as r,l as T,h as at,i as s,t as g,b as x,K as j,j as B,k as O,m as A,U as b,R as L,o as D,G as q,_ as G,F as st,y as lt,z as ot,n as E,D as nt,E as ut,s as it,x as dt,I as rt}from"./index-De4U6Qew.js";import{w as vt,a as mt,b as pt,P as ct}from"./Search-BRk08DvK.js";import{w as ft}from"./Total-DFmTiaob.js";import{w as wt}from"./index-DtELT80z.js";import{w as gt}from"./index-yMd_J0k7.js";const xt={class:"label"},_t={class:"red_dot"},bt={colspan:"3"},ht={style:{width:"30%"}},kt={class:"label"},yt={class:"red_dot"},$t={colspan:"3"},St={colspan:"3"},Ct={colspan:"3"},Tt={class:"label"},Ut={colspan:"3"},At=H({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup($,{emit:U}){const c=$,C=U,i=M().state,h=i.langs,n=_(!1),o=_({id:0,status:!0,class:"",sort:"0",name:"",value:"",rule:"",remark:""}),w=_({city_name:[],class_name:[]});F(()=>c.show,m=>{n.value=m,m&&(o.value.id=c.data.id||0,o.value.status=typeof c.data.status<"u"?c.data.status:!0,o.value.sort=c.data.sort||"0",o.value.name=c.data.name||"",o.value.value=c.data.value||"",o.value.rule=c.data.rule||"",o.value.remark=c.data.remark||"",u())},{deep:!0});const u=()=>{o.value.class=[],L.Post("erp_base_brand/get_select?lang="+i.lang,{token:i.token},m=>{const{code:a,msg:p,data:P}=m.data;a==0?(w.value.class_name=P.class_name,q(()=>{o.value.class=typeof c.data.class<"u"?[c.data.class]:""})):b.Toast(p)})},d=m=>m.class.length<1?b.Toast("请选择分类"):isNaN(m.sort)?b.Toast("请输入排序数字"):m.name.length<2||m.name.length>16?b.Toast("名称2～16字符!"):m.value.length<2||m.value.length>64?b.Toast("值2～64字符!"):m,f=()=>{const m=d(o.value);if(!m)return;const a=b.Loading();L.Post("erp_base_brand/save?lang="+i.lang,{token:i.token,data:m},p=>{a.clear();const{code:P,msg:N}=p.data;b.Toast(N),C("submit",P==0)})},y=()=>{C("update:show",!1)};return(m,a)=>(D(),W(K,{show:n.value,"onUpdate:show":a[8]||(a[8]=p=>n.value=p),title:$.title,width:"720px",bottom:"40px",onClose:a[9]||(a[9]=p=>y())},{bottom:l(()=>[r(A,{height:"40px",padding:"0 32px",onClick:a[7]||(a[7]=p=>f())},{default:l(()=>[T(g(x(h).confirm),1)]),_:1})]),default:l(()=>[r(wt,null,{default:l(()=>[...a[10]||(a[10]=[T("提示: 请认证填写如下信息",-1)])]),_:1}),r(O,null,{default:l(()=>[r(at,null,{default:l(()=>[s("tr",null,[s("td",xt,[s("span",_t,g(x(h).status),1)]),s("td",bt,[r(gt,{value:o.value.status,"onUpdate:value":a[0]||(a[0]=p=>o.value.status=p)},null,8,["value"])])]),s("tr",null,[a[11]||(a[11]=s("td",{class:"label"},[s("span",{class:"red_dot"},"分类")],-1)),s("td",null,[r(j,{value:o.value.class,"onUpdate:value":a[1]||(a[1]=p=>o.value.class=p),options:w.value.class_name},null,8,["value","options"])]),a[12]||(a[12]=s("td",{class:"label"},[s("span",{class:"red_dot"},"排序")],-1)),s("td",ht,[r(B,{value:o.value.sort,"onUpdate:value":a[2]||(a[2]=p=>o.value.sort=p),maxlength:"4"},null,8,["value"])])]),s("tr",null,[s("td",kt,[s("span",yt,g(x(h).name),1)]),s("td",$t,[r(B,{value:o.value.name,"onUpdate:value":a[3]||(a[3]=p=>o.value.name=p),maxlength:"16"},null,8,["value"])])]),s("tr",null,[a[13]||(a[13]=s("td",{class:"label"},[s("span",{class:"red_dot"},"值")],-1)),s("td",St,[r(B,{value:o.value.value,"onUpdate:value":a[4]||(a[4]=p=>o.value.value=p),maxlength:"32"},null,8,["value"])])]),s("tr",null,[a[14]||(a[14]=s("td",{class:"label"},"编码正则",-1)),s("td",Ct,[r(B,{value:o.value.rule,"onUpdate:value":a[5]||(a[5]=p=>o.value.rule=p),maxlength:"128"},null,8,["value"])])]),s("tr",null,[s("td",Tt,g(x(h).remark),1),s("td",Ut,[r(B,{value:o.value.remark,"onUpdate:value":a[6]||(a[6]=p=>o.value.remark=p),type:"textarea",height:"80px",maxlength:"32"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Lt=G(At,[["__scopeId","data-v-963e14e5"]]),Dt=["innerHTML"],Pt=H({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup($,{emit:U}){const c=$,C=U,i=M().state,h=i.langs,n=_(!1);F(()=>c.show,u=>{n.value=u},{deep:!0});const o=()=>{const u=b.Loading();L.Post("erp_base_brand/del?lang="+i.lang,{token:i.token,data:c.data},d=>{u.clear();const{code:f,msg:y}=d.data;b.Toast(y),C("submit",f==0)})},w=()=>{C("update:show",!1)};return(u,d)=>(D(),W(K,{show:n.value,"onUpdate:show":d[1]||(d[1]=f=>n.value=f),title:$.title||x(h).del,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=f=>w())},{bottom:l(()=>[r(A,{effect:"dark",type:"danger",height:"40px",onClick:d[0]||(d[0]=f=>o())},{default:l(()=>[T(g(x(h).confirm),1)]),_:1})]),default:l(()=>[r(O,{lineHeight:"60px"},{default:l(()=>[s("span",{innerHTML:x(h).del_warn($.data.length)},null,8,Dt)]),_:1})]),_:1},8,["show","title"]))}}),Bt=["innerHTML"],Ht=H({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup($,{emit:U}){const c=$,C=U,i=M().state,h=i.langs,n=_(!1);F(()=>c.show,u=>{n.value=u},{deep:!0});const o=()=>{const u=b.Loading();L.Post("erp_base_brand/export?lang="+i.lang,{token:i.token,data:c.data,order:c.order},d=>{u.clear();const{code:f,msg:y,data:m}=d.data;b.Toast(y),f==0&&st.Down(m.path+m.filename,m.filename),C("submit",f==0)})},w=()=>{C("update:show",!1)};return(u,d)=>(D(),W(K,{show:n.value,"onUpdate:show":d[1]||(d[1]=f=>n.value=f),title:$.title||x(h).export,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=f=>w())},{bottom:l(()=>[r(A,{height:"40px",padding:"0 32px",onClick:d[0]||(d[0]=f=>o())},{default:l(()=>[T(g(x(h).confirm),1)]),_:1})]),default:l(()=>[r(O,{lineHeight:"60px"},{default:l(()=>[s("span",{innerHTML:x(h).export_warn($.num)},null,8,Bt)]),_:1})]),_:1},8,["show","title"]))}}),Mt=["innerHTML"],Wt={class:"app_action flex"},Nt={class:"app_action_tools scrollbar"},It={class:"app_action_search flex"},Rt={class:"app_ct"},jt={class:"tCenter"},Ft={class:"tCenter"},Kt={class:"tCenter"},Ot={class:"tCenter"},Vt={class:"tCenter"},zt={class:"tCenter"},Et={key:1},qt={class:"tCenter"},Gt={class:"tCenter"},Jt={class:"app_page"},Qt=H({__name:"index",setup($){const U=_(!1),c=_(),k=M().state,i=k.langs,h=ct.isAction,n=_({show:!1,key:"",placeholder:"名称、备注",columns:[{label:"分类",value:"",slot:"class"},{label:"状态",value:"",slot:"status"},{label:i.name,value:"",name:"name"},{label:"制单员",value:"",name:"creator_name"},{label:"操作员",value:"",name:"operator_name"},{label:i.remark,value:"",name:"remark"}],class:"",status:""}),o=_({time:"",list:{}}),w=_({columns:[{title:"ID",index:"id",slot:"id",order:"",width:"80px",minWidth:"60px",textAlign:"center"},{title:i.date,slot:"date",textAlign:"center",width:"120px",minWidth:"110px"},{title:"分类",slot:"class",index:"class",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"品牌",index:"name",order:"",width:"80px",minWidth:"80px"},{title:"值",index:"value",order:"",width:"120px",minWidth:"80px"},{title:"排序",slot:"sort",textAlign:"center",width:"60px",minWidth:"60px"},{title:i.status,index:"status",slot:"status",width:"60px",textAlign:"center"},{title:i.action,slot:"action",textAlign:"center",width:"90px"},{title:"制单员",slot:"creator_name",textAlign:"center",width:"90px"},{title:"操作员",slot:"operator_name",textAlign:"center",width:"90px"},{title:"编码正则",index:"rule",textAlign:"center",width:"120px"},{title:i.remark,index:"remark"}],data:[],num:0,total:0,order:""}),u=_({total:0,num:1,limit:100}),d=_({show:!1,title:"添加/编辑",data:{}}),f=_({show:!1,title:"删除",data:[]}),y=_({show:!1,title:"导出",num:0}),m=_({class_name:[],status_name:[]});lt(()=>{k.token&&et()}),ot(()=>{U&&k.isLogin&&a()});const a=()=>{n.value.show=!1,w.value.data=[];const v=b.Loading();L.Post("erp_base_brand/list?lang="+k.lang,{token:k.token,data:p(),page:u.value.num,limit:u.value.limit,order:w.value.order},t=>{v.clear();const{code:e,msg:S,time:I,data:R}=t.data;e===0?(o.value.time=I,w.value.data=R,V()):b.Toast(S)}),u.value.total=0,L.Post("erp_base_brand/total?lang="+k.lang,{token:k.token,data:p()},t=>{const{code:e,msg:S,time:I,data:R}=t.data;e==0?(o.value.time=I,u.value.total=R.total):b.Toast(S)})},p=()=>{const v={key:n.value.key,class:n.value.class,status:n.value.status};for(let t of n.value.columns)t.name&&(v[t.name]=t.value);return v},P=(v,t)=>{w.value.num=v,w.value.total=t},N=v=>{w.value.order=v,a()},J=()=>{n.value.key="",n.value.class="",n.value.status="";for(let v of n.value.columns)v.value="";w.value.order="",u.value.num=1,a()},V=()=>{q(()=>{w.value.num=0,c.value.checkboxAll(!1)})},z=(v,t={})=>{d.value.show=!0,d.value.data=t,v=="add"?d.value.title=i.add:v=="edit"&&(d.value.title=i.edit+"( "+t.name+" )")},Q=v=>{v&&(d.value.show=!1,a())},X=()=>{f.value.show=!0;const v=c.value.getData();let t=[];for(let e of v)t.push(e.id);f.value.data=t},Y=v=>{v&&(f.value.show=!1,a())},Z=v=>{y.value.show=!0,y.value.num=v},tt=v=>{v&&(y.value.show=!1,V())},et=()=>{L.Post("erp_base_brand/get_select?lang="+k.lang,{token:k.token},v=>{const{code:t,msg:e,data:S}=v.data;t==0?(m.value.class_name=S.class_name,m.value.status_name=S.status_name,U.value=!0):b.Toast(e)})};return(v,t)=>(D(),E(it,null,[r(ft,{time:o.value.time,onRefresh:t[0]||(t[0]=e=>a())},{default:l(()=>[s("span",{innerHTML:x(i).sys_role_total(u.value.total)},null,8,Mt)]),_:1},8,["time"]),s("div",Wt,[s("div",Nt,[r(vt,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line"},{action:"export",slot:"export",is_action:!0}]},{add:l(()=>[r(A,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:t[1]||(t[1]=e=>z("add"))},{default:l(()=>[T(g(x(i).add),1)]),_:1})]),del:l(()=>[r(A,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:w.value.num==0,onClick:t[2]||(t[2]=e=>X())},{default:l(()=>[T(g(x(i).del)+"("+g(w.value.num)+")",1)]),_:1},8,["disabled"])]),line:l(()=>[...t[22]||(t[22]=[s("span",{class:"line"},"|",-1)])]),export:l(()=>[r(A,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!u.value.total,onClick:t[3]||(t[3]=e=>Z(u.value.total))},{default:l(()=>[T(g(x(i).export)+"("+g(u.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),s("div",It,[r(mt,{show:n.value.show,"onUpdate:show":t[6]||(t[6]=e=>n.value.show=e),keys:n.value.key,"onUpdate:keys":t[7]||(t[7]=e=>n.value.key=e),columns:n.value.columns,onKeyup:t[8]||(t[8]=nt(e=>{u.value.num=1,a()},["enter"])),onSearch:t[9]||(t[9]=e=>{u.value.num=1,a()}),onReset:t[10]||(t[10]=e=>J())},{class:l(e=>[r(j,{value:n.value.class,"onUpdate:value":t[4]||(t[4]=S=>n.value.class=S),options:m.value.class_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),status:l(e=>[r(j,{value:n.value.status,"onUpdate:value":t[5]||(t[5]=S=>n.value.status=S),options:m.value.status_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns"])])]),s("div",Rt,[r(ut,{ref_key:"tableList",ref:c,overflow:"auto",columns:w.value.columns,options:w.value.data,onOrderBy:N,onPartially:P},{id:l(e=>[s("div",jt,g(e.id),1)]),date:l(e=>[s("div",Ft,[r(rt,{title:"创建: "+e.ctime+`
更新: `+e.utime},{default:l(()=>[T(g(e.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),class:l(e=>[s("div",Kt,g(e.class),1)]),sort:l(e=>[s("div",Ot,g(e.sort),1)]),status:l(e=>[s("div",Vt,[s("span",{class:dt(e.status?"c_success":"c_danger")},g(e.status?x(i).enable:x(i).disable),3)])]),action:l(e=>[s("div",zt,[x(h)("save")?(D(),W(A,{key:0,onClick:S=>z("edit",e)},{default:l(()=>[T(g(x(i).edit),1)]),_:1},8,["onClick"])):(D(),E("span",Et,"-"))])]),creator_name:l(e=>[s("div",qt,g(e.creator_name),1)]),operator_name:l(e=>[s("div",Gt,g(e.operator_name),1)]),_:1},8,["columns","options"])]),s("div",Jt,[r(pt,{total:u.value.total,"onUpdate:total":t[11]||(t[11]=e=>u.value.total=e),page:u.value.num,"onUpdate:page":[t[12]||(t[12]=e=>u.value.num=e),t[13]||(t[13]=e=>a())],limit:u.value.limit,"onUpdate:limit":[t[14]||(t[14]=e=>u.value.limit=e),t[15]||(t[15]=e=>{u.value.num=1,a()})]},null,8,["total","page","limit"])]),r(Lt,{show:d.value.show,"onUpdate:show":t[16]||(t[16]=e=>d.value.show=e),title:d.value.title,data:d.value.data,onSubmit:t[17]||(t[17]=e=>Q(e))},null,8,["show","title","data"]),r(Pt,{show:f.value.show,"onUpdate:show":t[18]||(t[18]=e=>f.value.show=e),data:f.value.data,onSubmit:t[19]||(t[19]=e=>Y(e))},null,8,["show","data"]),r(Ht,{show:y.value.show,"onUpdate:show":t[20]||(t[20]=e=>y.value.show=e),data:p(),order:w.value.order,num:y.value.num,onSubmit:t[21]||(t[21]=e=>tt(e))},null,8,["show","data","order","num"])],64))}}),ae=G(Qt,[["__scopeId","data-v-72a2667a"]]);export{ae as default};
