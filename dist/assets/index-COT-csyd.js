import{d as F,u as N,r as x,w as O,c as R,a as u,e as V,f as i,h as ue,i as s,j as Y,k as W,l as A,t as g,b as T,m as P,U as S,R as B,o as C,E as J,F as ie,T as f,y as de,z as re,n as M,D as ve,s as q,G as me,v as pe,x as be,M as G}from"./index-CnF5AvoE.js";import{d as I,w as fe,a as ce,b as ye,c as we,P as ge}from"./Search-CvnSry-k.js";import{w as xe}from"./index-Cz1UrKEg.js";import{w as ke}from"./Total-D1VoWU1A.js";import{w as Te}from"./index-DYzwSGVj.js";const _e={colspan:"3"},De={colspan:"3"},Se={colspan:"3"},Ue=F({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(U,{emit:L}){const m=U,h=L,p=N().state,$=p.langs,_=x(!1),n=x({type:"",id:"",city:"",tel:"",supplier_id:"",name:"",state:!1,depositbank:"",bankacount:"",acountnumber:"",alipay_name:"",alipay_id:"",remark:""}),l=x({city_name:[],state_name:[]});O(()=>m.show,b=>{_.value=b,b&&(n.value.type=m.data.type||"",n.value.id=m.data.id||"",n.value.tel=m.data.tel||"",n.value.supplier_id=m.data.supplier_id||"",n.value.name=m.data.name||"",n.value.state=typeof m.data.state<"u"?m.data.state:!0,n.value.depositbank=m.data.depositbank||"",n.value.bankacount=m.data.bankacount||"",n.value.acountnumber=m.data.acountnumber||"",n.value.alipay_name=m.data.alipay_name||"",n.value.alipay_id=m.data.alipay_id||"",n.value.remark=m.data.remark||"",y())},{deep:!0});const y=()=>{B.Post("erp_base_supplier/get_select?lang="+p.lang,{token:p.token},b=>{const{code:a,msg:o,data:k}=b.data;a==0?(l.value.city_name=k.city_name,J(()=>{n.value.city=m.data.city?[m.data.city]:""})):S.Toast(o)})},d=b=>b.name.length<2?S.Toast("请输入供应商名称"):b,r=()=>{const b=d(n.value);if(!b)return;const a=S.Loading();B.Post("erp_base_supplier/save?lang="+p.lang,{token:p.token,data:b},o=>{a.clear();const{code:k,msg:E}=o.data;S.Toast(E),h("submit",k==0)})},w=()=>{h("update:show",!1)};return(b,a)=>(C(),R(V,{show:_.value,"onUpdate:show":a[12]||(a[12]=o=>_.value=o),title:U.title,width:"800px",bottom:"40px",onClose:a[13]||(a[13]=o=>w())},{bottom:u(()=>[i(P,{height:"40px",padding:"0 32px",onClick:a[11]||(a[11]=o=>r())},{default:u(()=>[A(g(T($).confirm),1)]),_:1})]),default:u(()=>[i(W,null,{default:u(()=>[i(ue,null,{default:u(()=>[s("tr",null,[a[14]||(a[14]=s("td",{class:"label"},"供应商ID",-1)),s("td",null,[i(Y,{value:n.value.supplier_id,"onUpdate:value":a[0]||(a[0]=o=>n.value.supplier_id=o),disabled:n.value.type=="edit"},null,8,["value","disabled"])]),a[15]||(a[15]=s("td",{class:"label"},[s("span",{class:"red_dot"},"供应商名称")],-1)),s("td",null,[i(Y,{value:n.value.name,"onUpdate:value":a[1]||(a[1]=o=>n.value.name=o),disabled:n.value.type=="edit"},null,8,["value","disabled"])])]),s("tr",null,[a[16]||(a[16]=s("td",{class:"label"},"区域",-1)),s("td",null,[i(I,{value:n.value.city,"onUpdate:value":a[2]||(a[2]=o=>n.value.city=o),options:l.value.city_name},null,8,["value","options"])]),a[17]||(a[17]=s("td",{class:"label"},"手机号码",-1)),s("td",null,[i(Y,{value:n.value.tel,"onUpdate:value":a[3]||(a[3]=o=>n.value.tel=o)},null,8,["value"])])]),s("tr",null,[a[18]||(a[18]=s("td",{class:"label"},"状态",-1)),s("td",_e,[i(Te,{value:n.value.state,"onUpdate:value":a[4]||(a[4]=o=>n.value.state=o)},null,8,["value"])])]),s("tr",null,[a[19]||(a[19]=s("td",{class:"label"},"开户银行",-1)),s("td",De,[i(Y,{value:n.value.depositbank,"onUpdate:value":a[5]||(a[5]=o=>n.value.depositbank=o)},null,8,["value"])])]),s("tr",null,[a[20]||(a[20]=s("td",{class:"label"},"账户名称",-1)),s("td",null,[i(Y,{value:n.value.bankacount,"onUpdate:value":a[6]||(a[6]=o=>n.value.bankacount=o)},null,8,["value"])]),a[21]||(a[21]=s("td",{class:"label"},"银行卡号",-1)),s("td",null,[i(Y,{value:n.value.acountnumber,"onUpdate:value":a[7]||(a[7]=o=>n.value.acountnumber=o)},null,8,["value"])])]),s("tr",null,[a[22]||(a[22]=s("td",{class:"label"},"支付宝姓名",-1)),s("td",null,[i(Y,{value:n.value.alipay_name,"onUpdate:value":a[8]||(a[8]=o=>n.value.alipay_name=o)},null,8,["value"])]),a[23]||(a[23]=s("td",{class:"label"},"支付宝账号",-1)),s("td",null,[i(Y,{value:n.value.alipay_id,"onUpdate:value":a[9]||(a[9]=o=>n.value.alipay_id=o)},null,8,["value"])])]),s("tr",null,[a[24]||(a[24]=s("td",{class:"label"},"备注",-1)),s("td",Se,[i(Y,{value:n.value.remark,"onUpdate:value":a[10]||(a[10]=o=>n.value.remark=o),placeholder:"备注",type:"textarea",height:"80px"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),$e=["innerHTML"],Ce=F({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(U,{emit:L}){const m=U,h=L,p=N().state,$=p.langs,_=x(!1);O(()=>m.show,y=>{_.value=y},{deep:!0});const n=()=>{const y=S.Loading();B.Post("erp_base_supplier/del?lang="+p.lang,{token:p.token,data:m.data},d=>{y.clear();const{code:r,msg:w}=d.data;S.Toast(w),h("submit",r==0)})},l=()=>{h("update:show",!1)};return(y,d)=>(C(),R(V,{show:_.value,"onUpdate:show":d[1]||(d[1]=r=>_.value=r),title:U.title||T($).del,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=r=>l())},{bottom:u(()=>[i(P,{effect:"dark",type:"danger",height:"40px",onClick:d[0]||(d[0]=r=>n())},{default:u(()=>[A(g(T($).confirm),1)]),_:1})]),default:u(()=>[i(W,{lineHeight:"60px"},{default:u(()=>[s("span",{innerHTML:T($).del_warn(U.data.length)},null,8,$e)]),_:1})]),_:1},8,["show","title"]))}}),he=["innerHTML"],Ye=F({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(U,{emit:L}){const m=U,h=L,p=N().state,$=p.langs,_=x(!1);O(()=>m.show,y=>{_.value=y},{deep:!0});const n=()=>{const y=S.Loading();B.Post("erp_base_supplier/export?lang="+p.lang,{token:p.token,data:m.data,order:m.order},d=>{y.clear();const{code:r,msg:w,data:b}=d.data;S.Toast(w),r==0&&ie.Down(b.path+b.filename,b.filename),h("submit",r==0)})},l=()=>{h("update:show",!1)};return(y,d)=>(C(),R(V,{show:_.value,"onUpdate:show":d[1]||(d[1]=r=>_.value=r),title:U.title||T($).export,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=r=>l())},{bottom:u(()=>[i(P,{height:"40px",padding:"0 32px",onClick:d[0]||(d[0]=r=>n())},{default:u(()=>[A(g(T($).confirm),1)]),_:1})]),default:u(()=>[i(W,{lineHeight:"60px"},{default:u(()=>[s("span",{innerHTML:T($).export_warn(U.num)},null,8,he)]),_:1})]),_:1},8,["show","title"]))}}),Ae={class:"app_action flex"},Le={class:"app_action_tools scrollbar"},Pe={class:"app_action_search flex"},Be={class:"custom_time flex_center"},Me=["onClick"],Ee={class:"app_ct"},He={class:"tCenter"},Ie={class:"tCenter"},Fe={class:"tCenter"},Ne={key:0,class:"c_primary"},Re={key:1,class:"c_danger"},je={class:"tCenter"},Oe={key:1},Ve={class:"tCenter"},We={class:"app_page"},Qe=F({__name:"index",setup(U){const L=x(!1),m=x(),D=N().state,p=D.langs,$=ge.isAction,_=G.telEncode,n=G.cardEncode,l=x({show:!1,key:"",placeholder:"姓名、电话、收款信息",time:[f.Date("Y/m/d",f.StrToTime("-3 year")),f.Date("Y/m/d")],maxDate:f.Date("Y/m/d"),customTime:{active:"",list:[{label:"今天",value:"today"},{label:"昨天",value:"yesterday"},{label:"3个月",value:"month"},{label:"近1年",value:"year"}]},columns:[{label:"",value:"",slot:"customTime"},{label:p.select,value:"",slot:"time"},{label:"区域",value:"",slot:"city"},{label:"状态",value:"",slot:"state"},{label:"收款信息",value:"",slot:"istrue"},{label:"供应商ID, 多条空格分离",value:"",name:"supplier_id"},{label:"供应商名称",value:"",name:"name"},{label:"手机号码",value:"",name:"tel"},{label:"开户银行",value:"",name:"depositbank"},{label:"账户名称",value:"",name:"bankacount"},{label:"银行卡号",value:"",name:"acountnumber"},{label:"支付宝姓名",value:"",name:"alipay_name"},{label:"支付宝账号",value:"",name:"alipay_id"},{label:"备注",value:"",name:"remark"}],city:"",state:"",istrue:""}),y=x({time:"",list:{num:0}}),d=x({columns:[{title:"ID",slot:"id",width:"100px",textAlign:"center"},{title:p.date,index:"date",slot:"date",width:"90px",textAlign:"center"},{title:"供应商ID",index:"supplier_id",order:"",width:"80px"},{title:"供应商名称",index:"name",order:"",width:"120px"},{title:p.state,slot:"state",textAlign:"center",width:"60px",minWidth:"60px"},{title:p.action,slot:"action",textAlign:"center",width:"60px",minWidth:"60px"},{title:"手机号码",index:"tel",slot:"tel"},{title:"区域",slot:"city",textAlign:"center",width:"60px"},{title:"开户银行",index:"depositbank"},{title:"账户名称",index:"bankacount"},{title:"银行卡号",index:"acountnumber",slot:"acountnumber"},{title:"支付宝姓名",index:"alipay_name"},{title:"支付宝账号",index:"alipay_id"},{title:"备注",index:"remark"}],data:[],num:0,total:0,order:""}),r=x({total:0,num:1,limit:100}),w=x({show:!1,title:"添加/编辑",data:{}}),b=x({show:!1,title:"删除",data:[]}),a=x({show:!1,title:"导出",num:0}),o=x({city_name:[],state_name:[],pay_info:[{label:"有",value:"1"},{label:"无",value:"2"}]});de(()=>{D.token&&oe()}),re(()=>{L&&D.isLogin&&k()});const k=()=>{l.value.show=!1,d.value.data=[];const v=S.Loading();B.Post("erp_base_supplier/list?lang="+D.lang,{token:D.token,data:E(),page:r.value.num,limit:r.value.limit,order:d.value.order},e=>{v.clear();const{code:t,msg:c,data:H,time:j}=e.data;t==0?(y.value.time=j,d.value.data=H,z()):S.Toast(c)}),r.value.total=0,y.value.list.num=0,B.Post("erp_base_supplier/total?lang="+D.lang,{token:D.token,data:E()},e=>{const{code:t,msg:c,data:H,time:j}=e.data;t==0?(y.value.time=j,r.value.total=H.total,y.value.list.num=H.total):S.Toast(c)})},E=()=>{const v={key:l.value.key,stime:typeof l.value.time[0]=="string"?l.value.time[0]:f.Date("Y/m/d",l.value.time[0]),etime:typeof l.value.time[1]=="string"?l.value.time[1]:f.Date("Y/m/d",l.value.time[1]),city:l.value.city,state:l.value.state,istrue:l.value.istrue};for(let e of l.value.columns)e.name&&(v[e.name]=e.value);return v},Q=(v,e)=>{d.value.num=v,d.value.total=e},X=v=>{d.value.order=v,k()},Z=()=>{l.value.time=[f.Date("Y/m/d",f.StrToTime("-3 year")),f.Date("Y/m/d")],l.value.customTime.active="",l.value.key="",l.value.city="",l.value.state="",l.value.istrue="";for(let v of l.value.columns)v.value="";d.value.order="",r.value.num=1,k()},z=()=>{J(()=>{d.value.num=0,m.value.checkboxAll(!1)})},ee=v=>{switch(l.value.customTime.active=v,v){case"today":l.value.time=[f.Date("Y/m/d"),f.Date("Y/m/d")];break;case"yesterday":l.value.time=[f.Date("Y/m/d",f.StrToTime("-1 day")),f.Date("Y/m/d",f.StrToTime("-1 day"))];break;case"month":l.value.time=[f.Date("Y/m/d",f.StrToTime("-3 month")),f.Date("Y/m/d")];break;case"year":l.value.time=[f.Date("Y/m/d",f.StrToTime("-1 year")),f.Date("Y/m/d")];break}},K=(v,e={})=>{w.value.show=!0,w.value.data=e,w.value.data.type=v,v=="add"?w.value.title=p.add:v=="edit"&&(w.value.title=p.edit+"( "+e.id+" )")},te=v=>{v&&(w.value.show=!1,k())},ae=()=>{b.value.show=!0;const v=m.value.getData();let e=[];for(let t of v)e.push(t.id);b.value.data=e},le=v=>{v&&(b.value.show=!1,k())},se=v=>{a.value.show=!0,a.value.num=v},ne=v=>{v&&(a.value.show=!1,z())},oe=()=>{B.Post("erp_base_supplier/get_select?lang="+D.lang,{token:D.token},v=>{const{code:e,msg:t,data:c}=v.data;e==0?(o.value.city_name=c.city_name,o.value.state_name=c.state_name,L.value=!0):S.Toast(t)})};return(v,e)=>(C(),M(q,null,[i(ke,{time:y.value.time,onRefresh:e[0]||(e[0]=t=>k())},{default:u(()=>[e[24]||(e[24]=A(" 数量 ")),s("b",null,g(y.value.list.num),1)]),_:1},8,["time"]),s("div",Ae,[s("div",Le,[i(fe,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line"},{action:"export",slot:"export",is_action:!0}]},{add:u(()=>[i(P,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:e[1]||(e[1]=t=>K("add"))},{default:u(()=>[A(g(T(p).add),1)]),_:1})]),del:u(()=>[i(P,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:d.value.num==0,onClick:e[2]||(e[2]=t=>ae())},{default:u(()=>[A(g(T(p).del)+"("+g(d.value.num)+")",1)]),_:1},8,["disabled"])]),line:u(()=>e[25]||(e[25]=[s("span",{class:"line"},"|",-1)])),export:u(()=>[i(P,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!r.value.total,onClick:e[3]||(e[3]=t=>se(r.value.total))},{default:u(()=>[A(g(T(p).export)+"("+g(r.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),s("div",Pe,[i(ce,{show:l.value.show,"onUpdate:show":e[8]||(e[8]=t=>l.value.show=t),keys:l.value.key,"onUpdate:keys":e[9]||(e[9]=t=>l.value.key=t),columns:l.value.columns,placeholder:l.value.placeholder,onKeyup:e[10]||(e[10]=ve(t=>{r.value.num=1,k()},["enter"])),onSearch:e[11]||(e[11]=t=>{r.value.num=1,k()}),onReset:e[12]||(e[12]=t=>Z())},{customTime:u(t=>[s("ul",Be,[(C(!0),M(q,null,pe(l.value.customTime.list,c=>(C(),M("li",{key:c.value,onClick:H=>ee(c.value),class:be({active:l.value.customTime.active===c.value})},g(c.label),11,Me))),128))])]),time:u(t=>[i(me,{value:l.value.time,"onUpdate:value":e[4]||(e[4]=c=>l.value.time=c),range:"",maxDate:l.value.maxDate,placeholder:t.label},null,8,["value","maxDate","placeholder"])]),city:u(t=>[i(I,{value:l.value.city,"onUpdate:value":e[5]||(e[5]=c=>l.value.city=c),options:o.value.city_name,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),state:u(t=>[i(I,{value:l.value.state,"onUpdate:value":e[6]||(e[6]=c=>l.value.state=c),options:o.value.state_name,placeholder:t.label,clearable:""},null,8,["value","options","placeholder"])]),istrue:u(t=>[i(I,{value:l.value.istrue,"onUpdate:value":e[7]||(e[7]=c=>l.value.istrue=c),options:o.value.pay_info,placeholder:t.label,clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns","placeholder"])])]),s("div",Ee,[i(ye,{ref_key:"tableList",ref:m,overflow:"auto",columns:d.value.columns,options:d.value.data,onOrderBy:X,onPartially:Q},{id:u(t=>[s("div",He,g(t.id),1)]),date:u(t=>[s("div",Ie,[i(xe,{title:"创建: "+t.ctime+`
更新: `+t.utime+`
操作员: `+t.operator_name},{default:u(()=>[A(g(t.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),state:u(t=>[s("div",Fe,[t.state?(C(),M("span",Ne,"正常")):(C(),M("span",Re,"禁用"))])]),action:u(t=>[s("div",je,[T($)("save")?(C(),R(P,{key:0,onClick:c=>K("edit",t)},{default:u(()=>[A(g(T(p).edit),1)]),_:2},1032,["onClick"])):(C(),M("span",Oe,"-"))])]),city:u(t=>[s("div",Ve,g(t.city),1)]),tel:u(t=>[s("div",null,g(T(_)(t.tel)),1)]),acountnumber:u(t=>[s("div",null,g(T(n)(t.acountnumber)),1)]),_:1},8,["columns","options"])]),s("div",We,[i(we,{total:r.value.total,"onUpdate:total":e[13]||(e[13]=t=>r.value.total=t),page:r.value.num,"onUpdate:page":[e[14]||(e[14]=t=>r.value.num=t),e[15]||(e[15]=t=>k())],limit:r.value.limit,"onUpdate:limit":[e[16]||(e[16]=t=>r.value.limit=t),e[17]||(e[17]=t=>{r.value.num=1,k()})]},null,8,["total","page","limit"])]),i(Ue,{show:w.value.show,"onUpdate:show":e[18]||(e[18]=t=>w.value.show=t),title:w.value.title,data:w.value.data,onSubmit:e[19]||(e[19]=t=>te(t))},null,8,["show","title","data"]),i(Ce,{show:b.value.show,"onUpdate:show":e[20]||(e[20]=t=>b.value.show=t),data:b.value.data,onSubmit:e[21]||(e[21]=t=>le(t))},null,8,["show","data"]),i(Ye,{show:a.value.show,"onUpdate:show":e[22]||(e[22]=t=>a.value.show=t),data:E(),order:d.value.order,num:a.value.num,onSubmit:e[23]||(e[23]=t=>ne(t))},null,8,["show","data","order","num"])],64))}});export{Qe as default};
