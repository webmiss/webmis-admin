import{d as H,u as M,r as _,w as j,c as W,a as s,e as F,f as u,l as C,h as at,i as l,t as g,b as x,j as B,k as O,m as A,U as b,R as L,o as D,G as K,_ as q,F as lt,y as st,z as ot,n as E,D as nt,E as it,s as dt,x as ut,I as rt}from"./index--Aaw8Kh1.js";import{c as G,w as vt,a as mt,b as pt,P as ct}from"./Search-DMryvUDg.js";import{w as ft}from"./Total-C1JsSOot.js";import{w as wt}from"./index-9lX5YKhj.js";import{w as gt}from"./index-Bf39PfWh.js";const xt={class:"label"},_t={class:"red_dot"},bt={colspan:"3"},ht={style:{width:"30%"}},kt={class:"label"},yt={class:"red_dot"},$t={colspan:"3"},St={colspan:"3"},Ct={colspan:"3"},Tt={class:"label"},Ut={colspan:"3"},At=H({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup($,{emit:T}){const c=$,S=T,i=M().state,h=i.langs,r=_(!1),o=_({id:0,state:!0,class:"",sort:"0",name:"",value:"",rule:"",remark:""}),w=_({city_name:[],class_name:[]});j(()=>c.show,p=>{r.value=p,p&&(o.value.id=c.data.id||0,o.value.state=typeof c.data.state<"u"?c.data.state:!0,o.value.sort=c.data.sort||"0",o.value.name=c.data.name||"",o.value.value=c.data.value||"",o.value.rule=c.data.rule||"",o.value.remark=c.data.remark||"",n())},{deep:!0});const n=()=>{o.value.class=[],L.Post("erp_base_brand/get_select?lang="+i.lang,{token:i.token},p=>{const{code:a,msg:m,data:P}=p.data;a==0?(w.value.class_name=P.class_name,K(()=>{o.value.class=typeof c.data.class<"u"?[c.data.class]:""})):b.Toast(m)})},d=p=>p.class.length<1?b.Toast("请选择分类"):isNaN(p.sort)?b.Toast("请输入排序数字"):p.name.length<2||p.name.length>16?b.Toast("名称2～16字符!"):p.value.length<2||p.value.length>64?b.Toast("值2～64字符!"):p,f=()=>{const p=d(o.value);if(!p)return;const a=b.Loading();L.Post("erp_base_brand/save?lang="+i.lang,{token:i.token,data:p},m=>{a.clear();const{code:P,msg:N}=m.data;b.Toast(N),S("submit",P==0)})},y=()=>{S("update:show",!1)};return(p,a)=>(D(),W(F,{show:r.value,"onUpdate:show":a[8]||(a[8]=m=>r.value=m),title:$.title,width:"720px",bottom:"40px",onClose:a[9]||(a[9]=m=>y())},{bottom:s(()=>[u(A,{height:"40px",padding:"0 32px",onClick:a[7]||(a[7]=m=>f())},{default:s(()=>[C(g(x(h).confirm),1)]),_:1})]),default:s(()=>[u(wt,null,{default:s(()=>a[10]||(a[10]=[C("提示: 请认证填写如下信息")])),_:1}),u(O,null,{default:s(()=>[u(at,null,{default:s(()=>[l("tr",null,[l("td",xt,[l("span",_t,g(x(h).status),1)]),l("td",bt,[u(gt,{value:o.value.state,"onUpdate:value":a[0]||(a[0]=m=>o.value.state=m)},null,8,["value"])])]),l("tr",null,[a[11]||(a[11]=l("td",{class:"label"},[l("span",{class:"red_dot"},"分类")],-1)),l("td",null,[u(G,{value:o.value.class,"onUpdate:value":a[1]||(a[1]=m=>o.value.class=m),options:w.value.class_name},null,8,["value","options"])]),a[12]||(a[12]=l("td",{class:"label"},[l("span",{class:"red_dot"},"排序")],-1)),l("td",ht,[u(B,{value:o.value.sort,"onUpdate:value":a[2]||(a[2]=m=>o.value.sort=m),maxlength:"4"},null,8,["value"])])]),l("tr",null,[l("td",kt,[l("span",yt,g(x(h).name),1)]),l("td",$t,[u(B,{value:o.value.name,"onUpdate:value":a[3]||(a[3]=m=>o.value.name=m),maxlength:"16"},null,8,["value"])])]),l("tr",null,[a[13]||(a[13]=l("td",{class:"label"},[l("span",{class:"red_dot"},"值")],-1)),l("td",St,[u(B,{value:o.value.value,"onUpdate:value":a[4]||(a[4]=m=>o.value.value=m),maxlength:"32"},null,8,["value"])])]),l("tr",null,[a[14]||(a[14]=l("td",{class:"label"},"编码正则",-1)),l("td",Ct,[u(B,{value:o.value.rule,"onUpdate:value":a[5]||(a[5]=m=>o.value.rule=m),maxlength:"128"},null,8,["value"])])]),l("tr",null,[l("td",Tt,g(x(h).remark),1),l("td",Ut,[u(B,{value:o.value.remark,"onUpdate:value":a[6]||(a[6]=m=>o.value.remark=m),type:"textarea",height:"80px",maxlength:"32"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Lt=q(At,[["__scopeId","data-v-5db90bc4"]]),Dt=["innerHTML"],Pt=H({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup($,{emit:T}){const c=$,S=T,i=M().state,h=i.langs,r=_(!1);j(()=>c.show,n=>{r.value=n},{deep:!0});const o=()=>{const n=b.Loading();L.Post("erp_base_brand/del?lang="+i.lang,{token:i.token,data:c.data},d=>{n.clear();const{code:f,msg:y}=d.data;b.Toast(y),S("submit",f==0)})},w=()=>{S("update:show",!1)};return(n,d)=>(D(),W(F,{show:r.value,"onUpdate:show":d[1]||(d[1]=f=>r.value=f),title:$.title||x(h).del,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=f=>w())},{bottom:s(()=>[u(A,{effect:"dark",type:"danger",height:"40px",onClick:d[0]||(d[0]=f=>o())},{default:s(()=>[C(g(x(h).confirm),1)]),_:1})]),default:s(()=>[u(O,{lineHeight:"60px"},{default:s(()=>[l("span",{innerHTML:x(h).del_warn($.data.length)},null,8,Dt)]),_:1})]),_:1},8,["show","title"]))}}),Bt=["innerHTML"],Ht=H({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup($,{emit:T}){const c=$,S=T,i=M().state,h=i.langs,r=_(!1);j(()=>c.show,n=>{r.value=n},{deep:!0});const o=()=>{const n=b.Loading();L.Post("erp_base_brand/export?lang="+i.lang,{token:i.token,data:c.data,order:c.order},d=>{n.clear();const{code:f,msg:y,data:p}=d.data;b.Toast(y),f==0&&lt.Down(p.path+p.filename,p.filename),S("submit",f==0)})},w=()=>{S("update:show",!1)};return(n,d)=>(D(),W(F,{show:r.value,"onUpdate:show":d[1]||(d[1]=f=>r.value=f),title:$.title||x(h).export,width:"360px",bottom:"40px",onClose:d[2]||(d[2]=f=>w())},{bottom:s(()=>[u(A,{height:"40px",padding:"0 32px",onClick:d[0]||(d[0]=f=>o())},{default:s(()=>[C(g(x(h).confirm),1)]),_:1})]),default:s(()=>[u(O,{lineHeight:"60px"},{default:s(()=>[l("span",{innerHTML:x(h).export_warn($.num)},null,8,Bt)]),_:1})]),_:1},8,["show","title"]))}}),Mt=["innerHTML"],Wt={class:"app_action flex"},Nt={class:"app_action_tools scrollbar"},It={class:"app_action_search flex"},Rt={class:"app_ct"},jt={class:"tCenter"},Ft={class:"tCenter"},Ot={class:"tCenter"},Vt={class:"tCenter"},zt={class:"tCenter"},Et={class:"tCenter"},Kt={key:1},qt={class:"tCenter"},Gt={class:"tCenter"},Jt={class:"app_page"},Qt=H({__name:"index",setup($){const T=_(!1),c=_(),k=M().state,i=k.langs,h=ct.isAction,r=_({show:!1,key:"",placeholder:"名称、备注",columns:[{label:"分类",value:"",slot:"class"},{label:i.name,value:"",name:"name"},{label:"制单员",value:"",name:"creator_name"},{label:"操作员",value:"",name:"operator_name"},{label:i.remark,value:"",name:"remark"}],class:""}),o=_({time:"",list:{}}),w=_({columns:[{title:"ID",index:"id",slot:"id",order:"",width:"80px",minWidth:"60px",textAlign:"center"},{title:i.date,slot:"date",textAlign:"center",width:"120px",minWidth:"110px"},{title:"分类",slot:"class",index:"class",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"品牌",index:"name",order:"",width:"80px",minWidth:"80px"},{title:"值",index:"value",order:"",width:"120px",minWidth:"80px"},{title:"排序",slot:"sort",textAlign:"center",width:"60px",minWidth:"60px"},{title:i.status,index:"state",slot:"state",width:"60px",textAlign:"center"},{title:i.action,slot:"action",textAlign:"center",width:"90px"},{title:"制单员",slot:"creator_name",textAlign:"center",width:"90px"},{title:"操作员",slot:"operator_name",textAlign:"center",width:"90px"},{title:"编码正则",index:"rule",textAlign:"center",width:"120px"},{title:i.remark,index:"remark"}],data:[],num:0,total:0,order:""}),n=_({total:0,num:1,limit:100}),d=_({show:!1,title:"添加/编辑",data:{}}),f=_({show:!1,title:"删除",data:[]}),y=_({show:!1,title:"导出",num:0}),p=_({class_name:[]});st(()=>{k.token&&et()}),ot(()=>{T&&k.isLogin&&a()});const a=()=>{r.value.show=!1,w.value.data=[];const v=b.Loading();L.Post("erp_base_brand/list?lang="+k.lang,{token:k.token,data:m(),page:n.value.num,limit:n.value.limit,order:w.value.order},t=>{v.clear();const{code:e,msg:U,time:I,data:R}=t.data;e===0?(o.value.time=I,w.value.data=R,V()):b.Toast(U)}),n.value.total=0,L.Post("erp_base_brand/total?lang="+k.lang,{token:k.token,data:m()},t=>{const{code:e,msg:U,time:I,data:R}=t.data;e==0?(o.value.time=I,n.value.total=R.total):b.Toast(U)})},m=()=>{const v={key:r.value.key,class:r.value.class};for(let t of r.value.columns)t.name&&(v[t.name]=t.value);return v},P=(v,t)=>{w.value.num=v,w.value.total=t},N=v=>{w.value.order=v,a()},J=()=>{r.value.key="",r.value.class="";for(let v of r.value.columns)v.value="";w.value.order="",n.value.num=1,a()},V=()=>{K(()=>{w.value.num=0,c.value.checkboxAll(!1)})},z=(v,t={})=>{d.value.show=!0,d.value.data=t,v=="add"?d.value.title=i.add:v=="edit"&&(d.value.title=i.edit+"( "+t.name+" )")},Q=v=>{v&&(d.value.show=!1,a())},X=()=>{f.value.show=!0;const v=c.value.getData();let t=[];for(let e of v)t.push(e.id);f.value.data=t},Y=v=>{v&&(f.value.show=!1,a())},Z=v=>{y.value.show=!0,y.value.num=v},tt=v=>{v&&(y.value.show=!1,V())},et=()=>{L.Post("erp_base_brand/get_select?lang="+k.lang,{token:k.token},v=>{const{code:t,msg:e,data:U}=v.data;t==0?(p.value.class_name=U.class_name,T.value=!0):b.Toast(e)})};return(v,t)=>(D(),E(dt,null,[u(ft,{time:o.value.time,onRefresh:t[0]||(t[0]=e=>a())},{default:s(()=>[l("span",{innerHTML:x(i).sys_role_total(n.value.total)},null,8,Mt)]),_:1},8,["time"]),l("div",Wt,[l("div",Nt,[u(vt,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line"},{action:"export",slot:"export",is_action:!0}]},{add:s(()=>[u(A,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:t[1]||(t[1]=e=>z("add"))},{default:s(()=>[C(g(x(i).add),1)]),_:1})]),del:s(()=>[u(A,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:w.value.num==0,onClick:t[2]||(t[2]=e=>X())},{default:s(()=>[C(g(x(i).del)+"("+g(w.value.num)+")",1)]),_:1},8,["disabled"])]),line:s(()=>t[21]||(t[21]=[l("span",{class:"line"},"|",-1)])),export:s(()=>[u(A,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!n.value.total,onClick:t[3]||(t[3]=e=>Z(n.value.total))},{default:s(()=>[C(g(x(i).export)+"("+g(n.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),l("div",It,[u(mt,{show:r.value.show,"onUpdate:show":t[5]||(t[5]=e=>r.value.show=e),keys:r.value.key,"onUpdate:keys":t[6]||(t[6]=e=>r.value.key=e),columns:r.value.columns,onKeyup:t[7]||(t[7]=nt(e=>{n.value.num=1,a()},["enter"])),onSearch:t[8]||(t[8]=e=>{n.value.num=1,a()}),onReset:t[9]||(t[9]=e=>J())},{class:s(e=>[u(G,{value:r.value.class,"onUpdate:value":t[4]||(t[4]=U=>r.value.class=U),options:p.value.class_name,placeholder:e.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns"])])]),l("div",Rt,[u(it,{ref_key:"tableList",ref:c,overflow:"auto",columns:w.value.columns,options:w.value.data,onOrderBy:N,onPartially:P},{id:s(e=>[l("div",jt,g(e.id),1)]),date:s(e=>[l("div",Ft,[u(rt,{title:"创建: "+e.ctime+`
更新: `+e.utime},{default:s(()=>[C(g(e.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),class:s(e=>[l("div",Ot,g(e.class),1)]),sort:s(e=>[l("div",Vt,g(e.sort),1)]),state:s(e=>[l("div",zt,[l("span",{class:ut(e.state?"c_success":"c_danger")},g(e.state?x(i).enable:x(i).disable),3)])]),action:s(e=>[l("div",Et,[x(h)("save")?(D(),W(A,{key:0,onClick:U=>z("edit",e)},{default:s(()=>[C(g(x(i).edit),1)]),_:2},1032,["onClick"])):(D(),E("span",Kt,"-"))])]),creator_name:s(e=>[l("div",qt,g(e.creator_name),1)]),operator_name:s(e=>[l("div",Gt,g(e.operator_name),1)]),_:1},8,["columns","options"])]),l("div",Jt,[u(pt,{total:n.value.total,"onUpdate:total":t[10]||(t[10]=e=>n.value.total=e),page:n.value.num,"onUpdate:page":[t[11]||(t[11]=e=>n.value.num=e),t[12]||(t[12]=e=>a())],limit:n.value.limit,"onUpdate:limit":[t[13]||(t[13]=e=>n.value.limit=e),t[14]||(t[14]=e=>{n.value.num=1,a()})]},null,8,["total","page","limit"])]),u(Lt,{show:d.value.show,"onUpdate:show":t[15]||(t[15]=e=>d.value.show=e),title:d.value.title,data:d.value.data,onSubmit:t[16]||(t[16]=e=>Q(e))},null,8,["show","title","data"]),u(Pt,{show:f.value.show,"onUpdate:show":t[17]||(t[17]=e=>f.value.show=e),data:f.value.data,onSubmit:t[18]||(t[18]=e=>Y(e))},null,8,["show","data"]),u(Ht,{show:y.value.show,"onUpdate:show":t[19]||(t[19]=e=>y.value.show=e),data:m(),order:w.value.order,num:y.value.num,onSubmit:t[20]||(t[20]=e=>tt(e))},null,8,["show","data","order","num"])],64))}}),ae=q(Qt,[["__scopeId","data-v-aa48aa8c"]]);export{ae as default};
