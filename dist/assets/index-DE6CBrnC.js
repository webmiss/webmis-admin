import{d as I,u as M,r as x,w as F,c as W,a as l,e as O,f as d,l as U,h as st,i as a,t as _,b as g,j as H,k as V,m as A,U as y,R as L,o as P,G,_ as J,F as lt,y as ot,z as nt,n as K,D as ut,E as it,s as dt,x as q,I as rt}from"./index-BbMabsSy.js";import{c as B,w as pt,a as mt,b as vt,P as ct}from"./Search-x-OIRsik.js";import{w as ft}from"./Total-DlGa2cZp.js";import{w as wt}from"./index-BPQFzHID.js";import{w as _t}from"./index-DLGXwKSF.js";const gt={class:"label"},xt={class:"red_dot"},yt={colspan:"3"},bt={class:"label"},ht={class:"red_dot"},kt={colspan:"3"},$t={class:"label"},Ct={colspan:"3"},St=I({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(C,{emit:T}){const c=C,S=T,u=M().state,b=u.langs,o=x(!1),n=x({id:0,status:!0,type:"",class:"",sort:"0",wms_co_id:"",name:"",remark:""}),f=x({type_name:[],class_name:[]});F(()=>c.show,p=>{o.value=p,p&&(n.value.id=c.data.id||0,n.value.status=typeof c.data.status<"u"?c.data.status:!0,n.value.sort=c.data.sort||"0",n.value.wms_co_id=c.data.wms_co_id||"",n.value.name=c.data.name||"",n.value.remark=c.data.remark||"",i())},{deep:!0});const i=()=>{n.value.type=[],n.value.class=[],L.Post("erp_base_partner/get_select?lang="+u.lang,{token:u.token},p=>{const{code:s,msg:v,data:D}=p.data;s==0?(f.value.type_name=D.type_name,f.value.class_name=D.class_name,G(()=>{n.value.type=typeof c.data.type<"u"?[parseInt(c.data.type)]:"",n.value.class=typeof c.data.class<"u"?[c.data.class]:""})):y.Toast(v)})},r=p=>p.type.length<1?y.Toast("请选择城市"):p.class.length<1?y.Toast("请选择分类"):isNaN(p.sort)?y.Toast("请输入排序数字"):p.name.length<2||p.name.length>32?y.Toast("名称2～32字符!"):p,w=()=>{const p=r(n.value);if(!p)return;const s=y.Loading();L.Post("erp_base_partner/save?lang="+u.lang,{token:u.token,data:p},v=>{s.clear();const{code:D,msg:N}=v.data;y.Toast(N),S("submit",D==0)})},$=()=>{S("update:show",!1)};return(p,s)=>(P(),W(O,{show:o.value,"onUpdate:show":s[8]||(s[8]=v=>o.value=v),title:C.title,width:"720px",bottom:"40px",onClose:s[9]||(s[9]=v=>$())},{bottom:l(()=>[d(A,{height:"40px",padding:"0 32px",onClick:s[7]||(s[7]=v=>w())},{default:l(()=>[U(_(g(b).confirm),1)]),_:1})]),default:l(()=>[d(wt,null,{default:l(()=>s[10]||(s[10]=[U("提示: 请认证填写如下信息")])),_:1}),d(V,null,{default:l(()=>[d(st,null,{default:l(()=>[a("tr",null,[a("td",gt,[a("span",xt,_(g(b).status),1)]),a("td",yt,[d(_t,{value:n.value.status,"onUpdate:value":s[0]||(s[0]=v=>n.value.status=v)},null,8,["value"])])]),a("tr",null,[s[11]||(s[11]=a("td",{class:"label"},[a("span",{class:"red_dot"},"类型")],-1)),a("td",null,[d(B,{value:n.value.type,"onUpdate:value":s[1]||(s[1]=v=>n.value.type=v),options:f.value.type_name},null,8,["value","options"])]),s[12]||(s[12]=a("td",{class:"label"},[a("span",{class:"red_dot"},"分类")],-1)),a("td",null,[d(B,{value:n.value.class,"onUpdate:value":s[2]||(s[2]=v=>n.value.class=v),options:f.value.class_name},null,8,["value","options"])])]),a("tr",null,[s[13]||(s[13]=a("td",{class:"label"},[a("span",{class:"red_dot"},"分仓ID")],-1)),a("td",null,[d(H,{value:n.value.wms_co_id,"onUpdate:value":s[3]||(s[3]=v=>n.value.wms_co_id=v),maxlength:"8"},null,8,["value"])]),s[14]||(s[14]=a("td",{class:"label"},[a("span",{class:"red_dot"},"排序")],-1)),a("td",null,[d(H,{value:n.value.sort,"onUpdate:value":s[4]||(s[4]=v=>n.value.sort=v),maxlength:"4"},null,8,["value"])])]),a("tr",null,[a("td",bt,[a("span",ht,_(g(b).name),1)]),a("td",kt,[d(H,{value:n.value.name,"onUpdate:value":s[5]||(s[5]=v=>n.value.name=v),maxlength:"32"},null,8,["value"])])]),a("tr",null,[a("td",$t,_(g(b).remark),1),a("td",Ct,[d(H,{value:n.value.remark,"onUpdate:value":s[6]||(s[6]=v=>n.value.remark=v),type:"textarea",height:"80px",maxlength:"32"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Ut=J(St,[["__scopeId","data-v-7606f6dc"]]),Tt=["innerHTML"],At=I({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(C,{emit:T}){const c=C,S=T,u=M().state,b=u.langs,o=x(!1);F(()=>c.show,i=>{o.value=i},{deep:!0});const n=()=>{const i=y.Loading();L.Post("erp_base_partner/del?lang="+u.lang,{token:u.token,data:c.data},r=>{i.clear();const{code:w,msg:$}=r.data;y.Toast($),S("submit",w==0)})},f=()=>{S("update:show",!1)};return(i,r)=>(P(),W(O,{show:o.value,"onUpdate:show":r[1]||(r[1]=w=>o.value=w),title:C.title||g(b).del,width:"360px",bottom:"40px",onClose:r[2]||(r[2]=w=>f())},{bottom:l(()=>[d(A,{effect:"dark",type:"danger",height:"40px",onClick:r[0]||(r[0]=w=>n())},{default:l(()=>[U(_(g(b).confirm),1)]),_:1})]),default:l(()=>[d(V,{lineHeight:"60px"},{default:l(()=>[a("span",{innerHTML:g(b).del_warn(C.data.length)},null,8,Tt)]),_:1})]),_:1},8,["show","title"]))}}),Lt=["innerHTML"],Dt=I({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(C,{emit:T}){const c=C,S=T,u=M().state,b=u.langs,o=x(!1);F(()=>c.show,i=>{o.value=i},{deep:!0});const n=()=>{const i=y.Loading();L.Post("erp_base_partner/export?lang="+u.lang,{token:u.token,data:c.data,order:c.order},r=>{i.clear();const{code:w,msg:$,data:p}=r.data;y.Toast($),w==0&&lt.Down(p.path+p.filename,p.filename),S("submit",w==0)})},f=()=>{S("update:show",!1)};return(i,r)=>(P(),W(O,{show:o.value,"onUpdate:show":r[1]||(r[1]=w=>o.value=w),title:C.title||g(b).export,width:"360px",bottom:"40px",onClose:r[2]||(r[2]=w=>f())},{bottom:l(()=>[d(A,{height:"40px",padding:"0 32px",onClick:r[0]||(r[0]=w=>n())},{default:l(()=>[U(_(g(b).confirm),1)]),_:1})]),default:l(()=>[d(V,{lineHeight:"60px"},{default:l(()=>[a("span",{innerHTML:g(b).export_warn(C.num)},null,8,Lt)]),_:1})]),_:1},8,["show","title"]))}}),Pt=["innerHTML"],Bt={class:"app_action flex"},Ht={class:"app_action_tools scrollbar"},It={class:"app_action_search flex"},Mt={class:"app_ct"},Wt={class:"tCenter"},Nt={class:"tCenter"},Rt={class:"tCenter"},jt={class:"tCenter"},Ft={class:"tCenter"},Ot={class:"tCenter"},Vt={class:"tCenter"},zt={key:1},Et={class:"tCenter"},Kt={class:"tCenter"},qt={class:"app_page"},Gt=I({__name:"index",setup(C){const T=x(!1),c=x(),k=M().state,u=k.langs,b=ct.isAction,o=x({show:!1,key:"",placeholder:"名称、备注",columns:[{label:"类型",value:"",slot:"type"},{label:"分类",value:"",slot:"class"},{label:"状态",value:"",slot:"status"},{label:u.name,value:"",name:"name"},{label:"制单员",value:"",name:"creator_name"},{label:"操作员",value:"",name:"operator_name"},{label:u.remark,value:"",name:"remark"}],type:"",class:"",status:""}),n=x({time:"",list:{}}),f=x({columns:[{title:"ID",index:"id",slot:"id",order:"",width:"80px",minWidth:"60px",textAlign:"center"},{title:"类型",slot:"type",index:"type",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:u.date,slot:"date",textAlign:"center",width:"120px",minWidth:"110px"},{title:"分类",slot:"class",index:"class",order:"",textAlign:"center",width:"60px",minWidth:"60px"},{title:"分仓ID",slot:"wms_co_id",index:"wms_co_id",order:"",width:"100px",minWidth:"100px"},{title:u.name,index:"name",order:"",width:"120px",minWidth:"80px"},{title:"排序",slot:"sort",textAlign:"center",width:"60px",minWidth:"60px"},{title:u.status,index:"status",slot:"status",width:"60px",textAlign:"center"},{title:u.action,slot:"action",textAlign:"center",width:"90px"},{title:"制单员",slot:"creator_name",textAlign:"center",width:"90px"},{title:"操作员",slot:"operator_name",textAlign:"center",width:"90px"},{title:u.remark,index:"remark"}],data:[],num:0,total:0,order:""}),i=x({total:0,num:1,limit:100}),r=x({show:!1,title:"添加/编辑",data:{}}),w=x({show:!1,title:"删除",data:[]}),$=x({show:!1,title:"导出",num:0}),p=x({type_name:[],class_name:[],status_name:[]});ot(()=>{k.token&&at()}),nt(()=>{T&&k.isLogin&&s()});const s=()=>{o.value.show=!1,f.value.data=[];const m=y.Loading();L.Post("erp_base_partner/list?lang="+k.lang,{token:k.token,data:v(),page:i.value.num,limit:i.value.limit,order:f.value.order},e=>{m.clear();const{code:t,msg:h,time:R,data:j}=e.data;t===0?(n.value.time=R,f.value.data=j,z()):y.Toast(h)}),i.value.total=0,L.Post("erp_base_partner/total?lang="+k.lang,{token:k.token,data:v()},e=>{const{code:t,msg:h,time:R,data:j}=e.data;t==0?(n.value.time=R,i.value.total=j.total):y.Toast(h)})},v=()=>{const m={key:o.value.key,type:o.value.type,class:o.value.class,status:o.value.status};for(let e of o.value.columns)e.name&&(m[e.name]=e.value);return m},D=(m,e)=>{f.value.num=m,f.value.total=e},N=m=>{f.value.order=m,s()},Q=()=>{o.value.key="",o.value.type="",o.value.class="",o.value.status="";for(let m of o.value.columns)m.value="";f.value.order="",i.value.num=1,s()},z=()=>{G(()=>{f.value.num=0,c.value.checkboxAll(!1)})},E=(m,e={})=>{r.value.show=!0,r.value.data=e,m=="add"?r.value.title=u.add:m=="edit"&&(r.value.title=u.edit+"( "+e.name+" )")},X=m=>{m&&(r.value.show=!1,s())},Y=()=>{w.value.show=!0;const m=c.value.getData();let e=[];for(let t of m)e.push(t.id);w.value.data=e},Z=m=>{m&&(w.value.show=!1,s())},tt=m=>{$.value.show=!0,$.value.num=m},et=m=>{m&&($.value.show=!1,z())},at=()=>{L.Post("erp_base_partner/get_select?lang="+k.lang,{token:k.token},m=>{const{code:e,msg:t,data:h}=m.data;e==0?(p.value.type_name=h.type_name,p.value.class_name=h.class_name,p.value.status_name=h.status_name,T.value=!0):y.Toast(t)})};return(m,e)=>(P(),K(dt,null,[d(ft,{time:n.value.time,onRefresh:e[0]||(e[0]=t=>s())},{default:l(()=>[a("span",{innerHTML:g(u).sys_role_total(i.value.total)},null,8,Pt)]),_:1},8,["time"]),a("div",Bt,[a("div",Ht,[d(pt,{columns:[{action:"save",slot:"add",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line1"},{action:"export",slot:"export",is_action:!0}]},{add:l(()=>[d(A,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:e[1]||(e[1]=t=>E("add"))},{default:l(()=>[U(_(g(u).add),1)]),_:1})]),del:l(()=>[d(A,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:f.value.num==0,onClick:e[2]||(e[2]=t=>Y())},{default:l(()=>[U(_(g(u).del)+"("+_(f.value.num)+")",1)]),_:1},8,["disabled"])]),line1:l(()=>e[23]||(e[23]=[a("span",{class:"line"},"|",-1)])),export:l(()=>[d(A,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!i.value.total,onClick:e[3]||(e[3]=t=>tt(i.value.total))},{default:l(()=>[U(_(g(u).export)+"("+_(i.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),a("div",It,[d(mt,{show:o.value.show,"onUpdate:show":e[7]||(e[7]=t=>o.value.show=t),keys:o.value.key,"onUpdate:keys":e[8]||(e[8]=t=>o.value.key=t),columns:o.value.columns,onKeyup:e[9]||(e[9]=ut(t=>{i.value.num=1,s()},["enter"])),onSearch:e[10]||(e[10]=t=>{i.value.num=1,s()}),onReset:e[11]||(e[11]=t=>Q())},{type:l(t=>[d(B,{value:o.value.type,"onUpdate:value":e[4]||(e[4]=h=>o.value.type=h),options:p.value.type_name,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),class:l(t=>[d(B,{value:o.value.class,"onUpdate:value":e[5]||(e[5]=h=>o.value.class=h),options:p.value.class_name,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),status:l(t=>[d(B,{value:o.value.status,"onUpdate:value":e[6]||(e[6]=h=>o.value.status=h),options:p.value.status_name,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),_:1},8,["show","keys","columns"])])]),a("div",Mt,[d(it,{ref_key:"tableList",ref:c,overflow:"auto",columns:f.value.columns,options:f.value.data,onOrderBy:N,onPartially:D},{id:l(t=>[a("div",Wt,_(t.id),1)]),type:l(t=>[a("div",{class:q(["tCenter",t.type=="0"?"c_primary":"c_info"])},_(t.type_name),3)]),date:l(t=>[a("div",Nt,[d(rt,{title:"创建: "+t.ctime+`
更新: `+t.utime},{default:l(()=>[U(_(t.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),class:l(t=>[a("div",Rt,_(t.class),1)]),wms_co_id:l(t=>[a("div",jt,[a("b",null,_(t.wms_co_id),1)])]),sort:l(t=>[a("div",Ft,_(t.sort),1)]),status:l(t=>[a("div",Ot,[a("span",{class:q(t.status?"c_success":"c_danger")},_(t.status?g(u).enable:g(u).disable),3)])]),action:l(t=>[a("div",Vt,[g(b)("save")?(P(),W(A,{key:0,onClick:h=>E("edit",t)},{default:l(()=>[U(_(g(u).edit),1)]),_:2},1032,["onClick"])):(P(),K("span",zt,"-"))])]),creator_name:l(t=>[a("div",Et,_(t.creator_name),1)]),operator_name:l(t=>[a("div",Kt,_(t.operator_name),1)]),_:1},8,["columns","options"])]),a("div",qt,[d(vt,{total:i.value.total,"onUpdate:total":e[12]||(e[12]=t=>i.value.total=t),page:i.value.num,"onUpdate:page":[e[13]||(e[13]=t=>i.value.num=t),e[14]||(e[14]=t=>s())],limit:i.value.limit,"onUpdate:limit":[e[15]||(e[15]=t=>i.value.limit=t),e[16]||(e[16]=t=>{i.value.num=1,s()})]},null,8,["total","page","limit"])]),d(Ut,{show:r.value.show,"onUpdate:show":e[17]||(e[17]=t=>r.value.show=t),title:r.value.title,data:r.value.data,onSubmit:e[18]||(e[18]=t=>X(t))},null,8,["show","title","data"]),d(At,{show:w.value.show,"onUpdate:show":e[19]||(e[19]=t=>w.value.show=t),data:w.value.data,onSubmit:e[20]||(e[20]=t=>Z(t))},null,8,["show","data"]),d(Dt,{show:$.value.show,"onUpdate:show":e[21]||(e[21]=t=>$.value.show=t),data:v(),order:f.value.order,num:$.value.num,onSubmit:e[22]||(e[22]=t=>et(t))},null,8,["show","data","order","num"])],64))}}),te=J(Gt,[["__scopeId","data-v-f19eeb18"]]);export{te as default};
