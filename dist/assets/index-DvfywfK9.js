import{g as _}from"./index-D22QXqxK.js";import{d as P,r as A,w as E,n as s,s as b,v as w,i as c,B as v,f as x,p as o,x as U,t as C,o as u,_ as F}from"./index-BwgMPi_2.js";const I=["onClick"],T={class:"label"},j=["onClick"],q={class:"label"},G=["onClick"],H={class:"label"},J={class:"label"},K=P({__name:"index",props:{options:{type:Array,default:[]},width:{type:String,default:"100%"},padding:{type:String,default:"2px 0"},level:{type:Number,default:3}},emits:["update:value","data"],setup(f,{emit:D}){const V=f,B=D,r=A([]);E(()=>V.options,t=>{r.value=t,L()},{deep:!0});const k=(t,a,e,n=!0)=>{let l,d,i,y;a=="1"?(l=r.value[e[0]],l.checked=!!t,l.children&&m(l.children,!!t)):a=="2"?(d=r.value[e[0]].children[e[1]],d.checked=!!t,d.children&&m(d.children,!!t),l=r.value[e[0]],p(l)):a=="3"?(i=r.value[e[0]].children[e[1]].children[e[2]],i.checked=!!t,i.children&&m(i.children,!!t),l=r.value[e[0]],d=r.value[e[0]].children[e[1]],p(d),p(l)):a=="4"&&(y=r.value[e[0]].children[e[1]].children[e[2]].children[e[3]],y.checked=!!t,l=r.value[e[0]],d=r.value[e[0]].children[e[1]],i=r.value[e[0]].children[e[1]].children[e[2]],p(i),p(d),p(l)),L(),n&&(B("update:value",$()),B("data",r.value))},p=t=>{let a=N(t.children);a==0?t.checked=!1:(a==t.children.length,t.checked=!0)},m=(t,a)=>{for(let e in t)t[e].checked=a,t[e].children&&m(t[e].children,a)},L=()=>{let t=!1,a=!1,e=!1;for(let n of r.value)if(t=n.children?g(n.children):!1,n.partially=!!(n.checked&&t),!!n.children){for(let l of n.children)if(a=l.children?g(l.children):!1,l.partially=!!(l.checked&&a),!!l.children)for(let d of l.children)e=d.children?g(d.children):!1,d.partially=!!(d.checked&&e),d.children}},g=t=>{let a=!1;for(let e of t)if(e.children){if(a=g(e.children),a)return a}else if(N(t)!=t.length)return!0;return a},N=t=>{let a=0;for(let e of t)e.checked&&a++;return a},$=()=>{let t=[];for(let a of r.value)if(a.checked&&t.push(a.value),!!a.children){for(let e of a.children)if(e.checked&&t.push(e.value),!!e.children){for(let n of e.children)if(n.checked&&t.push(n.value),!!n.children)for(let l of n.children)l.checked&&t.push(l.value)}}return t};return(t,a)=>(u(),s("div",{class:"wm-tree_body",style:o({width:f.width})},[(u(!0),s(b,null,w(r.value,(e,n)=>(u(),s("div",{class:"wm-tree",key:n},[c("div",{class:"wm-tree_content flex_left",style:o({padding:f.padding,paddingLeft:"4px"}),onClick:l=>e.display=!e.display},[c("i",{class:U(e.children?"ui ui_arrow_right":""),style:o({transform:e.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:e.children&&e.checked&&e.partially,"onUpdate:value":l=>k(l,"1",[n,-1,-1,-1]),options:{label:"",value:e.value,checked:e.checked,disabled:e.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",T,C(e.label),1)],12,I),e.children&&e.display?(u(!0),s(b,{key:0},w(e.children,(l,d)=>(u(),s("div",{class:"wm-tree",key:d},[c("div",{class:"wm-tree_content flex_left",style:o({padding:f.padding,paddingLeft:"20px"}),onClick:i=>l.display=!l.display},[c("i",{class:U(l.children?"ui ui_arrow_right":""),style:o({transform:l.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:l.children&&l.checked&&l.partially,"onUpdate:value":i=>k(i,"2",[n,d,-1,-1]),options:{label:"",value:l.value,checked:l.checked,disabled:l.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",q,C(l.label),1)],12,j),l.children&&l.display?(u(!0),s(b,{key:0},w(l.children,(i,y)=>(u(),s("div",{class:"wm-tree",key:y},[c("div",{class:"wm-tree_content flex_left",style:o({padding:f.padding,paddingLeft:"36px"}),onClick:h=>i.display=!i.display},[c("i",{class:U(i.children?"ui ui_arrow_right":""),style:o({transform:i.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:i.children&&i.checked&&i.partially,"onUpdate:value":h=>k(h,"3",[n,d,y,-1]),options:{label:"",value:i.value,checked:i.checked,disabled:i.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",H,C(i.label),1)],12,G),i.children&&i.display?(u(!0),s(b,{key:0},w(i.children,(h,S)=>(u(),s("div",{class:"wm-tree",key:S},[c("div",{class:"wm-tree_content flex_left",style:o({padding:f.padding,paddingLeft:"52px"})},[a[0]||(a[0]=c("i",null,null,-1)),x(_,{"onUpdate:value":z=>k(z,"4",[n,d,y,S]),options:{label:"",value:h.value,checked:h.checked,disabled:h.disabled}},null,8,["onUpdate:value","options"]),c("span",J,C(h.label),1)],4)]))),128)):v("",!0)]))),128)):v("",!0)]))),128)):v("",!0)]))),128))],4))}}),Q=F(K,[["__scopeId","data-v-b4e16d8b"]]);export{Q as w};
