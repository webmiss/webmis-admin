import{d as X,u as Z,r as S,w as te,c as se,a as r,e as J,f as u,h as pe,i as e,t as p,n as C,k as Q,o as U,U as h,R as V,s as ne,j as g,K as z,m as I,l as k,b,G as re,F as ge,E as we,B as fe,M as ye,D as ke,L as he,N as le,O as Ue,P as $e,T as N,y as Ce,z as Te,A as Ae,H as Se,v as De,x as be,I as Le}from"./index-De4U6Qew.js";import{w as Re,a as Pe,b as Ye,P as We}from"./Search-BRk08DvK.js";import{w as Be}from"./index-DCH2wagm.js";import{w as Fe}from"./Total-DFmTiaob.js";import{w as xe}from"./index-DtELT80z.js";const Ne={key:0,class:"c_success"},Ie={key:1,class:"c_danger"},je={key:2},He={key:0},Me={key:1},Oe={class:"c_info"},Ve={class:"c_info"},Ee=X({__name:"SupplierInfo",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show"],setup(W,{emit:H}){const f=W,j=H,A=Z().state;A.langs;const D=S(!1),_=S({});te(()=>f.show,d=>{D.value=d,d&&l(f.data.supplier_name)});const l=d=>{if(!d)return h.Toast("请输入供应商名称");_.value={};const n=h.Loading();V.Post("erp_base_supplier/get_info?lang="+A.lang,{token:A.token,name:d},w=>{n.clear();const{code:y,msg:x,data:Y}=w.data;y==0?_.value=Y:h.Toast(x)})},T=()=>{j("update:show",!1)};return(d,n)=>(U(),se(J,{show:D.value,"onUpdate:show":n[0]||(n[0]=w=>D.value=w),title:W.title,width:"740px",onClose:n[1]||(n[1]=w=>T())},{default:r(()=>[u(Q,null,{default:r(()=>[u(pe,null,{default:r(()=>[e("tr",null,[n[2]||(n[2]=e("td",{class:"label"},"供应商名称",-1)),e("td",null,p(_.value.name||"-"),1),n[3]||(n[3]=e("td",{class:"label"},"状态",-1)),e("td",null,[_.value.state=="1"?(U(),C("span",Ne,"正常")):_.value.state=="0"?(U(),C("span",Ie,"禁用")):(U(),C("span",je,"-"))])]),e("tr",null,[n[4]||(n[4]=e("td",{class:"label"},"手机号码",-1)),e("td",null,[_.value.tel?(U(),C("b",He,p(_.value.tel||"-"),1)):(U(),C("span",Me,"-"))]),n[5]||(n[5]=e("td",{class:"label"},"供应商ID",-1)),e("td",null,p(_.value.supplier_id||"-"),1)]),e("tr",null,[n[6]||(n[6]=e("td",{class:"label"},"创建时间",-1)),e("td",Oe,p(_.value.ctime||"-"),1),n[7]||(n[7]=e("td",{class:"label"},"修改时间",-1)),e("td",Ve,p(_.value.utime||"-"),1)]),e("tr",null,[n[8]||(n[8]=e("td",{class:"label"},"开户银行",-1)),e("td",null,p(_.value.depositbank||"-"),1),n[9]||(n[9]=e("td",{class:"label"},"身份证号",-1)),e("td",null,p(_.value.id_card||"-"),1)]),e("tr",null,[n[10]||(n[10]=e("td",{class:"label"},"账户名称",-1)),e("td",null,p(_.value.bankacount||"-"),1),n[11]||(n[11]=e("td",{class:"label"},"银行卡号",-1)),e("td",null,p(_.value.acountnumber||"-"),1)]),e("tr",null,[n[12]||(n[12]=e("td",{class:"label"},"支付宝姓名",-1)),e("td",null,p(_.value.alipay_name||"-"),1),n[13]||(n[13]=e("td",{class:"label"},"支付宝账号",-1)),e("td",null,p(_.value.alipay_id||"-"),1)])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Ke=X({__name:"save",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(W,{emit:H}){const f=W,j=H,A=Z().state,D=A.langs,_=S(!1),l=S({type:"",ids:[],sku_id:"",name:"",properties_value:"",short_name:"",unit:"",weight:"",num:"",owner:"",i_id:"",supplier_name:"",cost_price:"",supply_price:"",sale_price:"",supplier_price:"",purchase_price:"",market_price:"",other_price:"",other_price1:"",ratio:"",ratio_cost:"",ratio_purchase:"",ratio_supply:"",ratio_supplier:"",ratio_sale:"",ratio_market:"",labels:"",category:"",brand:""}),T=S({labels:[],category:[],brand:[]}),d=S({show:!1,title:"供应商信息",data:{}});te(()=>f.show,P=>{_.value=P,P&&(l.value.type=f.data.type||"",l.value.ids=f.data.ids||[],l.value.sku_id=f.data.sku_id||"",l.value.name=f.data.name||"",l.value.properties_value=f.data.properties_value||"",l.value.short_name=f.data.short_name||"",l.value.cost_price=f.data.cost_price||"",l.value.supply_price=f.data.supply_price||"",l.value.sale_price=f.data.sale_price||"",l.value.purchase_price=f.data.purchase_price||"",l.value.supplier_price=f.data.supplier_price||"",l.value.market_price=f.data.market_price||"",l.value.other_price=f.data.other_price||"",l.value.other_price1=f.data.other_price1||"",l.value.unit=f.data.unit||"",l.value.weight=f.data.weight||"",l.value.num=typeof f.data.num<"u"?f.data.num:"",l.value.ratio=f.data.ratio||"",l.value.ratio_cost=f.data.ratio_cost||"",l.value.ratio_purchase=f.data.ratio_purchase||"",l.value.ratio_supply=f.data.ratio_supply||"",l.value.ratio_supplier=f.data.ratio_supplier||"",l.value.ratio_sale=f.data.ratio_sale||"",l.value.ratio_market=f.data.ratio_market||"",l.value.brand=f.data.brand||"",l.value.owner=f.data.owner||"",l.value.i_id=f.data.i_id||"",l.value.supplier_name=f.data.supplier_name||"",n())},{deep:!0});const n=()=>{V.Post("erp_goods_info/get_select?lang="+A.lang,{token:A.token},P=>{const{code:i,msg:v,data:F}=P.data;i==0?(T.value.labels=F.labels,T.value.category=F.category,T.value.brand=F.brand,re(()=>{l.value.labels=f.data.labels?[f.data.labels]:"",l.value.category=f.data.category?[f.data.category]:"",l.value.brand=f.data.brand?[f.data.brand]:""})):h.Toast(v)})},w=P=>{if(!P)return h.Toast("请输入供应商名称");d.value.show=!0,d.value.data={supplier_name:P}},y=P=>P.ids.length==0?h.Toast("请选择"):P,x=()=>{const P=y(l.value);if(!P)return;const i=h.Loading();V.Post("erp_goods_info/save?lang="+A.lang,{token:A.token,data:P},v=>{i.clear();const{code:F,msg:E}=v.data;h.Toast(E),j("submit",F==0)})},Y=()=>{j("update:show",!1)};return(P,i)=>(U(),C(ne,null,[u(J,{show:_.value,"onUpdate:show":i[30]||(i[30]=v=>_.value=v),title:W.title,width:"900px",bottom:"40px",overflow:"hidden auto",onClose:i[31]||(i[31]=v=>Y())},{bottom:r(()=>[u(I,{height:"40px",padding:"0 32px",onClick:i[29]||(i[29]=v=>x())},{default:r(()=>[k(p(b(D).confirm),1)]),_:1})]),default:r(()=>[u(Q,null,{default:r(()=>[u(pe,null,{default:r(()=>[e("tr",null,[i[33]||(i[33]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品编码")],-1)),e("td",null,[u(g,{value:l.value.sku_id,"onUpdate:value":i[0]||(i[0]=v=>l.value.sku_id=v),placeholder:l.value.type=="edits"?"原始":"",disabled:!0},null,8,["value","placeholder"])]),i[34]||(i[34]=e("td",{class:"label"},[e("span",{class:"red_dot"},"标签")],-1)),e("td",null,[u(z,{value:l.value.labels,"onUpdate:value":i[1]||(i[1]=v=>l.value.labels=v),options:T.value.labels,placeholder:l.value.type=="edits"?"原始":""},null,8,["value","options","placeholder"])])]),e("tr",null,[i[35]||(i[35]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品名称")],-1)),e("td",null,[u(g,{value:l.value.name,"onUpdate:value":i[2]||(i[2]=v=>l.value.name=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[36]||(i[36]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品分类")],-1)),e("td",null,[u(z,{value:l.value.category,"onUpdate:value":i[3]||(i[3]=v=>l.value.category=v),options:T.value.category,placeholder:l.value.type=="edits"?"原始":""},null,8,["value","options","placeholder"])])]),e("tr",null,[i[37]||(i[37]=e("td",{class:"label"},"颜色及规格",-1)),e("td",null,[u(g,{value:l.value.properties_value,"onUpdate:value":i[4]||(i[4]=v=>l.value.properties_value=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[38]||(i[38]=e("td",{class:"label"},[e("span",{class:"red_dot"},"品牌")],-1)),e("td",null,[u(z,{value:l.value.brand,"onUpdate:value":i[5]||(i[5]=v=>l.value.brand=v),options:T.value.brand,placeholder:l.value.type=="edits"?"原始":""},null,8,["value","options","placeholder"])])]),e("tr",null,[i[39]||(i[39]=e("td",{class:"label"},[e("span",{class:"red_dot"},"成本价(元)")],-1)),e("td",null,[u(g,{value:l.value.cost_price,"onUpdate:value":i[6]||(i[6]=v=>l.value.cost_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[40]||(i[40]=e("td",{class:"label"},"成本折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_cost,"onUpdate:value":i[7]||(i[7]=v=>l.value.ratio_cost=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[41]||(i[41]=e("td",{class:"label"},"供应链价(元)",-1)),e("td",null,[u(g,{value:l.value.supply_price,"onUpdate:value":i[8]||(i[8]=v=>l.value.supply_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[42]||(i[42]=e("td",{class:"label"},"供应链折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_supply,"onUpdate:value":i[9]||(i[9]=v=>l.value.ratio_supply=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[43]||(i[43]=e("td",{class:"label"},[e("span",{class:"red_dot"},"标签价(元)")],-1)),e("td",null,[u(g,{value:l.value.sale_price,"onUpdate:value":i[10]||(i[10]=v=>l.value.sale_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[44]||(i[44]=e("td",{class:"label"},"标签折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_sale,"onUpdate:value":i[11]||(i[11]=v=>l.value.ratio_sale=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[45]||(i[45]=e("td",{class:"label"},"采购价(元)",-1)),e("td",null,[u(g,{value:l.value.purchase_price,"onUpdate:value":i[12]||(i[12]=v=>l.value.purchase_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[46]||(i[46]=e("td",{class:"label"},"采购折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_purchase,"onUpdate:value":i[13]||(i[13]=v=>l.value.ratio_purchase=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[47]||(i[47]=e("td",{class:"label"},"人民币采购价",-1)),e("td",null,[u(g,{value:l.value.supplier_price,"onUpdate:value":i[14]||(i[14]=v=>l.value.supplier_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[48]||(i[48]=e("td",{class:"label"},"人民币折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_supplier,"onUpdate:value":i[15]||(i[15]=v=>l.value.ratio_supplier=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[49]||(i[49]=e("td",{class:"label"},"吊牌价(w)",-1)),e("td",null,[u(g,{value:l.value.market_price,"onUpdate:value":i[16]||(i[16]=v=>l.value.market_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[50]||(i[50]=e("td",{class:"label"},"吊牌折扣",-1)),e("td",null,[u(g,{value:l.value.ratio_market,"onUpdate:value":i[17]||(i[17]=v=>l.value.ratio_market=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[51]||(i[51]=e("td",{class:"label"},"参照价(元)",-1)),e("td",null,[u(g,{value:l.value.other_price,"onUpdate:value":i[18]||(i[18]=v=>l.value.other_price=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[52]||(i[52]=e("td",{class:"label"},"其它价格1",-1)),e("td",null,[u(g,{value:l.value.other_price1,"onUpdate:value":i[19]||(i[19]=v=>l.value.other_price1=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[53]||(i[53]=e("td",{class:"label"},"单位",-1)),e("td",null,[u(g,{value:l.value.unit,"onUpdate:value":i[20]||(i[20]=v=>l.value.unit=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[54]||(i[54]=e("td",{class:"label"},"重量",-1)),e("td",null,[u(g,{value:l.value.weight,"onUpdate:value":i[21]||(i[21]=v=>l.value.weight=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[55]||(i[55]=e("td",{class:"label"},"库存",-1)),e("td",null,[u(g,{value:l.value.num,"onUpdate:value":i[22]||(i[22]=v=>l.value.num=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[56]||(i[56]=e("td",{class:"label"},"折扣",-1)),e("td",null,[u(g,{value:l.value.ratio,"onUpdate:value":i[23]||(i[23]=v=>l.value.ratio=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[57]||(i[57]=e("td",{class:"label"},"暗码",-1)),e("td",null,[u(g,{value:l.value.short_name,"onUpdate:value":i[24]||(i[24]=v=>l.value.short_name=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[58]||(i[58]=e("td",{class:"label"},"款式编码",-1)),e("td",null,[u(g,{value:l.value.i_id,"onUpdate:value":i[25]||(i[25]=v=>l.value.i_id=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])])]),e("tr",null,[i[59]||(i[59]=e("td",{class:"label"},[e("span",{class:"red_dot"},"采购员")],-1)),e("td",null,[u(g,{value:l.value.owner,"onUpdate:value":i[26]||(i[26]=v=>l.value.owner=v),placeholder:l.value.type=="edits"?"原始":""},null,8,["value","placeholder"])]),i[60]||(i[60]=e("td",{class:"label"},[e("span",{class:"red_dot"},"供应商")],-1)),e("td",null,[u(g,{value:l.value.supplier_name,"onUpdate:value":i[27]||(i[27]=v=>l.value.supplier_name=v),onIconClick:i[28]||(i[28]=v=>w(l.value.supplier_name)),placeholder:l.value.type=="edits"?"原始":"",icon:"ui ui_search",iconAlign:"right",padding:"0 40px 0 10px"},null,8,["value","placeholder"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]),u(Ee,{show:d.value.show,"onUpdate:show":i[32]||(i[32]=v=>d.value.show=v),title:d.value.title,data:d.value.data},null,8,["show","title","data"])],64))}}),ze=["innerHTML"],qe=X({__name:"del",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Array,default:[]}},emits:["update:show","submit"],setup(W,{emit:H}){const f=W,j=H,A=Z().state,D=A.langs,_=S(!1);te(()=>f.show,d=>{_.value=d},{deep:!0});const l=()=>{const d=h.Loading();V.Post("erp_goods_info/del?lang="+A.lang,{token:A.token,data:f.data},n=>{d.clear();const{code:w,msg:y}=n.data;h.Toast(y),j("submit",w==0)})},T=()=>{j("update:show",!1)};return(d,n)=>(U(),se(J,{show:_.value,"onUpdate:show":n[1]||(n[1]=w=>_.value=w),title:W.title||b(D).del,width:"360px",bottom:"40px",onClose:n[2]||(n[2]=w=>T())},{bottom:r(()=>[u(I,{effect:"dark",type:"danger",height:"40px",onClick:n[0]||(n[0]=w=>l())},{default:r(()=>[k(p(b(D).confirm),1)]),_:1})]),default:r(()=>[u(Q,{lineHeight:"60px"},{default:r(()=>[e("span",{innerHTML:b(D).del_warn(W.data.length)},null,8,ze)]),_:1})]),_:1},8,["show","title"]))}}),Ge=["innerHTML"],Je=X({__name:"export",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},num:{type:Number,default:0},data:{type:Object,default:{}},order:{type:String,default:""}},emits:["update:show","submit"],setup(W,{emit:H}){const f=W,j=H,A=Z().state,D=A.langs,_=S(!1);te(()=>f.show,d=>{_.value=d},{deep:!0});const l=()=>{const d=h.Loading();V.Post("erp_goods_info/export?lang="+A.lang,{token:A.token,data:f.data,order:f.order},n=>{d.clear();const{code:w,msg:y,data:x}=n.data;h.Toast(y),w==0&&ge.Down(x.path+x.filename,x.filename),j("submit",w==0)})},T=()=>{j("update:show",!1)};return(d,n)=>(U(),se(J,{show:_.value,"onUpdate:show":n[1]||(n[1]=w=>_.value=w),title:W.title||b(D).export,width:"360px",bottom:"40px",onClose:n[2]||(n[2]=w=>T())},{bottom:r(()=>[u(I,{height:"40px",padding:"0 32px",onClick:n[0]||(n[0]=w=>l())},{default:r(()=>[k(p(b(D).confirm),1)]),_:1})]),default:r(()=>[u(Q,{lineHeight:"60px"},{default:r(()=>[e("span",{innerHTML:b(D).export_warn(W.num)},null,8,Ge)]),_:1})]),_:1},8,["show","title"]))}}),Qe={class:"goods_info flex"},Xe={class:"goods_info_tools flex"},Ze={class:"goods_info_total scrollbar",style:{"max-width":"calc(100% - 620px)"}},el={class:"tCenter"},ll={class:"copy c_primary"},tl=["onClick"],al={class:"tCenter"},sl={class:"tCenter"},ol={key:0,class:"tRight"},il={key:1,class:"tRight"},ul={class:"tRight"},nl={class:"tRight"},rl={key:0,class:"tRight"},pl={key:1,class:"tRight"},dl={class:"tRight"},vl={class:"tRight"},ml={class:"tCenter"},cl={class:"tCenter"},_l={class:"tCenter"},gl={class:"tCenter"},fl={class:"tCenter"},bl={key:0,class:"tCenter"},wl={key:1,class:"tCenter"},yl={class:"tCenter"},kl={class:"tCenter"},xl={class:"tCenter"},hl={key:0,class:"c_info"},Ul={key:1,class:"c_success"},$l={key:2,class:"c_danger"},Cl={key:3,class:"c_warning"},Tl={key:4,class:"c_info"},Al={class:"c_success"},Sl={class:"c_danger"},Dl={class:"c_warning"},Ll={class:"c_info"},Rl=X({__name:"import",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},selectList:{type:Object,default:{}},data:{type:Object,default:{}}},emits:["update:show","submit"],setup(W,{emit:H}){const f=W,j=H,B=S(),D=Z().state,_=D.langs,l=ye.priceEncode,T=S(!1),d=S({key:"",columns:[{title:"序号",slot:"index",width:"40px",minWidth:"30px",textAlign:"center"},{title:"商品编码",slot:"sku_id",width:"160px"},{title:"暗码",slot:"short_name",textAlign:"center"},{title:"款式编码",slot:"i_id",textAlign:"center"},{title:"商品名称",index:"name"},{title:"颜色及规格",index:"properties_value"},{title:"成本价(元)",slot:"cost_price",textAlign:"center"},{title:"供应链价(元)",slot:"supply_price",textAlign:"center"},{title:"标签价(元)",slot:"sale_price",textAlign:"center"},{title:"采购价(W)",slot:"purchase_price",textAlign:"center"},{title:"人民币采购价(元)",slot:"supplier_price",textAlign:"center"},{title:"吊牌价(W)",slot:"market_price",textAlign:"center"},{title:"单位",slot:"unit",minWidth:"60px",textAlign:"center"},{title:"重量",slot:"weight",minWidth:"60px",textAlign:"center"},{title:"标签",slot:"labels",textAlign:"center"},{title:"分类",slot:"category",textAlign:"center"},{title:"品牌",slot:"brand",textAlign:"center"},{title:"供应商",slot:"supplier_name",textAlign:"center"},{title:"采购员",slot:"owner",textAlign:"center"},{title:"操作",slot:"action",width:"60px",minWidth:"60px",textAlign:"center"},{title:"状态",slot:"status",width:"80px",minWidth:"80px",textAlign:"center"}],list:[],price:{label:"调整价格",value:"price",checked:!1},cost_price:0,sale_price:0,purchase_price:0,market_price:0}),n=S({show:!1,title:"新增商品",cost_price:"0.00",supply_price:"0.00",sale_price:"0.00",purchase_price:"0.00",supplier_price:"0.00",market_price:"0.00",weight:"0.00",unit:"个",sku_id:"",labels:"",name:"",category:"",properties_value:"",brand:"",short_name:"",i_id:"",owner:"",supplier_name:""}),w=S({show:!1,type:"",title:"移除",info:"",data:[]}),y=S({show:!1,refresh:!1,title:"上传资料",s0:0,s1:0,s2:0,s3:0,s4:0}),x=S({labels:[],category:[],brand:[]});te(()=>f.show,m=>{T.value=m,m&&(y.value.refresh=!1,Y())},{deep:!0});const Y=()=>{V.Post("erp_goods_info/get_select?lang="+D.lang,{token:D.token},m=>{const{code:a,msg:s,data:L}=m.data;a==0?(x.value.labels=L.labels,x.value.category=L.category,x.value.brand=L.brand):h.Toast(s)})},P=()=>{const m=d.value.key,a=new RegExp(m.trim().toUpperCase());d.value.key="";const s=d.value.list;for(let L of s)L.display=a.test(L.sku_id)},i=()=>{const m=n.value;if(!m.sku_id)return h.Toast("请输入商品编码");const a=le.Trim(m.sku_id).toUpperCase();for(let L of d.value.list)if(a==L.sku_id)return h.Toast("[ "+a+" ]已存在!");if(!m.name)return h.Toast("请输入商品名称");if(!m.labels||m.labels.length==0)return h.Toast("请选择标签");if(!m.category||m.category.length==0)return h.Toast("请选择分类");if(!m.brand||m.brand.length==0)return h.Toast("请选择品牌");if(!m.properties_value||m.properties_value.length<2)return h.Toast("请输入颜色及规格");if(!m.cost_price||isNaN(parseFloat(m.cost_price)))return h.Toast("请输入成本价");if(!m.sale_price||isNaN(parseFloat(m.sale_price)))return h.Toast("请输入标签价");if(!m.owner)return h.Toast("采购员");if(!m.supplier_name)return h.Toast("供应商");n.value.show=!1;let s="id_1";if(d.value.list.length>0){const O=d.value.list.at(-1).id.split("_");O.length===2&&(s="id_"+(parseInt(O[1])+1))}d.value.list.push({id:s,sku_id:a,i_id:m.i_id,name:m.name,properties_value:m.properties_value,short_name:m.short_name,cost_price:m.cost_price,supply_price:m.supply_price,sale_price:m.sale_price,price:F(parseFloat(m.sale_price)),purchase_price:m.purchase_price,supplier_price:m.supplier_price,market_price:m.market_price,unit:m.unit,weight:m.weight,labels:m.labels[0],category:m.category[0],brand:m.brand[0],supplier_name:m.supplier_name,owner:m.owner,status:"0",display:!0}),E(),ae([a])},v=()=>{ge.Select({mimeType:[]},m=>{ge.FileToBase64(m,a=>{const s=Ue(a,{type:"binary"}),L=s.SheetNames[0],O=$e.sheet_to_json(s.Sheets[L],{raw:!1});if(O.length>3e3)return h.Toast("不能超过3000条");d.value.list=[];let q=0,K="",G=[];for(let R of O){if(!R.商品编码||!R.款式编码||!R.品牌)continue;let $=R.基本售价||R.标签价||0,o=$?F(parseFloat($)):0;q++,K=le.Trim(R.商品编码).toUpperCase(),G.push(K),d.value.list.push({id:"id_"+q,sku_id:K,i_id:R.款式编码,name:R.商品名称||"",properties_value:R.颜色及规格||"",short_name:R.暗码||"",cost_price:R.成本价||0,supply_price:R.供应链价||0,sale_price:$,price:o,purchase_price:R.采购价||0,supplier_price:R.人民币采购价||0,market_price:R.吊牌价||0,unit:R.单位||"",weight:R.重量||0,labels:R.商品标签||R.标签||"",category:R.分类||"",brand:R.品牌||"",supplier_name:R.供应商名称||R.供应商||"",owner:R.采购员||"",status:"0",display:!0})}E(),ae(G)},"blob")})},F=m=>Math.round(m/10)*10,E=()=>{const m=d.value.list;d.value.cost_price=0,d.value.sale_price=0,d.value.purchase_price=0,d.value.market_price=0;for(let a of m)d.value.cost_price+=parseFloat(a.cost_price),d.value.sale_price+=parseFloat(a.sale_price),d.value.purchase_price+=parseFloat(a.purchase_price),d.value.market_price+=parseFloat(a.market_price)},ae=m=>{if(m.length==0)return;const a=h.Loading();V.Post("erp_goods_info/status?lang="+D.lang,{token:D.token,sku:m},s=>{a.clear();const{code:L,msg:O,data:q}=s.data;if(L==0){const K=d.value.list;for(let G in q)for(let R of K)R.sku_id==G&&(R.status=q[G])}else h.Toast(O)})},oe=(m,a=0)=>{if(w.value.type=m,w.value.data=[],m==="part"){const s=B.value.getData();if(s.length==0)return h.Toast("请选择数据");w.value.show=!0,w.value.title="清空",w.value.info="是否移除选中数据?";for(let L of s)w.value.data.unshift({index:L.index})}else(m="one")&&(w.value.show=!0,w.value.title="移除",w.value.info=d.value.list[a].sku_id,w.value.data.unshift({index:a}))},de=()=>{w.value.show=!1;const m=d.value.list,a=w.value.data;for(let s of a)m.splice(s.index,1);ce(),w.value.data=[],E()},ie=()=>{let m=d.value.list,a=[];for(let s of m){if(s.status===0||s.status===1)return h.Toast("请先上传商品资料!");a.push({sku_id:s.sku_id})}if(a.length==0)return h.Toast("请添加或导入商品资料!");D.print.sku=a,D.print.show=!0},ve=()=>{if(d.value.list.length==0)return h.Toast("请添加或导入商品资料!");y.value.s0=y.value.s1=y.value.s2=y.value.s3=y.value.s4=0;let m=d.value.list;for(let a of m)a.status===0?y.value.s0++:a.status===1?y.value.s1++:a.status===2?y.value.s2++:a.status===3?y.value.s3++:a.status===4&&y.value.s4++;if(y.value.s0>0)return h.Toast("该状态不可用!");y.value.show=!0},ue=()=>{let m=[],a=d.value.list;for(let L of a)L.status!=3&&L.status!=4&&m.push(L);if(m.length==0)return h.Toast("无可上传商品资料!");y.value.show=!1,y.value.refresh=!0;const s=h.Loading();V.Post("erp_goods_info/import?lang="+D.lang,{token:D.token,data:m,price:d.value.price.checked},L=>{s.clear();const{code:O,msg:q}=L.data;if(h.Toast(q),O==0){let K=[];for(let G of m)K.push(G.sku_id);ae(K)}})},me=(m,a)=>{const s=B.value.getData();let L="";for(let O in s)L+=s[O][m]+" ";L?le.CopyText(L):le.CopyText(a)},ce=()=>{re(()=>{B.value.checkboxAll(!1)})},_e=()=>{j("update:show",!1),j("submit",y.value.refresh)};return(m,a)=>(U(),C(ne,null,[u(J,{show:T.value,"onUpdate:show":a[8]||(a[8]=s=>T.value=s),title:W.title,width:"calc(100% - 40px)",top:"56px",bottom:"40px",overflow:"hidden auto",onClose:a[9]||(a[9]=s=>_e())},{top:r(()=>[e("div",Qe,[e("ul",Xe,[e("li",null,[u(g,{value:d.value.key,"onUpdate:value":a[0]||(a[0]=s=>d.value.key=s),onKeyup:a[1]||(a[1]=ke(s=>P(),["enter"])),onIconClick:a[2]||(a[2]=s=>P()),placeholder:b(D).langs.sku_id,maxlength:"32",icon:"ui ui_search",iconAlign:"right",padding:"0 40px 0 10px"},null,8,["value","placeholder"])]),e("li",null,[u(he,{options:d.value.price},null,8,["options"])]),a[38]||(a[38]=e("li",null,"|",-1)),e("li",null,[u(I,{type:"primary",effect:"text",padding:"0 4px",onClick:a[3]||(a[3]=s=>n.value.show=!0)},{default:r(()=>[...a[34]||(a[34]=[k("添加",-1)])]),_:1})]),e("li",null,[u(I,{type:"primary",effect:"text",padding:"0 4px",onClick:a[4]||(a[4]=s=>v())},{default:r(()=>[...a[35]||(a[35]=[k("导入",-1)])]),_:1})]),a[39]||(a[39]=e("li",null,"|",-1)),e("li",null,[u(I,{type:"danger",effect:"text",padding:"0 4px",onClick:a[5]||(a[5]=s=>oe("part"))},{default:r(()=>[...a[36]||(a[36]=[k("移除",-1)])]),_:1})]),a[40]||(a[40]=e("li",null,"|",-1)),e("li",null,[u(I,{type:"primary",effect:"text",padding:"0 4px",onClick:a[6]||(a[6]=s=>ie())},{default:r(()=>[...a[37]||(a[37]=[k("打印标签",-1)])]),_:1})])]),e("div",Ze,[a[41]||(a[41]=k(" 成本价: ",-1)),e("b",null,p(b(l)(d.value.cost_price)),1),a[42]||(a[42]=k(" 元   标签价: ",-1)),e("b",null,p(b(l)(d.value.sale_price)),1),a[43]||(a[43]=k(" 元   采购价: ",-1)),e("b",null,p(b(l)(d.value.purchase_price)),1),a[44]||(a[44]=k(" W   吊牌价: ",-1)),e("b",null,p(b(l)(d.value.market_price)),1),a[45]||(a[45]=k(" W   数量: ",-1)),e("b",null,p(d.value.list.length),1),a[46]||(a[46]=k(" 条 ",-1))])])]),bottom:r(()=>[u(I,{height:"40px",padding:"0 32px",onClick:a[7]||(a[7]=s=>ve())},{default:r(()=>[...a[47]||(a[47]=[k("上传资料",-1)])]),_:1})]),default:r(()=>[u(Q,{paddingY:"4px"},{default:r(()=>[u(we,{ref_key:"tableList",ref:B,columns:d.value.columns,options:d.value.list,maxLen:100},{index:r(s=>[e("div",el,p(s.index+1),1)]),sku_id:r(s=>[e("div",ll,[k(p(s.sku_id),1),e("span",{onClick:L=>me("sku_id",s.sku_id)},"复",8,tl)])]),short_name:r(s=>[e("div",al,p(s.short_name||"-"),1)]),i_id:r(s=>[e("div",sl,p(s.i_id||"-"),1)]),cost_price:r(s=>[s.cost_price>0&&s.status!=1?(U(),C("div",ol,"***")):(U(),C("div",il,p(s.cost_price>0?b(l)(s.cost_price):s.cost_price),1))]),supply_price:r(s=>[e("div",ul,p(s.supply_price>0?b(l)(s.supply_price):"-"),1)]),sale_price:r(s=>[e("div",nl,p(s.sale_price>0?b(l)(d.value.price.checked?s.price:s.sale_price):"-"),1)]),purchase_price:r(s=>[s.purchase_price>0&&s.status!=1?(U(),C("div",rl,"***")):(U(),C("div",pl,p(s.purchase_price>0?b(l)(s.purchase_price):s.purchase_price),1))]),supplier_price:r(s=>[e("div",dl,p(s.supplier_price>0?b(l)(s.supplier_price):"-"),1)]),market_price:r(s=>[e("div",vl,p(s.market_price>0?b(l)(s.market_price):"-"),1)]),unit:r(s=>[e("div",ml,p(s.unit||"-"),1)]),weight:r(s=>[e("div",cl,p(s.weight||"-"),1)]),labels:r(s=>[e("div",_l,p(s.labels||"-"),1)]),category:r(s=>[e("div",gl,p(s.category||"-"),1)]),brand:r(s=>[e("div",fl,p(s.brand||"-"),1)]),supplier_name:r(s=>[s.supplier_name&&s.status!=1?(U(),C("div",bl,"***")):(U(),C("div",wl,p(s.supplier_name),1))]),owner:r(s=>[e("div",yl,p(s.owner||"-"),1)]),action:r(s=>[e("div",kl,[u(I,{type:"danger",effect:"text",padding:"0 4px",onClick:L=>oe("one",s.index)},{default:r(()=>[k(p(b(_).remove),1)]),_:1},8,["onClick"])])]),status:r(s=>[e("div",xl,[s.status==0?(U(),C("span",hl,"检测中")):s.status==1?(U(),C("span",Ul,"可用")):s.status==2?(U(),C("span",$l,"存在")):s.status==3?(U(),C("span",Cl,"已入库")):s.status==4?(U(),C("span",Tl,"已发货")):fe("",!0)])]),_:1},8,["columns","options"])]),_:1})]),_:1},8,["show","title"]),u(J,{show:n.value.show,"onUpdate:show":a[29]||(a[29]=s=>n.value.show=s),title:n.value.title,width:"820px",bottom:"40px",isClose:!0},{bottom:r(()=>[u(I,{height:"40px",padding:"0 32px",onClick:a[28]||(a[28]=s=>i())},{default:r(()=>[k(p(b(_).confirm),1)]),_:1})]),default:r(()=>[u(Q,null,{default:r(()=>[u(pe,null,{default:r(()=>[e("tr",null,[a[48]||(a[48]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品编码")],-1)),e("td",null,[u(g,{value:n.value.sku_id,"onUpdate:value":a[10]||(a[10]=s=>n.value.sku_id=s)},null,8,["value"])]),a[49]||(a[49]=e("td",{class:"label"},[e("span",{class:"red_dot"},"标签")],-1)),e("td",null,[u(z,{value:n.value.labels,"onUpdate:value":a[11]||(a[11]=s=>n.value.labels=s),options:x.value.labels},null,8,["value","options"])])]),e("tr",null,[a[50]||(a[50]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品名称")],-1)),e("td",null,[u(g,{value:n.value.name,"onUpdate:value":a[12]||(a[12]=s=>n.value.name=s)},null,8,["value"])]),a[51]||(a[51]=e("td",{class:"label"},[e("span",{class:"red_dot"},"商品分类")],-1)),e("td",null,[u(z,{value:n.value.category,"onUpdate:value":a[13]||(a[13]=s=>n.value.category=s),options:x.value.category},null,8,["value","options"])])]),e("tr",null,[a[52]||(a[52]=e("td",{class:"label"},[e("span",{class:"red_dot"},"颜色及规格")],-1)),e("td",null,[u(g,{value:n.value.properties_value,"onUpdate:value":a[14]||(a[14]=s=>n.value.properties_value=s)},null,8,["value"])]),a[53]||(a[53]=e("td",{class:"label"},[e("span",{class:"red_dot"},"品牌")],-1)),e("td",null,[u(z,{value:n.value.brand,"onUpdate:value":a[15]||(a[15]=s=>n.value.brand=s),options:x.value.brand},null,8,["value","options"])])]),e("tr",null,[a[54]||(a[54]=e("td",{class:"label"},[e("span",{class:"red_dot"},"成本价(元)")],-1)),e("td",null,[u(g,{value:n.value.cost_price,"onUpdate:value":a[16]||(a[16]=s=>n.value.cost_price=s)},null,8,["value"])]),a[55]||(a[55]=e("td",{class:"label"},[e("span",{class:"red_dot"},"标签价(元)")],-1)),e("td",null,[u(g,{value:n.value.sale_price,"onUpdate:value":a[17]||(a[17]=s=>n.value.sale_price=s)},null,8,["value"])])]),e("tr",null,[a[56]||(a[56]=e("td",{class:"label"},"采购价(w)",-1)),e("td",null,[u(g,{value:n.value.purchase_price,"onUpdate:value":a[18]||(a[18]=s=>n.value.purchase_price=s)},null,8,["value"])]),a[57]||(a[57]=e("td",{class:"label"},"吊牌价(w)",-1)),e("td",null,[u(g,{value:n.value.market_price,"onUpdate:value":a[19]||(a[19]=s=>n.value.market_price=s)},null,8,["value"])])]),e("tr",null,[a[58]||(a[58]=e("td",{class:"label"},"供应链价(元)",-1)),e("td",null,[u(g,{value:n.value.supply_price,"onUpdate:value":a[20]||(a[20]=s=>n.value.supply_price=s)},null,8,["value"])]),a[59]||(a[59]=e("td",{class:"label"},"人民币采购价",-1)),e("td",null,[u(g,{value:n.value.supplier_price,"onUpdate:value":a[21]||(a[21]=s=>n.value.supplier_price=s)},null,8,["value"])])]),e("tr",null,[a[60]||(a[60]=e("td",{class:"label"},"单位",-1)),e("td",null,[u(g,{value:n.value.unit,"onUpdate:value":a[22]||(a[22]=s=>n.value.unit=s)},null,8,["value"])]),a[61]||(a[61]=e("td",{class:"label"},"重量",-1)),e("td",null,[u(g,{value:n.value.weight,"onUpdate:value":a[23]||(a[23]=s=>n.value.weight=s)},null,8,["value"])])]),e("tr",null,[a[62]||(a[62]=e("td",{class:"label"},"暗码",-1)),e("td",null,[u(g,{value:n.value.short_name,"onUpdate:value":a[24]||(a[24]=s=>n.value.short_name=s)},null,8,["value"])]),a[63]||(a[63]=e("td",{class:"label"},"款式编码",-1)),e("td",null,[u(g,{value:n.value.i_id,"onUpdate:value":a[25]||(a[25]=s=>n.value.i_id=s)},null,8,["value"])])]),e("tr",null,[a[64]||(a[64]=e("td",{class:"label"},[e("span",{class:"red_dot"},"采购员")],-1)),e("td",null,[u(g,{value:n.value.owner,"onUpdate:value":a[26]||(a[26]=s=>n.value.owner=s)},null,8,["value"])]),a[65]||(a[65]=e("td",{class:"label"},[e("span",{class:"red_dot"},"供应商")],-1)),e("td",null,[u(g,{value:n.value.supplier_name,"onUpdate:value":a[27]||(a[27]=s=>n.value.supplier_name=s)},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]),u(J,{show:w.value.show,"onUpdate:show":a[31]||(a[31]=s=>w.value.show=s),title:w.value.title,width:"360px",bottom:"40px",isClose:!0},{bottom:r(()=>[u(I,{effect:"dark",type:"danger",height:"40px",onClick:a[30]||(a[30]=s=>de())},{default:r(()=>[k(p(b(_).confirm),1)]),_:1})]),default:r(()=>[u(Q,{lineHeight:"60px"},{default:r(()=>[k(p(w.value.info),1)]),_:1})]),_:1},8,["show","title"]),u(J,{show:y.value.show,"onUpdate:show":a[33]||(a[33]=s=>y.value.show=s),title:y.value.title,width:"480px",bottom:"40px",isClose:!0},{bottom:r(()=>[u(I,{effect:"dark",height:"40px",onClick:a[32]||(a[32]=s=>ue())},{default:r(()=>[k(p(b(_).confirm),1)]),_:1})]),default:r(()=>[u(xe,null,{default:r(()=>[...a[66]||(a[66]=[k("提醒: 无法覆盖已入库、已发货状态, 如需修改请联系维护人员",-1)])]),_:1}),u(Q,{paddingY:"32px",textAlign:"center"},{default:r(()=>[a[67]||(a[67]=k(" 可用( ",-1)),e("b",Al,p(y.value.s1),1),a[68]||(a[68]=k(" )   存在( ",-1)),e("b",Sl,p(y.value.s2),1),a[69]||(a[69]=k(" )   已入库( ",-1)),e("b",Dl,p(y.value.s3),1),a[70]||(a[70]=k(" )   已发货( ",-1)),e("b",Ll,p(y.value.s4),1),a[71]||(a[71]=k(" )   ",-1))]),_:1})]),_:1},8,["show","title"])],64))}}),Pl=X({__name:"exchange",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:{}},num:{type:Number,default:0}},emits:["update:show","submit"],setup(W,{emit:H}){const f=W,j=H,A=Z().state,D=A.langs,_=S(!1),l=S({from_price:"",to_price:"",rate:""}),T=S({from_price:[{label:"采购价",value:"purchase_price"}],to_price:[{label:"人民币采购价",value:"supplier_price"},{label:"成本价",value:"cost_price"}]});te(()=>f.show,y=>{_.value=y},{deep:!0});const d=y=>!y.from_price||y.from_price.length==0?h.Toast("请选择换算价格"):!y.to_price||y.to_price.length==0?h.Toast("请选择换算成价格"):!y.rate||isNaN(parseFloat(y.rate))?h.Toast("请输入换算比例"):y,n=()=>{const y=d(l.value);if(!y)return;const x=h.Loading();V.Post("erp_goods_info/exchange?lang="+A.lang,{token:A.token,data:f.data,form:y},Y=>{x.clear();const{code:P,msg:i}=Y.data;h.Toast(i),j("submit",P==0)})},w=()=>{j("update:show",!1)};return(y,x)=>(U(),se(J,{show:_.value,"onUpdate:show":x[4]||(x[4]=Y=>_.value=Y),title:W.title,width:"480px",bottom:"40px",onClose:x[5]||(x[5]=Y=>w())},{bottom:r(()=>[u(I,{height:"40px",padding:"0 32px",onClick:x[3]||(x[3]=Y=>n())},{default:r(()=>[k(p(b(D).confirm),1)]),_:1})]),default:r(()=>[u(xe,null,{default:r(()=>[x[6]||(x[6]=k("提醒: 将替换符合条件 ",-1)),e("b",null,p(W.num),1),x[7]||(x[7]=k(" 条数据",-1))]),_:1}),u(Q,null,{default:r(()=>[u(pe,null,{default:r(()=>[e("tr",null,[x[8]||(x[8]=e("td",{class:"label"},[e("span",{class:"red_dot"},"换算价格")],-1)),e("td",null,[u(z,{value:l.value.from_price,"onUpdate:value":x[0]||(x[0]=Y=>l.value.from_price=Y),options:T.value.from_price},null,8,["value","options"])])]),e("tr",null,[x[9]||(x[9]=e("td",{class:"label"},[e("span",{class:"red_dot"},"换算成")],-1)),e("td",null,[u(z,{value:l.value.to_price,"onUpdate:value":x[1]||(x[1]=Y=>l.value.to_price=Y),options:T.value.to_price},null,8,["value","options"])])]),e("tr",null,[x[10]||(x[10]=e("td",{class:"label"},[e("span",{class:"red_dot"},"换算比率")],-1)),e("td",null,[u(g,{value:l.value.rate,"onUpdate:value":x[2]||(x[2]=Y=>l.value.rate=Y),placeholder:"例如: 1.1"},null,8,["value"])])])]),_:1})]),_:1})]),_:1},8,["show","title"]))}}),Yl={class:"app_action flex"},Wl={class:"app_action_tools scrollbar"},Bl={key:0,class:"line"},Fl={key:0,class:"line"},Nl={class:"app_action_search flex"},Il={class:"custom_time flex_center"},jl=["onClick"],Hl={class:"flex"},Ml={class:"flex"},Ol={class:"flex"},Vl={class:"flex"},El={class:"flex"},Kl={class:"flex"},zl={class:"flex"},ql={class:"flex"},Gl={class:"app_ct"},Jl={class:"tCenter"},Ql={class:"tCenter"},Xl={class:"flex_center"},Zl=["onClick"],et={class:"copy"},lt=["onClick"],tt={class:"tCenter"},at={class:"tCenter"},st={class:"tRight"},ot={key:0},it={key:1},ut={key:2},nt={class:"tRight"},rt={key:0},pt={key:1},dt={key:2},vt={class:"tRight"},mt={key:0},ct={key:1},_t={class:"tRight"},gt={key:0},ft={key:1},bt={key:2},wt={class:"tRight"},yt={key:0},kt={key:1},xt={class:"tRight"},ht={key:0},Ut={key:1},$t={class:"tRight"},Ct={class:"tCenter"},Tt={class:"tCenter"},At={class:"tCenter"},St={key:1},Dt={class:"tCenter"},Lt={class:"tCenter"},Rt={class:"tCenter"},Pt={class:"app_page"},It=X({__name:"index",setup(W){const H=S(!1),f=S(),B=Z().state,A=B.langs,D=We.isAction,_=ye.priceEncode,l=S({show:!1,key:"",placeholder:"商品编码",time:[N.Date("Y/m/d",N.StrToTime("-1 month")),N.Date("Y/m/d")],maxDate:N.Date("Y/m/d"),customTime:{active:"",list:[{label:"今天",value:"today"},{label:"昨天",value:"yesterday"},{label:"3个月",value:"month"},{label:"近1年",value:"year"}]},columns:[{label:"",value:"",slot:"customTime"},{label:A.select,value:"",slot:"time"},{label:"标签",value:"",slot:"labels"},{label:"商品分类",value:"",slot:"category"},{label:"商品编码, 多条空格分离",value:"",name:"sku_id"},{label:"暗码, 多条空格分离",value:"",name:"short_name"},{label:"款式编码, 多条空格分离",value:"",name:"i_id"},{label:"供应商",value:"",name:"supplier_name"},{label1:"开始库存",label2:"例如: -1",value:"",slot:"num"},{label1:"成本价",label2:"例如: 0.00",value:"",slot:"cost_price"},{label1:"供应链价",label2:"例如: 0.00",value:"",slot:"supply_price"},{label1:"标签价",label2:"例如: 0.00",value:"",slot:"sale_price"},{label1:"采购价",label2:"例如: 0.00",value:"",slot:"purchase_price"},{label1:"人民币采购价",label2:"例如: 0.00",value:"",slot:"supplier_price"},{label1:"吊牌价",label2:"例如: 0.00",value:"",slot:"market_price"},{label1:"重量",label2:"例如: 0.00",value:"",slot:"weight"},{label:"商品名称",value:"",name:"name"},{label:"颜色及规格",value:"",name:"properties_value"},{label:"品牌",value:"",name:"brand"},{label:"采购员",value:"",name:"owner"}],labels:"",category:"",num1:"",num2:"",weight1:"",weight2:"",cost_price1:"",cost_price2:"",supply_price1:"",supply_price2:"",sale_price1:"",sale_price2:"",purchase_price1:"",purchase_price2:"",supplier_price1:"",supplier_price2:"",market_price1:"",market_price2:""}),T=S({time:"",list:{num:0,cost_price:0,sale_price:0,purchase_price:0,market_price:0}}),d=S({columns:[{title:"ID",index:"id",slot:"id",width:"100px",textAlign:"center"},{title:A.date,index:"date",slot:"date",width:"90px",textAlign:"center"},{title:A.img,slot:"img",width:"60px",textAlign:"center"},{title:"商品编码",index:"sku_id",slot:"sku_id",order:"",width:"150px",minWidth:"150px",textAlign:"center"},{title:"暗码",index:"short_name",slot:"short_name",order:"",textAlign:"center"},{title:"款式编码",index:"i_id",slot:"i_id",order:"",textAlign:"center"},{title:"商品名称",index:"name",textAlign:"center"},{title:"颜色及规格",index:"properties_value",textAlign:"center"},{title:"成本价(元)",slot:"cost_price",textAlign:"center"},{title:"供应链价(元)",slot:"supply_price",textAlign:"center"},{title:"标签价(元)",slot:"sale_price",textAlign:"center"},{title:"采购价(W)",slot:"purchase_price",textAlign:"center"},{title:"人民币采购价(元)",slot:"supplier_price",textAlign:"center"},{title:"吊牌价(W)",slot:"market_price",textAlign:"center"},{title:"参照价(元)",slot:"other_price",textAlign:"center"},{title:"单位",slot:"unit",textAlign:"center"},{title:"重量",slot:"weight",textAlign:"center"},{title:"折扣",slot:"ratio",textAlign:"center"},{title:A.action,slot:"action",textAlign:"center",width:"40px"},{title:A.view,slot:"view",textAlign:"center",width:"40px"},{title:"库存",slot:"num",textAlign:"center"},{title:"仓库名称",index:"wms_co_name",order:"",textAlign:"center"},{title:"标签",index:"labels",textAlign:"center"},{title:"商品分类",index:"category",textAlign:"center"},{title:"品牌",index:"brand",textAlign:"center"},{title:"供应商",slot:"supplier_name",textAlign:"center"},{title:"采购员",index:"owner",textAlign:"center"}],data:[],num:0,total:0,order:""}),n=S({total:0,num:1,limit:100}),w=S({show:!1,title:"添加/编辑",data:{}}),y=S({show:!1,title:"删除",data:[]}),x=S({show:!1,title:"导出",num:0}),Y=S({show:!1,title:"导入"}),P=S({show:!1,title:"汇率换算"}),i=S({labels:[],category:[]}),v=S({show:!1,index:0,imgs:[]});Ce(()=>{B.token&&R()}),Te(()=>{H&&B.isLogin&&F()});const F=()=>{l.value.show=!1,d.value.data=[];const $=h.Loading();V.Post("erp_goods_info/list?lang="+B.lang,{token:B.token,data:E(),page:n.value.num,limit:n.value.limit,order:d.value.order},o=>{$.clear();const{code:t,msg:c,data:M,time:ee}=o.data;t==0?(T.value.time=ee,d.value.data=M,re(()=>ie())):h.Toast(c)}),n.value.total=0,T.value.list.num=0,T.value.list.cost_price=0,T.value.list.sale_price=0,T.value.list.purchase_price=0,T.value.list.market_price=0,V.Post("erp_goods_info/total?lang="+B.lang,{token:B.token,data:E()},o=>{const{code:t,msg:c,data:M,time:ee}=o.data;t==0?(T.value.time=ee,n.value.total=M.total,T.value.list.cost_price=M.cost_price,T.value.list.sale_price=M.sale_price,T.value.list.purchase_price=M.purchase_price,T.value.list.market_price=M.market_price,T.value.list.num=M.num):h.Toast(c)})},E=()=>{const $={key:l.value.key,stime:typeof l.value.time[0]=="string"?l.value.time[0]:N.Date("Y/m/d",l.value.time[0]),etime:typeof l.value.time[1]=="string"?l.value.time[1]:N.Date("Y/m/d",l.value.time[1]),labels:l.value.labels,category:l.value.category,num1:l.value.num1,num2:l.value.num2,cost_price1:l.value.cost_price1,cost_price2:l.value.cost_price2,supply_price1:l.value.supply_price1,supply_price2:l.value.supply_price2,sale_price1:l.value.sale_price1,sale_price2:l.value.sale_price2,purchase_price1:l.value.purchase_price1,purchase_price2:l.value.purchase_price2,supplier_price1:l.value.supplier_price1,supplier_price2:l.value.supplier_price2,market_price1:l.value.market_price1,market_price2:l.value.market_price2,weight1:l.value.weight1,weight2:l.value.weight2};for(let o of l.value.columns)o.name&&($[o.name]=o.value);return $},ae=($,o)=>{d.value.num=$,d.value.total=o},oe=$=>{d.value.order=$,F()},de=()=>{l.value.time=[N.Date("Y/m/d",N.StrToTime("-1 month")),N.Date("Y/m/d")],l.value.customTime.active="",l.value.key="",l.value.labels="",l.value.category="",l.value.num1="",l.value.num2="",l.value.cost_price1="",l.value.cost_price2="",l.value.supply_price1="",l.value.supply_price2="",l.value.sale_price1="",l.value.sale_price2="",l.value.purchase_price1="",l.value.purchase_price2="",l.value.supplier_price1="",l.value.supplier_price2="",l.value.market_price1="",l.value.market_price2="",l.value.weight1="",l.value.weight2="";for(let $ of l.value.columns)$.value="";d.value.order="",n.value.num=1,F()},ie=()=>{re(()=>{f.value.checkboxAll(!1)})},ve=$=>{switch(l.value.customTime.active=$,$){case"today":l.value.time=[N.Date("Y/m/d"),N.Date("Y/m/d")];break;case"yesterday":l.value.time=[N.Date("Y/m/d",N.StrToTime("-1 day")),N.Date("Y/m/d",N.StrToTime("-1 day"))];break;case"month":l.value.time=[N.Date("Y/m/d",N.StrToTime("-3 month")),N.Date("Y/m/d")];break;case"year":l.value.time=[N.Date("Y/m/d",N.StrToTime("-1 year")),N.Date("Y/m/d")];break}},ue=($,o={})=>{if(w.value.show=!0,w.value.data=o,w.value.data.type=$,$=="edit")w.value.title=A.edit+"( "+o.sku_id+" )",w.value.data.ids=[o.id];else if($=="edits"){const t=f.value.getData();let c=[],M=[];for(let ee of t)c.push(ee.id),M.push(ee.sku_id);w.value.title=A.edits,w.value.data.ids=c,w.value.data.sku_id=M.join(",")}},me=$=>{$&&(w.value.show=!1,F())},ce=()=>{y.value.show=!0;const $=f.value.getData();let o=[];for(let t of $)o.push(t.id);y.value.data=o},_e=$=>{$&&(y.value.show=!1,F())},m=$=>{x.value.show=!0,x.value.num=$},a=$=>{$&&(x.value.show=!1,ie())},s=()=>{Y.value.show=!0,Y.value.title="商品资料"},L=$=>{$&&F()},O=()=>{P.value.show=!0},q=$=>{$&&(P.value.show=!1,F())},K=$=>{let o=[],t=0;for(let c of d.value.data)c.img&&(c.img==$&&(v.value.index=t),o.push({label:c.sku_id,value:c.img,other:{颜色及规格:c.properties_value,标签价:c.sale_price+"元",吊牌价:c.market_price+"W"}}),t++);v.value.show=!0,v.value.imgs=o},G=($,o)=>{const t=f.value.getData();let c="";for(let M in t)c+=t[M][$]+" ";c?le.CopyText(c):le.CopyText(o)},R=()=>{V.Post("erp_goods_info/get_select?lang="+B.lang,{token:B.token},$=>{const{code:o,msg:t,data:c}=$.data;o==0?(i.value.labels=c.labels,i.value.category=c.category,H.value=!0):h.Toast(t)})};return($,o)=>(U(),C(ne,null,[u(Fe,{time:T.value.time,onRefresh:o[0]||(o[0]=t=>F())},{default:r(()=>[o[46]||(o[46]=k(" 成本金额: ",-1)),e("b",null,p(b(_)(T.value.list.cost_price)),1),o[47]||(o[47]=k(" 元   标签金额: ",-1)),e("b",null,p(b(_)(T.value.list.sale_price)),1),o[48]||(o[48]=k(" 元   采购金额: ",-1)),e("b",null,p(b(_)(T.value.list.purchase_price)),1),o[49]||(o[49]=k(" W   吊牌金额: ",-1)),e("b",null,p(b(_)(T.value.list.market_price)),1),o[50]||(o[50]=k(" W   库存: ",-1)),e("b",null,p(T.value.list.num),1)]),_:1},8,["time"]),e("div",Yl,[e("div",Wl,[u(Re,{columns:[{action:"import",slot:"import",is_action:!0},{action:"save",slot:"edit",is_action:!0},{action:"del",slot:"del",is_action:!0},{action:"line",slot:"line1"},{action:"exchange",slot:"exchange",is_action:!0},{action:"line",slot:"line2"},{action:"export",slot:"export",is_action:!0}]},{import:r(()=>[u(I,{effect:"dark",type:"primary",icon:"ui ui_add",padding:"0 16px 0 8px",onClick:o[1]||(o[1]=t=>s())},{default:r(()=>[k(p(b(A).add),1)]),_:1})]),edit:r(()=>[u(I,{effect:"plain",type:"primary",icon:"ui ui_edit",padding:"0 16px 0 8px",disabled:d.value.num==0,onClick:o[2]||(o[2]=t=>ue("edits"))},{default:r(()=>[k(p(b(A).edits),1)]),_:1},8,["disabled"])]),del:r(()=>[u(I,{effect:"plain",type:"danger",icon:"ui ui_del",padding:"0 16px 0 8px",disabled:d.value.num==0,onClick:o[3]||(o[3]=t=>ce())},{default:r(()=>[k(p(b(A).del)+"("+p(d.value.num)+")",1)]),_:1},8,["disabled"])]),line1:r(()=>[b(D)("import")?(U(),C("span",Bl,"|")):fe("",!0)]),exchange:r(()=>[u(I,{effect:"plain",icon:"ui ui_edit",padding:"0 16px 0 8px",disabled:!n.value.total,onClick:o[4]||(o[4]=t=>O())},{default:r(()=>[k(p(P.value.title)+"("+p(n.value.total)+")",1)]),_:1},8,["disabled"])]),line2:r(()=>[b(D)("exchange")?(U(),C("span",Fl,"|")):fe("",!0)]),export:r(()=>[u(I,{effect:"plain",icon:"ui ui_export",padding:"0 16px 0 8px",disabled:!n.value.total,onClick:o[5]||(o[5]=t=>m(n.value.total))},{default:r(()=>[k(p(b(A).export)+"("+p(n.value.total)+")",1)]),_:1},8,["disabled"])]),_:1})]),e("div",Nl,[u(Pe,{show:l.value.show,"onUpdate:show":o[25]||(o[25]=t=>l.value.show=t),keys:l.value.key,"onUpdate:keys":o[26]||(o[26]=t=>l.value.key=t),columns:l.value.columns,placeholder:l.value.placeholder,onKeyup:o[27]||(o[27]=ke(t=>{n.value.num=1,F()},["enter"])),onSearch:o[28]||(o[28]=t=>{n.value.num=1,F()}),onReset:o[29]||(o[29]=t=>de())},{customTime:r(t=>[e("ul",Il,[(U(!0),C(ne,null,De(l.value.customTime.list,c=>(U(),C("li",{key:c.value,onClick:M=>ve(c.value),class:be({active:l.value.customTime.active===c.value})},p(c.label),11,jl))),128))])]),time:r(t=>[u(Se,{value:l.value.time,"onUpdate:value":o[6]||(o[6]=c=>l.value.time=c),range:"",maxDate:l.value.maxDate,placeholder:t.label},null,8,["value","maxDate","placeholder"])]),labels:r(t=>[u(z,{value:l.value.labels,"onUpdate:value":o[7]||(o[7]=c=>l.value.labels=c),options:i.value.labels,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),category:r(t=>[u(z,{value:l.value.category,"onUpdate:value":o[8]||(o[8]=c=>l.value.category=c),options:i.value.category,placeholder:t.label,clearable:"",multiple:""},null,8,["value","options","placeholder"])]),num:r(t=>[e("div",Hl,[u(g,{value:l.value.num1,"onUpdate:value":o[9]||(o[9]=c=>l.value.num1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.num2,"onUpdate:value":o[10]||(o[10]=c=>l.value.num2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),cost_price:r(t=>[e("div",Ml,[u(g,{value:l.value.cost_price1,"onUpdate:value":o[11]||(o[11]=c=>l.value.cost_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.cost_price2,"onUpdate:value":o[12]||(o[12]=c=>l.value.cost_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),supply_price:r(t=>[e("div",Ol,[u(g,{value:l.value.supply_price1,"onUpdate:value":o[13]||(o[13]=c=>l.value.supply_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.supply_price2,"onUpdate:value":o[14]||(o[14]=c=>l.value.supply_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),sale_price:r(t=>[e("div",Vl,[u(g,{value:l.value.sale_price1,"onUpdate:value":o[15]||(o[15]=c=>l.value.sale_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.sale_price2,"onUpdate:value":o[16]||(o[16]=c=>l.value.sale_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),purchase_price:r(t=>[e("div",El,[u(g,{value:l.value.purchase_price1,"onUpdate:value":o[17]||(o[17]=c=>l.value.purchase_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.purchase_price2,"onUpdate:value":o[18]||(o[18]=c=>l.value.purchase_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),supplier_price:r(t=>[e("div",Kl,[u(g,{value:l.value.supplier_price1,"onUpdate:value":o[19]||(o[19]=c=>l.value.supplier_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.supplier_price2,"onUpdate:value":o[20]||(o[20]=c=>l.value.supplier_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),market_price:r(t=>[e("div",zl,[u(g,{value:l.value.market_price1,"onUpdate:value":o[21]||(o[21]=c=>l.value.market_price1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.market_price2,"onUpdate:value":o[22]||(o[22]=c=>l.value.market_price2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),weight:r(t=>[e("div",ql,[u(g,{value:l.value.weight1,"onUpdate:value":o[23]||(o[23]=c=>l.value.weight1=c),width:"49%",placeholder:t.label1},null,8,["value","placeholder"]),u(g,{value:l.value.weight2,"onUpdate:value":o[24]||(o[24]=c=>l.value.weight2=c),width:"49%",placeholder:t.label2},null,8,["value","placeholder"])])]),_:1},8,["show","keys","columns","placeholder"])])]),e("div",Gl,[u(we,{ref_key:"tableList",ref:f,overflow:"auto",columns:d.value.columns,options:d.value.data,onOrderBy:oe,onPartially:ae},{id:r(t=>[e("div",Jl,p(t.id),1)]),date:r(t=>[e("div",Ql,[u(Le,{title:"创建: "+t.ctime+`
更新: `+t.utime},{default:r(()=>[k(p(t.utime=="1970-01-01 08:00:00"?t.ctime.substr(0,10):t.utime.substr(0,10)),1)]),_:2},1032,["title"])])]),img:r(t=>[e("div",Xl,[e("span",{onClick:c=>t.img?K(t.img):""},[u(Be,{img:t.img?t.img+"&x-oss-process=image/resize,h_40":"",isView:!1},null,8,["img"])],8,Zl)])]),sku_id:r(t=>[e("div",et,[e("b",null,p(t.sku_id),1),e("span",{onClick:c=>G("sku_id",t.sku_id)},"复",8,lt)])]),short_name:r(t=>[e("div",tt,p(t.short_name||"-"),1)]),i_id:r(t=>[e("div",at,p(t.i_id||"-"),1)]),cost_price:r(t=>[e("div",st,[t.cost_price==="-"?(U(),C("b",ot,"***")):t.ratio!="1.00"||t.ratio_cost!="1.00"?(U(),C("span",it,[e("del",null,p(b(_)(t.cost_price)),1),o[51]||(o[51]=k()),e("b",null,p(b(_)(t.cost_price*(t.ratio<1?t.ratio:t.ratio_cost))),1)])):(U(),C("b",ut,p(t.cost_price>0?b(_)(t.cost_price):"-"),1))])]),supply_price:r(t=>[e("div",nt,[t.supply_price==="-"?(U(),C("b",rt,"***")):t.ratio!="1.00"||t.ratio_supply!="1.00"?(U(),C("span",pt,[e("del",null,p(b(_)(t.supply_price)),1),o[52]||(o[52]=k()),e("b",null,p(b(_)(t.supply_price*(t.ratio<1?t.ratio:t.ratio_supply))),1)])):(U(),C("b",dt,p(t.supply_price>0?b(_)(t.supply_price):"-"),1))])]),sale_price:r(t=>[e("div",vt,[t.ratio!="1.00"||t.ratio_sale!="1.00"?(U(),C("span",mt,[e("del",null,p(b(_)(t.sale_price)),1),o[53]||(o[53]=k()),e("b",null,p(b(_)(t.sale_price*(t.ratio<1?t.ratio:t.ratio_sale))),1)])):(U(),C("b",ct,p(t.sale_price>0?b(_)(t.sale_price):"-"),1))])]),purchase_price:r(t=>[e("div",_t,[t.purchase_price==="-"?(U(),C("b",gt,"***")):t.ratio!="1.00"||t.ratio_purchase!="1.00"?(U(),C("span",ft,[e("del",null,p(b(_)(t.purchase_price)),1),o[54]||(o[54]=k()),e("b",null,p(b(_)(t.purchase_price*(t.ratio<1?t.ratio:t.ratio_purchase))),1)])):(U(),C("b",bt,p(t.purchase_price>0?b(_)(t.purchase_price):"-"),1))])]),supplier_price:r(t=>[e("div",wt,[t.ratio!="1.00"||t.ratio_supplier!="1.00"?(U(),C("span",yt,[e("del",null,p(b(_)(t.supplier_price)),1),o[55]||(o[55]=k()),e("b",null,p(b(_)(t.supplier_price*(t.ratio<1?t.ratio:t.ratio_supplier))),1)])):(U(),C("b",kt,p(t.supplier_price>0?b(_)(t.supplier_price):"-"),1))])]),market_price:r(t=>[e("div",xt,[t.ratio!="1.00"||t.ratio_market!="1.00"?(U(),C("span",ht,[e("del",null,p(b(_)(t.market_price)),1),o[56]||(o[56]=k()),e("b",null,p(b(_)(t.market_price*(t.ratio<1?t.ratio:t.ratio_market))),1)])):(U(),C("b",Ut,p(t.market_price>0?b(_)(t.market_price):"-"),1))])]),other_price:r(t=>[e("div",$t,p(t.other_price>0?b(_)(t.other_price):"-"),1)]),unit:r(t=>[e("div",Ct,p(t.unit||"-"),1)]),weight:r(t=>[e("div",Tt,p(t.weight||"-"),1)]),ratio:r(t=>[e("div",{class:be(["tCenter",t.ratio<1?"c_danger":"c_info"])},p(t.ratio),3)]),action:r(t=>[e("div",At,[b(D)("save")?(U(),se(I,{key:0,onClick:c=>ue("edit",t)},{default:r(()=>[k(p(b(A).edit),1)]),_:1},8,["onClick"])):(U(),C("span",St,"-"))])]),view:r(t=>[e("div",Dt,[u(I,{type:"primary",effect:"text",padding:"0 4px",onClick:c=>{b(B).goods.show=!0,b(B).goods.sku_id=t.sku_id}},{default:r(()=>[k(p(b(A).flow),1)]),_:1},8,["onClick"])])]),num:r(t=>[e("div",Lt,[e("b",null,p(t.num),1)])]),supplier_name:r(t=>[e("div",Rt,p(t.supplier_name==="-"?"***":t.supplier_name),1)]),_:1},8,["columns","options"])]),e("div",Pt,[u(Ye,{total:n.value.total,"onUpdate:total":o[30]||(o[30]=t=>n.value.total=t),page:n.value.num,"onUpdate:page":[o[31]||(o[31]=t=>n.value.num=t),o[32]||(o[32]=t=>F())],limit:n.value.limit,"onUpdate:limit":[o[33]||(o[33]=t=>n.value.limit=t),o[34]||(o[34]=t=>{n.value.num=1,F()})]},null,8,["total","page","limit"])]),u(Ke,{show:w.value.show,"onUpdate:show":o[35]||(o[35]=t=>w.value.show=t),title:w.value.title,data:w.value.data,onSubmit:o[36]||(o[36]=t=>me(t))},null,8,["show","title","data"]),u(qe,{show:y.value.show,"onUpdate:show":o[37]||(o[37]=t=>y.value.show=t),data:y.value.data,onSubmit:o[38]||(o[38]=t=>_e(t))},null,8,["show","data"]),u(Je,{show:x.value.show,"onUpdate:show":o[39]||(o[39]=t=>x.value.show=t),data:E(),order:d.value.order,num:x.value.num,onSubmit:o[40]||(o[40]=t=>a(t))},null,8,["show","data","order","num"]),u(Rl,{show:Y.value.show,"onUpdate:show":o[41]||(o[41]=t=>Y.value.show=t),title:Y.value.title,onSubmit:o[42]||(o[42]=t=>L(t))},null,8,["show","title"]),u(Pl,{show:P.value.show,"onUpdate:show":o[43]||(o[43]=t=>P.value.show=t),title:P.value.title,data:E(),num:n.value.total,onSubmit:o[44]||(o[44]=t=>q(t))},null,8,["show","title","data","num"]),u(Ae,{show:v.value.show,"onUpdate:show":o[45]||(o[45]=t=>v.value.show=t),index:v.value.index,options:v.value.imgs},null,8,["show","index","options"])],64))}});export{It as default};
