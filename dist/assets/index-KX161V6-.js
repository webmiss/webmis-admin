import{g as _}from"./index-DJZygeZI.js";import{d as P,r as v,w as E,n as s,s as b,v as w,i as c,A as U,f as x,p as h,x as L,t as C,o,_ as F}from"./index-CPJf41Zr.js";const I=["onClick"],T={class:"label"},j=["onClick"],q={class:"label"},G=["onClick"],H={class:"label"},J={class:"label"},K=P({__name:"index",props:{options:{type:Array,default:[]},width:{type:String,default:"100%"},padding:{type:String,default:"2px 0"},level:{type:Number,default:3}},emits:["update:value","data"],setup(f,{emit:V}){const $=f,N=V,r=v([]);E(()=>$.options,t=>{r.value=t,B()},{deep:!0});const k=(t,i,e,n=!0)=>{let l,d,a,y;i=="1"?(l=r[e[0]],l.checked=!!t,l.children&&m(l.children,!!t)):i=="2"?(d=r[e[0]].children[e[1]],d.checked=!!t,d.children&&m(d.children,!!t),l=r[e[0]],p(l)):i=="3"?(a=r[e[0]].children[e[1]].children[e[2]],a.checked=!!t,a.children&&m(a.children,!!t),l=r[e[0]],d=r[e[0]].children[e[1]],p(d),p(l)):i=="4"&&(y=r[e[0]].children[e[1]].children[e[2]].children[e[3]],y.checked=!!t,l=r[e[0]],d=r[e[0]].children[e[1]],a=r[e[0]].children[e[1]].children[e[2]],p(a),p(d),p(l)),B(),n&&(N("update:value",z()),N("data",r))},p=t=>{let i=S(t.children);i==0?t.checked=!1:(i==t.children.length,t.checked=!0)},m=(t,i)=>{for(let e in t)t[e].checked=i,t[e].children&&m(t[e].children,i)},B=()=>{let t=!1,i=!1,e=!1;for(let n of r.value)if(t=n.children?g(n.children):!1,n.partially=!!(n.checked&&t),!!n.children){for(let l of n.children)if(i=l.children?g(l.children):!1,l.partially=!!(l.checked&&i),!!l.children)for(let d of l.children)e=d.children?g(d.children):!1,d.partially=!!(d.checked&&e),d.children}},g=t=>{let i=!1;for(let e of t)if(e.children){if(i=g(e.children),i)return i}else if(S(t)!=t.length)return!0;return i},S=t=>{let i=0;for(let e of t)e.checked&&i++;return i},z=()=>{let t=[];for(let i of r.value)if(i.checked&&t.push(i.value),!!i.children){for(let e of i.children)if(e.checked&&t.push(e.value),!!e.children){for(let n of e.children)if(n.checked&&t.push(n.value),!!n.children)for(let l of n.children)l.checked&&t.push(l.value)}}return t};return(t,i)=>(o(),s("div",{class:"wm-tree_body",style:h({width:f.width})},[(o(!0),s(b,null,w(r.value,(e,n)=>(o(),s("div",{class:"wm-tree",key:n},[c("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"4px"}),onClick:l=>e.display=!e.display},[c("i",{class:L(e.children?"ui ui_arrow_right":""),style:h({transform:e.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:e.children&&e.checked&&e.partially,"onUpdate:value":l=>k(l,"1",[n,-1,-1,-1]),options:{label:"",value:e.value,checked:e.checked,disabled:e.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",T,C(e.label),1)],12,I),e.children&&e.display?(o(!0),s(b,{key:0},w(e.children,(l,d)=>(o(),s("div",{class:"wm-tree",key:d},[c("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"20px"}),onClick:a=>l.display=!l.display},[c("i",{class:L(l.children?"ui ui_arrow_right":""),style:h({transform:l.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:l.children&&l.checked&&l.partially,"onUpdate:value":a=>k(a,"2",[n,d,-1,-1]),options:{label:"",value:l.value,checked:l.checked,disabled:l.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",q,C(l.label),1)],12,j),l.children&&l.display?(o(!0),s(b,{key:0},w(l.children,(a,y)=>(o(),s("div",{class:"wm-tree",key:y},[c("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"36px"}),onClick:u=>a.display=!a.display},[c("i",{class:L(a.children?"ui ui_arrow_right":""),style:h({transform:a.display?"rotate(90deg)":"rotate(0deg)"})},null,6),x(_,{partially:a.children&&a.checked&&a.partially,"onUpdate:value":u=>k(u,"3",[n,d,y,-1]),options:{label:"",value:a.value,checked:a.checked,disabled:a.disabled}},null,8,["partially","onUpdate:value","options"]),c("span",H,C(a.label),1)],12,G),a.children&&a.display?(o(!0),s(b,{key:0},w(a.children,(u,D)=>(o(),s("div",{class:"wm-tree",key:D},[c("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"52px"})},[i[0]||(i[0]=c("i",null,null,-1)),x(_,{"onUpdate:value":A=>k(A,"4",[n,d,y,D]),options:{label:"",value:u.value,checked:u.checked,disabled:u.disabled}},null,8,["onUpdate:value","options"]),c("span",J,C(u.label),1)],4)]))),128)):U("",!0)]))),128)):U("",!0)]))),128)):U("",!0)]))),128))],4))}}),Q=F(K,[["__scopeId","data-v-8c5818d5"]]);export{Q as w};
