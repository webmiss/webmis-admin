import{d as P,r as A,w as E,n as s,s as _,v as b,i as r,B as v,f as w,p as h,x as U,K as x,t as C,o as u,_ as F}from"./index--Aaw8Kh1.js";const I=["onClick"],K={class:"label"},T=["onClick"],j={class:"label"},q=["onClick"],G={class:"label"},H={class:"label"},J=P({__name:"index",props:{options:{type:Array,default:[]},width:{type:String,default:"100%"},padding:{type:String,default:"2px 0"},level:{type:Number,default:3}},emits:["update:value","data"],setup(f,{emit:D}){const V=f,L=D,c=A([]);E(()=>V.options,t=>{c.value=t,N()},{deep:!0});const k=(t,a,e,n=!0)=>{let l,d,i,y;a=="1"?(l=c.value[e[0]],l.checked=!!t,l.children&&m(l.children,!!t)):a=="2"?(d=c.value[e[0]].children[e[1]],d.checked=!!t,d.children&&m(d.children,!!t),l=c.value[e[0]],p(l)):a=="3"?(i=c.value[e[0]].children[e[1]].children[e[2]],i.checked=!!t,i.children&&m(i.children,!!t),l=c.value[e[0]],d=c.value[e[0]].children[e[1]],p(d),p(l)):a=="4"&&(y=c.value[e[0]].children[e[1]].children[e[2]].children[e[3]],y.checked=!!t,l=c.value[e[0]],d=c.value[e[0]].children[e[1]],i=c.value[e[0]].children[e[1]].children[e[2]],p(i),p(d),p(l)),N(),n&&(L("update:value",$()),L("data",c.value))},p=t=>{let a=B(t.children);a==0?t.checked=!1:(a==t.children.length,t.checked=!0)},m=(t,a)=>{for(let e in t)t[e].checked=a,t[e].children&&m(t[e].children,a)},N=()=>{let t=!1,a=!1,e=!1;for(let n of c.value)if(t=n.children?g(n.children):!1,n.partially=!!(n.checked&&t),!!n.children){for(let l of n.children)if(a=l.children?g(l.children):!1,l.partially=!!(l.checked&&a),!!l.children)for(let d of l.children)e=d.children?g(d.children):!1,d.partially=!!(d.checked&&e),d.children}},g=t=>{let a=!1;for(let e of t)if(e.children){if(a=g(e.children),a)return a}else if(B(t)!=t.length)return!0;return a},B=t=>{let a=0;for(let e of t)e.checked&&a++;return a},$=()=>{let t=[];for(let a of c.value)if(a.checked&&t.push(a.value),!!a.children){for(let e of a.children)if(e.checked&&t.push(e.value),!!e.children){for(let n of e.children)if(n.checked&&t.push(n.value),!!n.children)for(let l of n.children)l.checked&&t.push(l.value)}}return t};return(t,a)=>(u(),s("div",{class:"wm-tree_body",style:h({width:f.width})},[(u(!0),s(_,null,b(c.value,(e,n)=>(u(),s("div",{class:"wm-tree",key:n},[r("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"4px"}),onClick:l=>e.display=!e.display},[r("i",{class:U(e.children?"ui ui_arrow_right":""),style:h({transform:e.display?"rotate(90deg)":"rotate(0deg)"})},null,6),w(x,{partially:e.children&&e.checked&&e.partially,"onUpdate:value":l=>k(l,"1",[n,-1,-1,-1]),options:{label:"",value:e.value,checked:e.checked,disabled:e.disabled}},null,8,["partially","onUpdate:value","options"]),r("span",K,C(e.label),1)],12,I),e.children&&e.display?(u(!0),s(_,{key:0},b(e.children,(l,d)=>(u(),s("div",{class:"wm-tree",key:d},[r("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"20px"}),onClick:i=>l.display=!l.display},[r("i",{class:U(l.children?"ui ui_arrow_right":""),style:h({transform:l.display?"rotate(90deg)":"rotate(0deg)"})},null,6),w(x,{partially:l.children&&l.checked&&l.partially,"onUpdate:value":i=>k(i,"2",[n,d,-1,-1]),options:{label:"",value:l.value,checked:l.checked,disabled:l.disabled}},null,8,["partially","onUpdate:value","options"]),r("span",j,C(l.label),1)],12,T),l.children&&l.display?(u(!0),s(_,{key:0},b(l.children,(i,y)=>(u(),s("div",{class:"wm-tree",key:y},[r("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"36px"}),onClick:o=>i.display=!i.display},[r("i",{class:U(i.children?"ui ui_arrow_right":""),style:h({transform:i.display?"rotate(90deg)":"rotate(0deg)"})},null,6),w(x,{partially:i.children&&i.checked&&i.partially,"onUpdate:value":o=>k(o,"3",[n,d,y,-1]),options:{label:"",value:i.value,checked:i.checked,disabled:i.disabled}},null,8,["partially","onUpdate:value","options"]),r("span",G,C(i.label),1)],12,q),i.children&&i.display?(u(!0),s(_,{key:0},b(i.children,(o,S)=>(u(),s("div",{class:"wm-tree",key:S},[r("div",{class:"wm-tree_content flex_left",style:h({padding:f.padding,paddingLeft:"52px"})},[a[0]||(a[0]=r("i",null,null,-1)),w(x,{"onUpdate:value":z=>k(z,"4",[n,d,y,S]),options:{label:"",value:o.value,checked:o.checked,disabled:o.disabled}},null,8,["onUpdate:value","options"]),r("span",H,C(o.label),1)],4)]))),128)):v("",!0)]))),128)):v("",!0)]))),128)):v("",!0)]))),128))],4))}}),O=F(J,[["__scopeId","data-v-b4e16d8b"]]);export{O as w};
