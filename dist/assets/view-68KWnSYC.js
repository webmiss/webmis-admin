import{d as U,g as H,u as N,r as u,w as A,n as c,p as g,i as o,A as F,t as a,b,s as D,v as j,x as M,B as E,U as W,D as G,o as r,_ as J}from"./index-CJjQp9e8.js";const K=["src"],O={ref:"wmImageLoading",class:"loading_img"},P={key:2,class:"wm-image_view_info"},Q={key:0},X={class:"prev"},Y={class:"next"},Z=U({__name:"view",props:{show:{type:Boolean,default:!1},index:{type:Number,default:0},options:{type:Array,default:[]},bgColor:{type:String,default:"rgba(0,0,0,.8)"},icoSize:{type:String,default:"32px"}},emits:["update:show"],setup(s,{emit:V}){const l=s,{proxy:h}=H(),$=V,y=N().state,w=u(!1),n=u(0),k=u(""),f=u(!1),p=u(""),z=u(""),S=u("");A(()=>l.show,e=>{e&&(n.value=l.index,d(n.value),window.addEventListener("resize",C),document.addEventListener("keydown",I))},{deep:!0});const C=()=>{l.show&&d(n.value)},I=e=>{switch(e.keyCode||e.which){case 37:d(n.value-1);break;case 39:d(n.value+1);break;case 27:x();break}},d=e=>{e<0&&(e=l.options.length-1),e>=l.options.length&&(e=0),n.value=e;let t=l.options[e]?l.options[e].value:"";if(!t)return x(),W.Toast("无图片地址");p.value=l.options[e].label,z.value=l.options[e].size||"",S.value=l.options[e].other||"",w.value=!1;const i=h.$refs.wmImageLoading;i.src=t,i.onload=()=>{const v=document.body.clientWidth,L=document.body.clientHeight,R=v/L,T=i.width/i.height;let q="auto",B="auto";(i.width>v||i.height>L)&&(T>R?q="100%":B="100%"),w.value=!0,k.value=t,G(()=>{const m=h.$refs.wmImageView;m.style.opacity="0",m.style.width="0",m.style.height="0",setTimeout(()=>{m.style.opacity="1",m.style.width=q,m.style.height=B},300)})}},_=()=>{f.value=!f.value;let e=h.$refs.wmImageViewBg;e.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():e.webkitRequestFullScreen():e.mozRequestFullScreen?document.mozFullScreen?document.mozCancelFullScreen():e.mozRequestFullScreen():e.msRequestFullscreen?document.msFullscreenElement?document.msExitFullscreen():e.msRequestFullscreen():e.requestFullscreen&&(document.exitFullscreen?document.exitFullscreen():e.requestFullscreen())},x=()=>{$("update:show",!1),f.value&&_(),window.removeEventListener("resize",C),document.removeEventListener("keydown",I)};return(e,t)=>(r(),c("div",{ref:"wmImageViewBg",class:"wm-image_view",style:g({backgroundColor:s.bgColor,visibility:s.show?"inherit":"hidden",opacity:s.show?"1":"0"})},[w.value?(r(),c("img",{key:1,ref:"wmImageView",src:k.value,style:g({visibility:w.value?"inherit":"hidden"})},null,12,K)):(r(),c("i",{key:0,class:"ui ui_loading loading",style:g({fontSize:s.icoSize})},null,4)),o("img",O,null,512),p.value?(r(),c("div",P,[o("span",null,a(b(y).langs.name)+": "+a(p.value),1),z.value?(r(),c("span",Q,a(b(y).langs.size)+": "+a(z.value),1)):F("",!0),S.value?(r(!0),c(D,{key:1},j(S.value,(i,v)=>(r(),c("span",{key:v},a(v)+": "+a(i),1))),128)):F("",!0),o("span",null,a(b(y).langs.page)+": "+a(n.value+1)+"/"+a(s.options.length),1)])):F("",!0),o("i",{class:"ui ui_close tools close",onClick:t[0]||(t[0]=i=>x())}),o("i",{class:M(["ui tools full",f.value?"ui_video_fullscreen_exit":"ui_video_fullscreen"]),onClick:t[1]||(t[1]=i=>_())},null,2),o("div",X,[o("i",{class:"ui ui_arrow_left",onClick:t[2]||(t[2]=E(i=>d(n.value-1),["stop"])),style:g({width:"calc("+s.icoSize+" + 16px)",lineHeight:"calc("+s.icoSize+" + 16px)",fontSize:"calc("+s.icoSize+" - 12px)"})},null,4)]),o("div",Y,[o("i",{class:"ui ui_arrow_right",onClick:t[3]||(t[3]=E(i=>d(n.value+1),["stop"])),style:g({width:"calc("+s.icoSize+" + 16px)",lineHeight:"calc("+s.icoSize+" + 16px)",fontSize:"calc("+s.icoSize+" - 12px)"})},null,4)])],4))}}),se=J(Z,[["__scopeId","data-v-7696268a"]]);export{se as w};
