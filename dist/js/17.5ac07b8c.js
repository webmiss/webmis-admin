"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[17],{7053:function(e,t,l){l.d(t,{Z:function(){return r}});var a=l(6252),d=l(3577);function i(e,t,l,i,o,s){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_add",style:(0,d.j5)({padding:e.size,backgroundColor:e.bgColor?e.bgColor:""})},null,4)}var o=(0,a.aZ)({name:"ActionAdd",props:{size:{type:String,default:"9px"},bgColor:{type:String,default:""}}}),s=l(3744);const n=(0,s.Z)(o,[["render",i],["__scopeId","data-v-356e6bc2"]]);var r=n},9821:function(e,t,l){l.d(t,{Z:function(){return r}});var a=l(6252),d=l(3577);function i(e,t,l,i,o,s){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_close",style:(0,d.j5)({padding:e.size,backgroundColor:e.bgColor?e.bgColor:""})},null,4)}var o=(0,a.aZ)({name:"ActionClose",props:{size:{type:String,default:"9px"},bgColor:{type:String,default:""}}}),s=l(3744);const n=(0,s.Z)(o,[["render",i],["__scopeId","data-v-539e26e0"]]);var r=n},7205:function(e,t,l){l.r(t),l.d(t,{default:function(){return Se}});var a=l(6252),d=l(3577),i=l(9963);const o=e=>((0,a.dD)("data-v-1bea2fca"),e=e(),(0,a.Cn)(),e),s={class:"app_addr flex"},n={class:"addr flex"},r=o((()=>(0,a._)("span",null,[(0,a._)("i",{class:"ui ui_arrow_right"})],-1))),u={class:"app_addr_more flex"},p=o((()=>(0,a._)("span",{class:"info"}," ",-1))),m=o((()=>(0,a._)("i",{class:"ui ui_refresh"},null,-1))),c=[m],h={class:"app_content flex"},_={class:"app_ct_left"},w={class:"app_action_body flex"},f={class:"app_action_list flex_left"},g=o((()=>(0,a._)("i",{class:"ui ui_search"},null,-1))),v=o((()=>(0,a._)("li",{class:"line"},"|",-1))),b={key:0},k={key:1},x={key:2},y={class:"app_action_list flex_left"},U=o((()=>(0,a._)("li",{class:"line"},"|",-1))),W={class:"app_table scrollbar"},Z={width:"40"},D={width:"40"},C=o((()=>(0,a._)("td",{width:"40",class:"tCenter"},"图标",-1))),S={width:"140"},I={width:"140"},z=o((()=>(0,a._)("td",{width:"60",class:"tCenter"},"排序",-1))),O=o((()=>(0,a._)("td",{width:"60",class:"tCenter"},"权限",-1))),A={width:"30",class:"checkbox wm-table_checkbox"},R={class:"tCenter"},B={key:0,class:"menus_icon"},T={key:1},P={class:"tCenter"},F={class:"tCenter"},j={key:2},J={key:0},K=o((()=>(0,a._)("td",{height:"160",class:"null",colspan:"11"},null,-1))),L=[K],N=o((()=>(0,a._)("td",{class:"lable"},"所属",-1))),q=o((()=>(0,a._)("td",{class:"lable"},"名称",-1))),$=o((()=>(0,a._)("td",{class:"lable"},"控制器",-1))),E=o((()=>(0,a._)("td",{class:"lable"},"URL",-1))),H=o((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),Y=o((()=>(0,a._)("td",{class:"lable"},"排序",-1))),M=o((()=>(0,a._)("td",{class:"lable"},"所属",-1))),V=o((()=>(0,a._)("td",{class:"lable"},"名称",-1))),G=o((()=>(0,a._)("td",{class:"lable"},"控制器",-1))),Q=o((()=>(0,a._)("td",{class:"lable"},"URL",-1))),X=o((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),ee=o((()=>(0,a._)("td",{class:"lable"},"排序",-1))),te=o((()=>(0,a._)("td",null,"名称",-1))),le=o((()=>(0,a._)("td",null,"动作",-1))),ae=o((()=>(0,a._)("td",{width:"100"},"权限",-1))),de={width:"30"},ie={class:"perm_an"},oe={class:"perm_an"};function se(e,t,l,o,m,K){const se=(0,a.up)("wm-input"),ne=(0,a.up)("wm-search"),re=(0,a.up)("wm-button"),ue=(0,a.up)("wm-table-order"),pe=(0,a.up)("wm-checkbox"),me=(0,a.up)("wm-table"),ce=(0,a.up)("wm-page"),he=(0,a.up)("wm-table-form"),_e=(0,a.up)("wm-dialog"),we=(0,a.up)("wm-row"),fe=(0,a.up)("wm-add"),ge=(0,a.up)("wm-close");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",s,[(0,a._)("div",n,[(0,a._)("span",null,(0,d.zw)(e.state.menuTitle[1]),1),r,(0,a._)("span",{class:"link",onClick:t[0]||(t[0]=t=>e.$router.replace({path:"/refresh"}))},(0,d.zw)(e.state.menuTitle[2]),1)]),(0,a._)("div",u,[p,(0,a._)("span",{class:"reload",title:"刷新",onClick:t[1]||(t[1]=t=>e.loadData())},c)])]),(0,a._)("div",h,[(0,a.wy)((0,a._)("div",_,[(0,a.Wm)(ne,{show:e.sea.show,"onUpdate:show":t[8]||(t[8]=t=>e.sea.show=t),"onUpdate:submit":t[9]||(t[9]=t=>e.subSea())},{default:(0,a.w5)((()=>[(0,a._)("li",null,[(0,a.Wm)(se,{value:e.sea.form.fid,"onUpdate:value":t[2]||(t[2]=t=>e.sea.form.fid=t),placeholder:"FID",clearable:"",onKeyup:t[3]||(t[3]=(0,i.D2)((t=>e.subSea()),["enter"]))},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(se,{value:e.sea.form.title,"onUpdate:value":t[4]||(t[4]=t=>e.sea.form.title=t),placeholder:"菜单名称",clearable:"",onKeyup:t[5]||(t[5]=(0,i.D2)((t=>e.subSea()),["enter"]))},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(se,{value:e.sea.form.url,"onUpdate:value":t[6]||(t[6]=t=>e.sea.form.url=t),placeholder:"API关键字",clearable:"",onKeyup:t[7]||(t[7]=(0,i.D2)((t=>e.subSea()),["enter"]))},null,8,["value"])])])),_:1},8,["show"])],512),[[i.F8,e.sea.show]]),(0,a._)("div",{class:"app_ct_right",style:(0,d.j5)({width:e.sea.show?"calc(100% - 260px)":""})},[(0,a._)("div",w,[(0,a._)("ul",f,[(0,a._)("li",null,[(0,a.Wm)(re,{type:"primary",effect:"text",padding:"0 4px",class:"flex",onClick:t[10]||(t[10]=t=>e.sea.show=!e.sea.show)},{default:(0,a.w5)((()=>[g,(0,a.Uk)(" 搜索")])),_:1})]),v,e.getters.actionShow("add")?((0,a.wg)(),(0,a.iD)("li",b,[(0,a.Wm)(re,{effect:"text",padding:"0 4px",onClick:t[11]||(t[11]=t=>e.add.show=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)("添加")])),_:1})])):(0,a.kq)("",!0),e.getters.actionShow("edit")?((0,a.wg)(),(0,a.iD)("li",k,[(0,a.Wm)(re,{type:"primary",effect:"text",padding:"0 4px",onClick:t[12]||(t[12]=t=>e.editData())},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:1})])):(0,a.kq)("",!0),e.getters.actionShow("del")?((0,a.wg)(),(0,a.iD)("li",x,[(0,a.Wm)(re,{type:"danger",effect:"text",padding:"0 4px",onClick:t[13]||(t[13]=t=>e.delData())},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:1})])):(0,a.kq)("",!0)]),(0,a._)("ul",y,[(0,a._)("li",null,[(0,a.Wm)(re,{type:"primary",effect:"text",padding:"0 2px"},{default:(0,a.w5)((()=>[(0,a.Uk)("导出")])),_:1})]),U,(0,a._)("li",null,[(0,a.Wm)(re,{type:"primary",effect:"text",padding:"0 2px"},{default:(0,a.w5)((()=>[(0,a.Uk)("打印")])),_:1})])])]),(0,a._)("div",W,[(0,a.Wm)(me,{ref:"Table",data:e.page.list,style:{"min-width":"1080px"}},{title:(0,a.w5)((()=>[(0,a._)("td",Z,[(0,a.Uk)("ID"),(0,a.Wm)(ue,{value:e.oby.list.id,"onUpdate:value":t[14]||(t[14]=t=>e.OrderBy("id",t))},null,8,["value"])]),(0,a._)("td",D,[(0,a.Uk)("FID"),(0,a.Wm)(ue,{value:e.oby.list.fid,"onUpdate:value":t[15]||(t[15]=t=>e.OrderBy("fid",t))},null,8,["value"])]),(0,a._)("td",null,[(0,a.Uk)("名称"),(0,a.Wm)(ue,{value:e.oby.list.title,"onUpdate:value":t[16]||(t[16]=t=>e.OrderBy("title",t))},null,8,["value"])]),C,(0,a._)("td",S,[(0,a.Uk)("创建时间"),(0,a.Wm)(ue,{value:e.oby.list.ctime,"onUpdate:value":t[17]||(t[17]=t=>e.OrderBy("ctime",t))},null,8,["value"])]),(0,a._)("td",I,[(0,a.Uk)("更新时间"),(0,a.Wm)(ue,{value:e.oby.list.utime,"onUpdate:value":t[18]||(t[18]=t=>e.OrderBy("utime",t))},null,8,["value"])]),z,O,(0,a._)("td",null,[(0,a.Uk)("URL"),(0,a.Wm)(ue,{value:e.oby.list.url,"onUpdate:value":t[19]||(t[19]=t=>e.OrderBy("url",t))},null,8,["value"])]),(0,a._)("td",null,[(0,a.Uk)("API"),(0,a.Wm)(ue,{value:e.oby.list.controller,"onUpdate:value":t[20]||(t[20]=t=>e.OrderBy("controller",t))},null,8,["value"])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.page.list,((t,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",A,[(0,a.Wm)(pe,{value:t.id},null,8,["value"])]),(0,a._)("td",null,(0,d.zw)(t.id),1),(0,a._)("td",null,(0,d.zw)(t.fid),1),(0,a._)("td",null,[(0,a._)("b",null,(0,d.zw)(t.title),1)]),(0,a._)("td",R,[t.ico?((0,a.wg)(),(0,a.iD)("span",B,[(0,a._)("i",{class:(0,d.C_)(t.ico)},null,2)])):((0,a.wg)(),(0,a.iD)("span",T,"-"))]),(0,a._)("td",null,(0,d.zw)(t.ctime),1),(0,a._)("td",null,(0,d.zw)(t.utime),1),(0,a._)("td",P,(0,d.zw)(t.sort),1),(0,a._)("td",F,[e.getters.actionShow("perm")&&t.controller&&!t.action?((0,a.wg)(),(0,a.j4)(re,{key:0,type:"danger",effect:"text",padding:"0 4px",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[(0,a.Uk)("设置")])),_:2},1032,["onClick"])):e.getters.actionShow("perm")&&t.controller&&t.action?((0,a.wg)(),(0,a.j4)(re,{key:1,type:"primary",effect:"text",padding:"0 4px",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.iD)("span",j,"-"))]),(0,a._)("td",null,(0,d.zw)(t.url),1),(0,a._)("td",null,(0,d.zw)(t.controller),1)])))),128)),0==e.page.list.length?((0,a.wg)(),(0,a.iD)("tr",J,L)):(0,a.kq)("",!0)])),_:1},8,["data"])]),(0,a.Wm)(ce,{page:e.page.page,limit:e.page.limit,total:e.page.total,"onUpdate:page":e.subPage},null,8,["page","limit","total","onUpdate:page"])],4)]),(0,a.Wm)(_e,{title:"添加",width:"540px",show:e.add.show,"onUpdate:show":t[28]||(t[28]=t=>e.add.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(re,{type:"primary",onClick:t[27]||(t[27]=t=>e.subAdd())},{default:(0,a.w5)((()=>[(0,a.Uk)("确 认")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(he,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[N,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.fid,"onUpdate:value":t[21]||(t[21]=t=>e.add.form.fid=t),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])]),(0,a._)("tr",null,[q,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.title,"onUpdate:value":t[22]||(t[22]=t=>e.add.form.title=t),maxlength:"16",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])]),(0,a._)("tr",null,[$,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.controller,"onUpdate:value":t[23]||(t[23]=t=>e.add.form.controller=t),maxlength:"64",placeholder:"例如: /api/test"},null,8,["value"])])]),(0,a._)("tr",null,[E,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.url,"onUpdate:value":t[24]||(t[24]=t=>e.add.form.url=t),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])]),(0,a._)("tr",null,[H,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.ico,"onUpdate:value":t[25]||(t[25]=t=>e.add.form.ico=t),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])]),(0,a._)("tr",null,[Y,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.add.form.sort,"onUpdate:value":t[26]||(t[26]=t=>e.add.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_e,{title:"编辑",width:"540px",show:e.edit.show,"onUpdate:show":t[36]||(t[36]=t=>e.edit.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(re,{type:"primary",onClick:t[35]||(t[35]=t=>e.subEdit())},{default:(0,a.w5)((()=>[(0,a.Uk)("确 认")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(he,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[M,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.fid,"onUpdate:value":t[29]||(t[29]=t=>e.edit.form.fid=t),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])]),(0,a._)("tr",null,[V,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.title,"onUpdate:value":t[30]||(t[30]=t=>e.edit.form.title=t),maxlength:"16",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])]),(0,a._)("tr",null,[G,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.controller,"onUpdate:value":t[31]||(t[31]=t=>e.edit.form.controller=t),maxlength:"64",placeholder:"例如: /api/test"},null,8,["value"])])]),(0,a._)("tr",null,[Q,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.url,"onUpdate:value":t[32]||(t[32]=t=>e.edit.form.url=t),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])]),(0,a._)("tr",null,[X,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.ico,"onUpdate:value":t[33]||(t[33]=t=>e.edit.form.ico=t),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])]),(0,a._)("tr",null,[ee,(0,a._)("td",null,[(0,a.Wm)(se,{value:e.edit.form.sort,"onUpdate:value":t[34]||(t[34]=t=>e.edit.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_e,{title:"删除",width:"360px",show:e.del.show,"onUpdate:show":t[38]||(t[38]=t=>e.del.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(re,{type:"danger",onClick:t[37]||(t[37]=t=>e.subDel())},{default:(0,a.w5)((()=>[(0,a.Uk)("彻底删除")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(we,null,{default:(0,a.w5)((()=>[(0,a.Uk)("是否删除已选择数据？")])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_e,{width:"640px",title:e.perm.title,show:e.perm.show,"onUpdate:show":t[42]||(t[42]=t=>e.perm.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(re,{type:"primary",onClick:t[41]||(t[41]=t=>e.subPerm())},{default:(0,a.w5)((()=>[(0,a.Uk)("确 认")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(me,{isCheckbox:!1},{title:(0,a.w5)((()=>[te,le,ae,(0,a._)("td",de,[(0,a._)("div",ie,[(0,a.Wm)(fe,{onClick:t[39]||(t[39]=t=>e.permAdd())})])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.perm.list,((l,d)=>((0,a.wg)(),(0,a.iD)("tr",{key:d},[(0,a._)("td",null,[(0,a.Wm)(se,{value:l.name,"onUpdate:value":e=>l.name=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(se,{value:l.action,"onUpdate:value":e=>l.action=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(se,{value:l.perm,"onUpdate:value":e=>l.perm=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a._)("div",oe,[(0,a.Wm)(ge,{onClick:t[40]||(t[40]=t=>e.permRemove(e.key))})])])])))),128))])),_:1})])),_:1},8,["title","show"])])}l(7658);var ne=l(3907),re=l(8907),ue=l(6492),pe=l(5783),me=l(2367),ce=l(1535),he=l(6615),_e=l(1566),we=l(6341),fe=l(6534),ge=l(3098),ve=l(1073),be=l(1080),ke=l(7053),xe=l(9821),ye=l(8549),Ue=l(9269),We=l(6308),Ze=(0,a.aZ)({components:{wmSearch:ce.Z,wmMain:he.Z,wmRow:_e.Z,wmTable:we.Z,wmTableForm:fe.Z,wmTableOrder:ge.Z,wmCheckbox:ve.Z,wmDialog:be.Z,wmAdd:ke.Z,wmClose:xe.Z,wmInput:ye.Z,wmButton:Ue.Z,wmPage:We.Z},data(){const e=(0,ne.oR)(),t=e.state,l=e.getters,a={list:[],page:1,limit:100,total:0},d={show:!1,form:{}},i={name:"",list:{id:"",fid:"",title:"",en:"",ctime:"",utime:"",url:"",controller:""}},o={show:!1,form:{}},s={show:!1,id:"",form:{}},n={show:!1,ids:""},r={show:!1,id:"",title:"权限",list:[]};return{state:t,getters:l,page:a,sea:d,oby:i,add:o,edit:s,del:n,perm:r}},mounted(){me.Z.getItem("token")&&this.loadData()},methods:{loadData(){this.page.list=[],this.page.total=0;const e=(0,re.Z)();(0,pe.Z)("api_menus/list",{token:me.Z.getItem("token"),page:this.page.page,limit:this.page.limit,data:JSON.stringify(this.sea.form),order:this.oby.name},(t=>{e.clear();const l=t.data;if(0!=l.code)return(0,ue.Z)(l.msg);this.page.list=l.list,this.page.total=l.total}))},subPage(e){this.page.page=e,this.loadData()},subSea(){this.page.page=1,this.loadData()},OrderBy(e,t){for(let l in this.oby.list)this.oby.list[l]=l==e?t:"";this.oby.name=t?e+" "+t:"",this.loadData()},subAdd(){this.add.show=!1;const e=JSON.stringify(this.add.form),t=(0,re.Z)();(0,pe.Z)("api_menus/add",{token:me.Z.getItem("token"),data:e},(e=>{t.clear();const l=e.data;return 0===l.code&&this.loadData(),(0,ue.Z)(l.msg)}))},editData(){const e=this.$refs.Table,t=e.getRow();if(!t)return(0,ue.Z)("请选择数据!");this.edit.show=!0,this.edit.id=t.id,this.edit.form.fid=t.fid,this.edit.form.title=t.title,this.edit.form.url=t.url,this.edit.form.ico=t.ico,this.edit.form.sort=t.sort,this.edit.form.controller=t.controller},subEdit(){this.edit.show=!1;const e=(0,re.Z)();(0,pe.Z)("api_menus/edit",{token:me.Z.getItem("token"),id:this.edit.id,data:JSON.stringify(this.edit.form)},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,ue.Z)(l.msg)}))},delData(){const e=this.$refs.Table,t=e.getVals();if(!t)return(0,ue.Z)("请选择数据!");this.del.show=!0,this.del.ids=JSON.stringify(t)},subDel(){this.del.show=!1;const e=(0,re.Z)();(0,pe.Z)("api_menus/del",{token:me.Z.getItem("token"),data:this.del.ids},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,ue.Z)(l.msg)}))},permData(e,t,l,a){this.perm.show=!0,this.perm.id=e,this.perm.title=t+": "+l,this.perm.list=a},subPerm(){const e=this.perm.list,t=[];for(let a in e)e[a].action&&e[a].perm&&t.push(e[a]);this.perm.list=t,this.perm.show=!1;const l=(0,re.Z)();(0,pe.Z)("api_menus/perm",{token:me.Z.getItem("token"),id:this.perm.id,data:JSON.stringify(t)},(e=>{l.clear();const t=e.data;return 0===t.code&&this.loadData(),(0,ue.Z)(t.msg)}))},permAdd(){const e=this.perm.list,t=e[e.length-1].perm;e.push({name:"",action:"",perm:2*t})},permRemove(e){const t=this.perm.list;t.splice(e,1)}}}),De=l(3744);const Ce=(0,De.Z)(Ze,[["render",se],["__scopeId","data-v-1bea2fca"]]);var Se=Ce}}]);