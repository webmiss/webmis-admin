"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[502],{5745:function(t,e,a){var n=a(9464);e["Z"]=(t,e)=>{try{let a=plus.camera.getCamera();a.captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){e.file((e=>{t(e)}))}),(()=>(0,n.Z)("读取拍照失败!")))}),e)}catch(a){const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),document.body.appendChild(e),e.click(),e.onchange=()=>{t(e.files[0])}}}},9417:function(t,e,a){a.d(e,{Z:function(){return i}});var n=(t,e,a)=>{let n=e.width||0,i=e.height||0,l=e.cut||!0,r=e.quality||.8,d=e.ext||"jpg";const o={jpg:"image/jpeg",png:"image/png",gif:"image/gif"};let u=1,s=1,m=0,p=0,h=1,g=u/s,c=document.createElement("canvas"),f=c.getContext("2d"),w=new Image;w.src=t,w.onload=function(){const t=this;g=t.width/t.height,n>0&&0==i?(u=n<t.width?n:t.width,s=n<t.width?Math.round(n/g):Math.round(t.width/g),n=u,i=s):0==n&&i>0?(u=i<t.height?Math.round(i*g):Math.round(t.height*g),s=i<t.height?i:t.height,n=u,i=s):0==n&&0==i?(u=t.width,s=t.height,n=u,i=s):(h=n/i,g>h?n<t.width?(u=l?Math.round(i*g):n,s=l?i:Math.round(n/g)):(u=l?Math.round(t.height*g):t.width,s=l?t.height:Math.round(t.width/g)):i<t.height?(u=l?n:Math.round(i*g),s=l?Math.round(n/g):i):(u=l?t.width:Math.round(t.height*g),s=l?Math.round(t.width/g):t.height)),c.width=n,c.height=i,m=Math.round(n-u)/2,p=Math.round(i-s)/2,f.drawImage(this,m,p,u,s);let e=c.toDataURL(o[d],r);a(e)}},i=(t,e,a)=>{try{let i=new plus.io.FileReader;i.readAsDataURL(t),i.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),n(this.result,e,a)}}catch(i){let l=new FileReader;l.readAsDataURL(t),l.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),n(this.result,e,a)}}}},3415:function(t,e,a){a.d(e,{Z:function(){return g}});var n=a(6252),i=a(3577);const l=t=>((0,n.dD)("data-v-9aa082c6"),t=t(),(0,n.Cn)(),t),r={class:"wm-date_body"},d=l((()=>(0,n._)("div",{class:"wm-date_arrow bottom"},null,-1)));function o(t,e,a,l,o,u){const s=(0,n.up)("wm-input");return(0,n.wg)(),(0,n.iD)("div",{class:"wm-date",style:(0,i.j5)({width:t.width})},[(0,n.Wm)(s,{value:t.value,"onUpdate:value":e[0]||(e[0]=e=>t.value=e),placeholder:t.placeholder},null,8,["value","placeholder"]),(0,n._)("div",r,[d,(0,n._)("div",{class:"wm-date_ct",onClick:e[1]||(e[1]=e=>t.getDate())},"暂不更新,点击获取今天")])],4)}var u=a(3512),s=a(2653),m=(0,n.aZ)({name:"Date",components:{wmInput:u.Z},props:{value:{type:String,default:""},width:{type:String,default:"160px"},placeholder:{type:String,default:"选择日期"}},mounted(){},methods:{getDate(){const t=(0,s.ou)("Y-m-d");this.$emit("update:value",t)}}}),p=a(8118);const h=(0,p.Z)(m,[["render",o],["__scopeId","data-v-9aa082c6"]]);var g=h},7880:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252);const i={ref:"form"};function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.WI)(t.$slots,"default")],512)}var r=(0,n.aZ)({name:"Form",props:{labelWidth:{type:String,default:"90px"},labelHeight:{type:String,default:"40px"}},mounted(){this.init()},methods:{init(){const t=this.$refs.form,e=t.getElementsByTagName("label");t.getElementsByClassName("wm-form_item_body");for(let a=0;a<e.length;a++)e[a].style.width=this.labelWidth,e[a].style.height=this.labelHeight}}}),d=a(8118);const o=(0,d.Z)(r,[["render",l]]);var u=o},8165:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252),i=a(3577);function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-form_item",style:(0,i.j5)({margin:t.margin})},["none"!=t.label?((0,n.wg)(),(0,n.iD)("label",{key:0,class:"wm-form_item_label",style:(0,i.j5)({height:t.height})},(0,i.zw)(t.label),5)):(0,n.kq)("",!0),(0,n._)("div",{class:"wm-form_item_body",style:(0,i.j5)({height:t.height})},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],4)],4)}var r=(0,n.aZ)({name:"FormItem",props:{type:{type:String,default:"label"},label:{type:String,default:""},height:{type:String,default:"40px"}},data(){const t="";return{margin:t}},mounted(){"label"==this.type?this.margin="8px 0":"botton"==this.type&&(this.margin="24px 0")}}),d=a(8118);const o=(0,d.Z)(r,[["render",l],["__scopeId","data-v-20c2801c"]]);var u=o},3371:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(6252),i=a(3577),l=a(9963);const r={class:"wm-radio"},d={key:0,class:"disabled"},o={class:"label"},u=["onClick"],s={class:"label"};function m(t,e,a,m,p,h){return(0,n.wg)(),(0,n.iD)("ul",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((e,a)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:a},[e.disabled?((0,n.wg)(),(0,n.iD)("li",d,[(0,n._)("span",{class:(0,i.C_)(["checked",e.value==t.value?"active":""])},null,2),(0,n._)("span",o,(0,i.zw)(e.label),1)])):((0,n.wg)(),(0,n.iD)("li",{key:1,class:"enabled",onClick:(0,l.iM)((a=>t.$emit("update:value",e.value)),["stop"])},[(0,n._)("span",{class:(0,i.C_)(["checked",e.value==t.value?"active":""])},null,2),(0,n._)("span",s,(0,i.zw)(e.label),1)],8,u))],64)))),128))])}var p=(0,n.aZ)({name:"Radio",props:{value:{default:""},data:{type:Array,default:[]}},methods:{}}),h=a(8118);const g=(0,h.Z)(p,[["render",m],["__scopeId","data-v-48bf10dd"]]);var c=g},9233:function(t,e,a){a.d(e,{Z:function(){return m}});var n=a(6252),i=a(3577);const l=["title"],r={key:1,class:"wm-img_null"};function d(t,e,a,d,o,u){return(0,n.wg)(),(0,n.iD)("div",{ref:"img",class:"wm-img",title:t.title},[t.url?((0,n.wg)(),(0,n.iD)("div",{key:0,style:(0,i.j5)({backgroundImage:"url("+t.url+")",backgroundSize:t.size})},null,4)):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("i",{class:"ui ui_image",style:(0,i.j5)({fontSize:t.icoSize})},null,4)]))],8,l)}var o=(0,n.aZ)({name:"Img",props:{url:{type:String,default:""},size:{type:String,default:"cover"},width:{type:String,default:"90px"},height:{type:String,default:"40px"},radius:{type:String,default:"0px"},title:{type:String,default:""},icoSize:{type:String,default:"32px"}},mounted(){const t=this.$refs.img;t.style.width=this.width,t.style.height=this.height,t.style.lineHeight=this.height,t.style.borderRadius=this.radius}}),u=a(8118);const s=(0,u.Z)(o,[["render",d],["__scopeId","data-v-58f643d0"]]);var m=s},4719:function(t,e,a){a.d(e,{Z:function(){return g}});var n=a(6252);const i=["title"];function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-upload",onClick:e[0]||(e[0]=e=>t.upImage()),title:t.title},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],8,i)}var r=a(4940),d=a(9464),o=a(2260),u=a(5745),s=a(9417),m=(0,n.aZ)({name:"ImgUpLoad",props:{url:{type:String,default:""},width:{type:Number,default:200},height:{type:Number,default:200},param:{type:Object,default:{}},title:{type:String,default:"上传图片"}},methods:{upImage(){(0,u.Z)((t=>{(0,s.Z)(t,{width:this.width,height:this.height},(t=>{if(!this.url)return(0,d.Z)("上传Url地址为空!");const e=(0,r.Z)();this.param.base64=t,(0,o.Z)(this.url,this.param,(t=>{e.clear();const a=t.data;return this.$emit("upload",a),(0,d.Z)(a.msg)}))}))}))}}}),p=a(8118);const h=(0,p.Z)(m,[["render",l],["__scopeId","data-v-7b9eb3da"]]);var g=h},2938:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252),i=a(3577);function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-main",style:(0,i.j5)({width:"calc(100% - "+2*t.padding+"px)",height:"calc(100% - "+2*t.padding+"px)",padding:t.padding+"px",backgroundColor:t.bgColor})},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],4)}var r=(0,n.aZ)({name:"Main",props:{padding:{type:Number,default:16},bgColor:{type:String,default:"transparent"}}}),d=a(8118);const o=(0,d.Z)(r,[["render",l],["__scopeId","data-v-c0afaaee"]]);var u=o},1502:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var n=a(6252);function i(t,e,a,i,l,r){const d=(0,n.up)("wm-img"),o=(0,n.up)("wm-img-upload"),u=(0,n.up)("wm-form-item"),s=(0,n.up)("wm-input"),m=(0,n.up)("wm-radio"),p=(0,n.up)("wm-date"),h=(0,n.up)("wm-button"),g=(0,n.up)("wm-form"),c=(0,n.up)("wm-main");return(0,n.wg)(),(0,n.j4)(c,{bgColor:"#FFF"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"max_width"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:"头像",height:"auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{url:t.upload.url,param:t.upload.param,onUpload:t.upImg},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{width:"80px",height:"80px",radius:"50%",url:t.form.img},null,8,["url"])])),_:1},8,["url","param","onUpload"])])),_:1}),(0,n.Wm)(u,{label:"昵称"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.nickname,"onUpdate:value":e[0]||(e[0]=e=>t.form.nickname=e),maxlength:"12",placeholder:"用户昵称"},null,8,["value"])])),_:1}),(0,n.Wm)(u,{label:"姓名"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.name,"onUpdate:value":e[1]||(e[1]=e=>t.form.name=e),maxlength:"8",placeholder:"填写姓名"},null,8,["value"])])),_:1}),(0,n.Wm)(u,{label:"性别"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{value:t.form.gender,"onUpdate:value":e[2]||(e[2]=e=>t.form.gender=e),data:t.gender},null,8,["value","data"])])),_:1}),(0,n.Wm)(u,{label:"生日"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{value:t.form.birthday,"onUpdate:value":e[3]||(e[3]=e=>t.form.birthday=e)},null,8,["value"])])),_:1}),(0,n.Wm)(u,{label:"部门"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.department,"onUpdate:value":e[4]||(e[4]=e=>t.form.department=e),maxlength:"8",placeholder:"部门名称"},null,8,["value"])])),_:1}),(0,n.Wm)(u,{label:"职务"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.position,"onUpdate:value":e[5]||(e[5]=e=>t.form.position=e),maxlength:"8",placeholder:"职务、职称"},null,8,["value"])])),_:1}),(0,n.Wm)(u,{type:"botton"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{onClick:e[6]||(e[6]=e=>t.onSubmit())},{default:(0,n.w5)((()=>[(0,n.Uk)("保存设置")])),_:1})])),_:1})])),_:1})])),_:1})}var l=a(3907),r=a(4940),d=a(9464),o=a(2260),u=a(5751),s=a(2938),m=a(7880),p=a(8165),h=a(3512),g=a(3371),c=a(3415),f=a(8086),w=a(9233),v=a(4719),y=(0,n.aZ)({components:{wmMain:s.Z,wmForm:m.Z,wmFormItem:p.Z,wmInput:h.Z,wmRadio:g.Z,wmDate:c.Z,wmButton:f.Z,wmImg:w.Z,wmImgUpload:v.Z},data(){const t=(0,l.oR)(),e=t.state,a={img:"",nickname:"",name:"",gender:"男",birthday:"",position:""},n=[{label:"男",value:"男"},{label:"女",value:"女"}],i={url:"user_info/upimg",param:{token:u.Z.getItem("token")}};return{state:e,form:a,gender:n,upload:i}},mounted(){u.Z.getItem("token")&&this.loadData()},methods:{loadData(){const t=(0,r.Z)();(0,o.Z)("user_info/list",{token:u.Z.getItem("token")},(e=>{t.clear();const a=e.data;if(0!=a.code)return(0,d.Z)(a.msg);this.form=a.list}),(()=>{(0,d.Z)("网络加载失败!")}))},onSubmit(){const t=JSON.stringify(this.form),e=(0,r.Z)();(0,o.Z)("user_info/edit",{token:u.Z.getItem("token"),data:t},(t=>{e.clear();const a=t.data;return 0==a.code&&(this.state.uInfo=a.uinfo),(0,d.Z)(a.msg)}))},upImg(t){return 0==t.code&&(this.form.img=t.img,this.state.uInfo.img=t.img),(0,d.Z)(t.msg)}}}),b=a(8118);const _=(0,b.Z)(y,[["render",i],["__scopeId","data-v-7abe8172"]]);var Z=_}}]);